{"version":3,"sources":["containers/Auth/Auth.module.css","containers/Account/Account.module.css","components/Layout/Layout.module.css","containers/Auth/Auth.tsx","containers/Auth/AuthTest.tsx","utils/getAvatar.js","components/Layout/Layout.tsx","utils/processRes.js","store/actions/auth.tsx","containers/ConnectWebsocket/methods/getListOfNeededResources.js","containers/ConnectWebsocket/methods/compareVersionsAndRerequest.js","containers/ConnectWebsocket/methods/getResourcesToMonitor.js","containers/ConnectWebsocket/ConnectWebsocket.tsx","store/actions/saveResources.tsx","containers/ConnectWebsocket/methods/requestResource.tsx","store/actions/updateResource.tsx","utils/uploadFile.js","constants/fieldLength.js","constants/fieldRules.js","containers/Shop/AddPerkForm.tsx","websocketActions/posts.tsx","websocketActions/wishlistAndPerks.tsx","websocketActions/friends.tsx","containers/Shop/AddPerk.tsx","components/UI/ImageCarousel/ImageCarousel.tsx","containers/Shop/PerkCard.tsx","components/AddCard/AddCard.tsx","containers/Shop/WishlistAndPerks.tsx","containers/Goals/Goals.tsx","utils/pullData.js","components/Post/AddMessage.tsx","components/UserButton/UserButton.tsx","components/Post/Message.tsx","components/Post/Post.tsx","containers/Goals/Goal.tsx","containers/Progresses/ProgressCard.tsx","components/EditGoalAndProgressForm/connectionsSelect.tsx","components/Rewards/Rewards.tsx","websocketActions/progresses.tsx","components/EditGoalAndProgressForm/EditGoalAndProgressForm.tsx","containers/Progresses/AddProgress.tsx","containers/Progresses/GroupCard.tsx","containers/Progresses/Progresses.tsx","containers/Progress/ActivityTable.tsx","containers/Progress/EditProgress.tsx","containers/Progress/Activity.tsx","components/Post/AddPost.tsx","containers/Progress/Progress.tsx","containers/Shop/Wallet.tsx","containers/Shop/Transactions.tsx","containers/Shop/Shop.tsx","containers/Dashboard/DashboardPosts.tsx","containers/Dashboard/DashboardEvents.tsx","containers/Dashboard/Dashboard.tsx","websocketActions/dashboard.tsx","components/FriendActionButton.tsx","components/FriendCard.tsx","containers/Friends/AddFriends.tsx","containers/Friends/PendingFriends.tsx","containers/Friends/Friends.tsx","containers/Account/Account.tsx","websocketActions/account.tsx","containers/Profile/Profile.tsx","containers/ActivateAccount/ActivateAccount.tsx","containers/Shop/Perk.tsx","containers/Wishlist/WishlistItem.tsx","containers/Wishlist/Wishlist.tsx","containers/Group/Group.tsx","containers/Dashboard/NotificationsTracker.tsx","App.tsx","store/reducer/reducer.tsx","index.tsx"],"names":["module","exports","Container","socialButtons","Background","Avatar","Layout","Header","Footer","HideHeader","FooterButton","TopHeader","BottomHeader","Main","Button","MenuButtonContiner","QuickButtonContiner","PageTitle","cookies","Cookies","withRouter","connect","state","lastUrl","props","_useState","useState","_useState2","Object","slicedToArray","setState","_useState3","_useState4","cookieConsent","setCookieConsent","useEffect","checkCookieConsent","remeberMeParam","get","basicURL","react_default","a","createElement","Fragment","className","classes","dist","onClick","window","location","concat","es_checkbox","checked","onChange","modal","title","visible","onOk","set","path","maxAge","onCancel","open","destroyOnClose","maskClosable","getAvatar","nickname","version","Content","account","pageTitle","isAuthed","lastNotifications","menuVisible","setMenuVisible","lastScrollY","setLastScrollY","_useState5","_useState6","headerVisible","setHeaderVisible","handleScroll","currentScrollY","scrollY","removeEventListener","addEventListener","toggleMenu","selectedKey","history","pathname","split","undefined","buttonProps","type","size","checkHighligh","url","ghost","openLink","push","isActivating","numberOfUnseenNots","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","not","value","parseInt","notId","lastSeenNot","err","return","_id","es_layout","join","es_button","assign","icon","MenuOutlined_default","main","LogoutOutlined_default","style","margin","cursor","avatar","border","src","image","children","badge","count","HomeFilled_default","RocketFilled_default","ShopFilled_default","friends","filter","item","status","length","TeamOutlined_default","drawer","closable","onClose","placement","es_menu","theme","mode","selectedKeys","_ref","key","overflowedIndicator","Item","AimOutlined_default","HeartFilled_default","UserOutlined_default","includes","tooltip","mouseEnterDelay","processRes","res","data","logout","success","errorCode","message","warning","error","successCode","tryAuth","forceLogin","dispatch","sessionStorage","setItem","token","rememberMe","remove","userId","jwt","decode","axios","defaults","headers","post","put","delete","common","Accept","setIsAuthed","saveLastUrl","id","setData","setPageTitle","setFriendSearchResult","getListOfNeededResources","store","requestedResources","user","progress","group","progressData","friendData","postData","groupData","transactionData","neededResources","currentAccount","progresses","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","groups","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","followPosts","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","myPosts","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","transactions","transaction","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","friend","currentProfile","profile","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","currentGroup","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","users","_iteratorNormalCompletion11","_didIteratorError11","_iteratorError11","_step11","_iterator11","_iteratorNormalCompletion12","_didIteratorError12","_iteratorError12","_step12","_iterator12","posts","currentProgress","participants","owner","worker","toConsumableArray","experts","supporters","_iteratorNormalCompletion13","_didIteratorError13","_iteratorError13","_step13","_iterator13","_iteratorNormalCompletion14","_didIteratorError14","_iteratorError14","_step14","_iterator14","currentPosts","_iteratorNormalCompletion15","_didIteratorError15","_iteratorError15","_step15","_iterator15","postEl","_iteratorNormalCompletion16","_didIteratorError16","_iteratorError16","_step16","_iterator16","parent","parentType","parentId","reduce","obj","attr","Array","from","Set","notNeededExist","notNeededResources","check1","check2","removeData","compareVersionsAndRerequest","versions","webSocket","checkData","requestResource","check","__v","getResourcesToMonitor","resources","addData","require","create","propertyFilter","name","context","ConnectWebsocket","start","pingTimeout","WebSocket","heartbeat","_this","clearTimeout","setTimeout","close","send","JSON","stringify","messageCode","onopen","event","resourcesToMonitor","initializeRequestResources","onmessage","news","parse","messageText","setFriendsData","friendsData","saveResource","updateResource","code","update","text","onclose","checkInterval","readyState","clearInterval","setInterval","reRequestResourcesInterval","reRequestResources","_i","_arr","ids","nextProps","newRequestedResources","_loop","_arr2","_i2","console","log","this","Component","pulledFrom","actions","getState","myAccount","find","forceAuth","notRequestedIds","applyDelta","source","delta","watchFields","result","cloneDeep","del","applyWithDot","keys","shift","applyUpdateToPart","updatedFields","applyDeleteToPart","splice","removedFields","field","indexOf","parState","element","defineProperty","updateData","uploadFile","file","filename","callback","alert","reader","FileReader","onload","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","resizeImageToSpecificSize","width","height","urltoFile","then","getSignedRequest","stop","_x","apply","arguments","readAsArrayBuffer","mimeType","match","fetch","arrayBuffer","buf","File","cb","resizeImageFromSrcToSpecificSize","target","readAsDataURL","img","Image","widthCoef","heightCoef","oc","document","octx","getContext","drawImage","toDataURL","fileName","response","doUploadFile","catch","signedRequest","Content-Type","fieldLength","nicknameRules","required","whitespace","min","max","pattern","nameRules","accountNameRules","descriptionRules","messageRules","priceRules","AddPerkForm","previewImage","setPreviewImage","connections","perkId","perk","deletePerk","onFinish","images","setImages","uploadImage","connectionsSelect","es_select","placeholder","map","Option","marginRight","_Form$useForm","Form","useForm","form","es_form","autoComplete","initialValues","labelCol","span","wrapperCol","label","valuePropName","getValueFromEvent","e","isArray","fileList","upload","listType","index","objectSpread","uid","onPreview","customRequest","_ref2","PlusOutlined_default","rules","input","TextArea","input_number","offset","htmlType","popconfirm","onConfirm","okText","cancelText","danger","footer","alt","sendMessage","accountId","postId","messageValue","imageUrl","replyToMessage","editedMessage","changeLikesMessage","messageId","addPost","buyPerk","buyer","seller","unfriend","friendId","setPerk","wishlist","itemId","goals","goalId","perks","Shop_AddPerkForm","wsActions","setEditPerkOpen","processedValue","ImageCarousel","carousel","backgroundImage","backgroundSize","backgroundPosition","backgroundRepeat","Card","Meta","setEditedPerk","card","bordered","extra","stopPropagation","onlyBuy","dropdown","overlay","EllipsisOutlined","display","alignItems","UI_ImageCarousel_ImageCarousel","price","AddCard","action","shape","icons_PlusOutlined","WishlistAndPerks","editedPerk","editPerkOpen","editPerk","Shop_AddPerk","components_AddCard_AddCard","sub","listKey","Shop_PerkCard","Shop_WishlistAndPerks","pullData","options","imageLoading","setImageLoading","content","replyToUser","setMessageText","background","replyTo","bottom","left","comment","autoSize","minRows","maxRows","rows","editingMessage","onSend","SendOutlined_default","showUploadList","LoadingOutlined_default","PictureOutlined_default","getUserData","userName","userAvatar","noClick","Group","noAva","noName","padding","Message","replies","isStart","replyVisible","setReplyVisible","setReplyToUser","setEditingMessage","commentProps","timeago_react","datetime","date","live","likes","LikeFilled_default","LikeOutlined_default","paddingLeft","author","Math","floor","random","messageType","fontWeight","details","borderRadius","components_UserButton_UserButton","color","fontSize","goal","startMessage","Post_AddMessage","isTop","reply","showReplies","postOpen","setPostOpen","noStartMessage","Post_Message","divider","textAlign","position","justifyContent","icons_LikeFilled","icons_LikeOutlined","messages","getNumberOfMessages","pathParts","whiteSpace","description","components_Post_Post","EditGoalAndProgressForm_connectionsSelect","onSelect","previewReward","setPreviewReward","editedReward","setEditedReward","_useState7","_useState8","editedRewardIndex","setEditedRewardIndex","readOnly","rewardsGI","rewards","findIndex","rewardKey","setRewards","simple","money","itemName","for","progressId","rewardId","confirm","newRewards","indexIn","reward","rewardToSave","itemImages","_ref3","_ref4","itemDescription","_ref5","hoverable","cover","descriptions","column","xxl","xl","lg","md","sm","xs","EditGoalAndProgressForm","milestones","setMilestones","withMilestones","setWithMilestones","_useState9","newTabIndex","_useState10","setNewTabIndex","_useState11","rewardsGroups","_useState12","addMilestone","milestone","newPanes","newKey","indexOfMile","mile","setFieldsValue","MilestoneControls","dropdown_dropdown","domEvent","newMilestones","Divider","pane","trigger","preventDefault","milestonesValues","mile1","onValuesChange","changedValues","components_Rewards_Rewards","es_switch","collapse","expandIconPosition","Panel","header","getFieldValue","AddProgress","components_EditGoalAndProgressForm_EditGoalAndProgressForm","inGroup","setStartProgressVisible","GroupCard_Meta","TabPane","Tabs","loadedProgresses","loadedGroups","fromProfile","startProgressVisible","active","editGoal","Modal","Progresses_AddProgress","tabs","boxShadow","marginTop","tab","Progresses_ProgressCard","Progresses_GroupCard","empty","imageStyle","Descriptions","ActivityTable","renderCheckbox","milestoneId","disabled","columns","dataIndex","render","previewMilestone","fixed","align","expert","getCheckboxStatus","stage","approvedBy","getMilestoneData","stages","paid","milestonesData","table","dataSource","scroll","x","EditProgress","editProgressOpen","Activity_Item","orientation","Progress_ActivityTable","toString","Progress_EditProgress","zIndex","Post_AddPost","Progress_Activity","pulledProfile","wallet","PlusCircleOutlined_default","amount","aTransactionData","types","tag","es_tag","toUpperCase","record","cancelTransaction","confirmTransaction","tableData","sorted","sort","b","Date","getTime","to","Shop_Wallet","Shop_Transactions","statePosts","setPosts","startTime","sortNotifications","notifications","newPosts","newUnseenPosts","newOldPosts","oldPosts","oldPostIndex","_loop2","_newOldPosts","resultPosts","slice","neededPosts","isEqual","getRewardText","as","progressName","addedAccounts","ac","droppedAccounts","activeTab","Dashboard_DashboardPosts","Dashboard_DashboardEvents","FriendActionButton","invitingFriends","invitedFriends","realFriends","additionalButton","menu","additionalButtons","button","asText","DownOutlined","friendActions","friendActionButton","asIcons","searchResult","friendSearchResult","addFriendOpen","setAddFriendOpen","search","components_FriendCard","fullFriend","confirmedFriends","PendingFriends","Friends_AddFriends","increaseAvatarV","deleteVisible","setDeleteVisible","deleteField","setDeleteField","flex","maxWidth","overflow","profileId","marginBottom","_is","containers_Progresses_Progresses","oneFriendData","setAccountActivated","page_header","backIcon","nicknameNotUnique","items","Perk_Item","wishlistItem","groupId","filterSameNot","arr","myNotifications","accountNotActive","redirectTo","Logout","react_router","routes","exact","component","Goals","Goal","Progresses","Progress","Profile","Friends","Account","Dashboard","Shop","Perk","Wishlist","WishlistItem","Auth","ActivateAccount","process","containers_ConnectWebsocket_ConnectWebsocket","Dashboard_NotificationsTracker","reducer","createReducer","SET_DATA","REMOVE_DATA","_i3","_arr3","_i4","_arr4","SET_FRIEND_SEARCH_RESULT","SET_FRIENDS_DATA","SET_AVATAR_V","v","INCREASE_AVATAR_V","SET_IS_AUTHED","SET_PAGE_TITLE","SAVE_LAST_URL","SET_ACCOUNT_ACTIVATED","__webpack_require__","d","__webpack_exports__","src_store","baseURL","createStore","composeWithDevTools","applyMiddleware","thunk","app","es","react_router_dom","src_App","root","getElementById","ReactDOM"],"mappings":"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","file":"static/js/main.be779723.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"Auth_Container__1KNy7\",\"socialButtons\":\"Auth_socialButtons__2wwH9\",\"Background\":\"Auth_Background__39m_a\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Avatar\":\"Account_Avatar__l4shx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Layout\":\"Layout_Layout__3t6t4\",\"Header\":\"Layout_Header__3lh1Y\",\"Footer\":\"Layout_Footer__1Dfqu\",\"HideHeader\":\"Layout_HideHeader__2WRsh\",\"FooterButton\":\"Layout_FooterButton__1lZv2\",\"TopHeader\":\"Layout_TopHeader__3_LuK\",\"BottomHeader\":\"Layout_BottomHeader__3DOBo\",\"Main\":\"Layout_Main__3usmk\",\"Button\":\"Layout_Button__1O5Hm\",\"MenuButtonContiner\":\"Layout_MenuButtonContiner__PpulB\",\"QuickButtonContiner\":\"Layout_QuickButtonContiner__4d4Lg\",\"PageTitle\":\"Layout_PageTitle__368dw\"};","import React, { useState, useEffect } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport Checkbox from 'antd/es/checkbox'\nimport Cookies from 'universal-cookie'\nimport classes from './Auth.module.css'\nimport Svg from '../../components/Svg/Svg'\nimport Modal from 'antd/es/modal'\nimport {\n    FacebookLoginButton,\n    GithubLoginButton,\n    GoogleLoginButton,\n} from 'react-social-login-buttons'\n\nconst cookies = new Cookies()\n\nconst Auth = props => {\n    const [state, setState] = useState(false)\n    const [cookieConsent, setCookieConsent] = useState(false)\n\n    useEffect(() => {\n        checkCookieConsent()\n    })\n\n    let remeberMeParam = '?rememberme=false'\n    if (state) {\n        remeberMeParam = '?rememberme=true'\n    }\n\n    let redirectParam = '&redirect=/login'\n    if (props.lastUrl) {\n        redirectParam = '&redirect=' + props.lastUrl\n    }\n\n    const checkCookieConsent = () => {\n        const cookiesConsent = cookies.get('cookies_consent')\n        if (cookiesConsent) {\n            setCookieConsent(true)\n        }\n    }\n\n    const agreeWithCookies = () => {\n        cookies.set('cookies_consent', 'true', {\n            path: '/',\n            maxAge: 31530000,\n        })\n        checkCookieConsent()\n    }\n    const basicURL =\n        process.env.NODE_ENV !== 'development'\n            ? 'https://getreward.herokuapp.com/api/auth/'\n            : 'http://my.websiter.test:5000/api/auth/'\n    return !cookieConsent ? (\n        <Modal\n            title=\"Cookies consent\"\n            visible={!cookieConsent}\n            onOk={agreeWithCookies}\n            onCancel={() => {\n                window.open('https://websiter.dev', '_self')\n            }}\n            destroyOnClose={true}\n            maskClosable={false}\n        >\n            <p>We use cookies only for login purposes. </p>\n            <p>\n                In order to proceed you need to agree with the use of cookies.\n            </p>\n        </Modal>\n    ) : (\n        <>\n            <div className={classes.Container}>\n                <h1>Welcome to Websiter!</h1>\n                <h2>This is where great progresses live.</h2>\n                <h1>Continue with:</h1>\n                <div className={classes.socialButtons}>\n                    <FacebookLoginButton\n                        onClick={() =>\n                            (window.location =\n                                basicURL + `facebook/start${remeberMeParam}`)\n                        }\n                    />\n                    <GoogleLoginButton\n                        onClick={() =>\n                            (window.location =\n                                basicURL + `google/start${remeberMeParam}`)\n                        }\n                    />\n                    <GithubLoginButton\n                        onClick={() =>\n                            (window.location =\n                                basicURL + `github/start${remeberMeParam}`)\n                        }\n                    />\n                </div>\n                <Checkbox checked={state} onChange={() => setState(!state)}>\n                    Remember me\n                </Checkbox>\n            </div>\n            <div className={classes.Background} />\n        </>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        lastUrl: state.lastUrl,\n    }\n}\n\nexport default withRouter(connect(mapStateToProps)(Auth))\n","import React from 'react'\n\nimport Form from 'antd/es/form'\nimport Input from 'antd/es/input'\nimport Button from 'antd/es/button'\nimport axios from 'axios'\nimport Cookies from 'universal-cookie'\n\nconst cookies = new Cookies()\n\nconst Auth = props => {\n    const layout = {\n        labelCol: { span: 8 },\n        wrapperCol: { span: 16 },\n    }\n    const tailLayout = {\n        wrapperCol: { offset: 8, span: 16 },\n    }\n    const onFinish = value => {\n        axios\n            .post('/api/authtest/' + value.id)\n            .then(res => {\n                cookies.set('auth_token', res.data.cookie)\n                props.onTryAutoSignup()\n            })\n            .catch(err => {})\n    }\n    return (\n        <Form\n            name=\"dynamic_form_nest_item\"\n            onFinish={onFinish}\n            autoComplete=\"off\"\n            {...layout}\n        >\n            <Form.Item\n                label=\"Id\"\n                name=\"id\"\n                rules={[\n                    { required: true, message: 'Please input the goal name.' },\n                ]}\n            >\n                <Input />\n            </Form.Item>\n            <Form.Item {...tailLayout}>\n                <Button type=\"primary\" htmlType=\"submit\" size=\"large\">\n                    Save\n                </Button>\n            </Form.Item>\n        </Form>\n    )\n}\n\nexport default Auth\n","export default (nickname, version) => {\n    if (!nickname) return ''\n    else {\n        return (\n            'https://websiter.s3.us-east-2.amazonaws.com/' +\n            nickname +\n            '/avatar?v=' +\n            (version || 0)\n        )\n    }\n}\n","import React, { useState, useEffect } from 'react'\nimport { withRouter } from 'react-router-dom'\n\nimport { connect } from 'react-redux'\nimport Layout from 'antd/es/layout'\nimport Tooltip from 'antd/es/tooltip'\nimport Menu from 'antd/es/menu'\nimport Avatar from 'antd/es/avatar'\nimport Drawer from 'antd/es/drawer'\nimport Button from 'antd/es/button'\nimport Badge from 'antd/es/badge'\nimport * as classes from './Layout.module.css'\nimport AimOutlined from '@ant-design/icons/AimOutlined'\nimport LogoutOutlined from '@ant-design/icons/LogoutOutlined'\nimport UserOutlined from '@ant-design/icons/UserOutlined'\nimport HeartFilled from '@ant-design/icons/HeartFilled'\nimport RocketFilled from '@ant-design/icons/RocketFilled'\nimport TeamOutlined from '@ant-design/icons/TeamOutlined'\nimport MenuOutlined from '@ant-design/icons/MenuOutlined'\nimport ShopFilled from '@ant-design/icons/ShopFilled'\nimport HomeFilled from '@ant-design/icons/HomeFilled'\nimport PageHeader from 'antd/es/page-header'\nimport getAvatar from '../../utils/getAvatar'\n\nconst { Header, Content, Footer } = Layout\n\nconst AccountLayout = props => {\n    const { account } = props\n    const [menuVisible, setMenuVisible] = useState()\n    const [lastScrollY, setLastScrollY] = useState(0)\n    const [headerVisible, setHeaderVisible] = useState(true)\n\n    useEffect(() => {\n        const handleScroll = () => {\n            const currentScrollY = window.scrollY\n\n            if (currentScrollY > lastScrollY) {\n                setHeaderVisible(false)\n            } else {\n                setHeaderVisible(true)\n            }\n            setLastScrollY(currentScrollY)\n        }\n        window.removeEventListener('scroll', handleScroll)\n        window.addEventListener('scroll', handleScroll)\n        return () => window.removeEventListener('scroll', handleScroll)\n    }, [lastScrollY])\n    const toggleMenu = () => {\n        setMenuVisible(!menuVisible)\n    }\n    const selectedKey =\n        props.history.location.pathname.split('/')[1] || undefined\n\n    const buttonProps = {\n        type: 'link',\n        // ghost: true,\n        size: 'large',\n\n        className: classes.Button,\n    }\n    const checkHighligh = url =>\n        selectedKey === url\n            ? {\n                  ghost: false,\n                  type: 'link',\n              }\n            : { type: 'text' }\n    const openLink = url => props.history.push('/' + url)\n\n    const isActivating = props.history.location.pathname === '/activate-account'\n\n    let numberOfUnseenNots = 0\n\n    for (let not of props.lastNotifications) {\n        if (parseInt(not.notId) > parseInt(account.lastSeenNot || 0))\n            numberOfUnseenNots++\n    }\n\n    return props.isAuthed && account._id ? (\n        <>\n            <Layout className={classes.Layout}>\n                <Header\n                    className={\n                        headerVisible\n                            ? classes.Header\n                            : [classes.Header, classes.HideHeader].join(' ')\n                    }\n                >\n                    <div className={classes.TopHeader}>\n                        <div className={classes.MenuButtonContiner}>\n                            {!isActivating && (\n                                <Button\n                                    {...buttonProps}\n                                    icon={<MenuOutlined />}\n                                    onClick={toggleMenu}\n                                />\n                            )}\n                            <div className={classes.PageTitle}>\n                                {isActivating\n                                    ? 'Activate your account'\n                                    : props.pageTitle.main}\n                            </div>\n                        </div>\n                        <div className={classes.QuickButtonContiner}>\n                            {!isActivating ? (\n                                <span\n                                    onClick={() => openLink('account')}\n                                    style={{\n                                        margin: '0px 10px',\n                                        cursor: 'pointer',\n                                    }}\n                                >\n                                    <Avatar\n                                        style={{ border: '1px solid white' }}\n                                        src={getAvatar(\n                                            account._id,\n                                            account.image\n                                        )}\n                                    />\n                                </span>\n                            ) : (\n                                <Button\n                                    {...buttonProps}\n                                    {...checkHighligh('friends')}\n                                    icon={<LogoutOutlined />}\n                                    onClick={() =>\n                                        props.history.push('/logout')\n                                    }\n                                >\n                                    Logout\n                                </Button>\n                            )}\n                        </div>\n                    </div>\n                </Header>\n                <Content className={classes.Main}>\n                    <div>{props.children}</div>\n                </Content>\n                {!isActivating && (\n                    <Footer className={classes.Footer}>\n                        <Button\n                            {...buttonProps}\n                            {...checkHighligh('dashboard')}\n                            onClick={() => openLink('dashboard')}\n                        >\n                            <Badge count={numberOfUnseenNots}>\n                                <HomeFilled />{' '}\n                                <div className={classes.FooterButton}>\n                                    Dashboard\n                                </div>\n                            </Badge>\n                        </Button>\n\n                        <Button\n                            {...buttonProps}\n                            {...checkHighligh('progresses')}\n                            onClick={() => openLink('progresses')}\n                        >\n                            <Badge count={0}>\n                                <RocketFilled />\n                                <div className={classes.FooterButton}>\n                                    Progresses\n                                </div>\n                            </Badge>\n                        </Button>\n\n                        <Button\n                            {...buttonProps}\n                            {...checkHighligh('shop')}\n                            onClick={() => openLink('shop')}\n                        >\n                            <Badge count={0}>\n                                <ShopFilled />\n                                <div className={classes.FooterButton}>Shop</div>\n                            </Badge>\n                        </Button>\n\n                        <Button\n                            {...buttonProps}\n                            {...checkHighligh('friends')}\n                            onClick={() => openLink('friends')}\n                        >\n                            <Badge\n                                count={\n                                    account.friends.filter(\n                                        item => item.status === 'inviting'\n                                    ).length\n                                }\n                            >\n                                <TeamOutlined />\n                                <div className={classes.FooterButton}>\n                                    Friends\n                                </div>\n                            </Badge>\n                        </Button>\n                    </Footer>\n                )}\n                {!isActivating && (\n                    <Drawer\n                        title=\"Menu\"\n                        closable={true}\n                        onClose={toggleMenu}\n                        visible={menuVisible}\n                        placement=\"left\"\n                    >\n                        <Menu\n                            theme=\"light\"\n                            mode=\"vertical\"\n                            selectedKeys={[selectedKey]}\n                            onClick={({ key }) => {\n                                props.history.push('/' + key)\n                                toggleMenu()\n                            }}\n                            overflowedIndicator={<MenuOutlined />}\n                        >\n                            <Menu.Item key=\"dashboard\" icon={<HomeFilled />}>\n                                Dashboard\n                            </Menu.Item>\n                            <Menu.Item key=\"progresses\" icon={<RocketFilled />}>\n                                Progresses\n                            </Menu.Item>\n                            <Menu.Item key=\"shop\" icon={<ShopFilled />}>\n                                Shop\n                            </Menu.Item>\n                            <Menu.Item key=\"friends\" icon={<TeamOutlined />}>\n                                Friends\n                            </Menu.Item>\n                            <Menu.Item key=\"goals\" icon={<AimOutlined />}>\n                                Goals\n                            </Menu.Item>\n                            <Menu.Item key=\"wishlist\" icon={<HeartFilled />}>\n                                Wishlist\n                            </Menu.Item>\n                            <Menu.Item key=\"account\" icon={<UserOutlined />}>\n                                Account\n                            </Menu.Item>\n                            <Menu.Item key=\"logout\" icon={<LogoutOutlined />}>\n                                Logout\n                            </Menu.Item>\n                        </Menu>\n                    </Drawer>\n                )}\n            </Layout>\n        </>\n    ) : ['/login', 'logout'].includes(props.history.location.pathname) ? (\n        props.children\n    ) : (\n        <>\n            <Layout className={classes.Layout}>\n                <Header className={classes.Header}>\n                    <div className={classes.TopHeader}>\n                        <div className={classes.MenuButtonContiner} />\n                        <div className={classes.QuickButtonContiner}>\n                            <Tooltip\n                                title=\"Sign in or Sign up\"\n                                placement=\"bottomRight\"\n                                mouseEnterDelay={0.3}\n                            >\n                                <Button\n                                    {...buttonProps}\n                                    {...checkHighligh('friends')}\n                                    icon={<LogoutOutlined />}\n                                    onClick={() => props.history.push('/login')}\n                                >\n                                    Sign in or Sign up\n                                </Button>\n                            </Tooltip>\n                        </div>\n                    </div>\n                    {/* <div className={classes.BottomHeader}>\n                        <PageHeader\n                            className=\"site-page-header\"\n                            onBack={() => props.history.goBack()}\n                            title={props.pageTitle && props.pageTitle.main}\n                            subTitle={\n                                (props.pageTitle && props.pageTitle.sub) || ''\n                            }\n                        />\n                    </div> */}\n                </Header>\n                <Content className={classes.Main}>\n                    <div>{props.children}</div>\n                </Content>\n            </Layout>\n        </>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        account: state.account,\n        pageTitle: state.pageTitle,\n        isAuthed: state.isAuthed,\n        lastNotifications: state.lastNotifications,\n    }\n}\n\nexport default withRouter(connect(mapStateToProps)(AccountLayout))\n","import message from 'antd/es/message'\n\nexport default (res, props) => {\n    if (res.data.logout) props.history.push('/logout')\n    if (res.data.success === false) {\n        if (res.data.errorCode) {\n            switch (res.data.errorCode) {\n                case 'no account':\n                    message.warning('Account is not found. Please login.')\n                    break\n                case 'bad data':\n                    message.error(\n                        'Error. Please try one more time with correct data.'\n                    )\n                    break\n                case 'progress exist':\n                    message.warning('This progress already exists.')\n                    break\n                default:\n                    message.warning(\n                        'Something wrong has happened... Try again!'\n                    )\n                    break\n            }\n        } else {\n            message.error('Something failed')\n        }\n    } else {\n        if (res.data.successCode) {\n            switch (res.data.successCode) {\n                case 'avatar saved':\n                    message.success('The avatar image has been updated.')\n                    break\n                case 'success':\n                    message.success('Success!')\n                    break\n                case 'item saved':\n                    message.success('Item is saved')\n                    break\n                case 'prgress created':\n                    message.success('Progress has started!')\n                    break\n                default:\n                    message.success('Success!')\n                    break\n            }\n        }\n    }\n    if (res.data.status && res.data.status === 'no account')\n        props.history.push('/activate-account')\n}\n","import axios from 'axios'\n\nimport Cookies from 'universal-cookie'\nimport jwt from 'jsonwebtoken'\nimport processRes from '../../utils/processRes'\n\nconst cookies = new Cookies()\n\nexport const tryAuth = (props, forceLogin) => (dispatch: Object) => {\n    sessionStorage.setItem('systemRefresh', '0')\n    const token = cookies.get('auth_token')\n    const rememberMe = cookies.get('rememberme')\n    if (rememberMe) {\n        cookies.remove('rememberme', {\n            path: '/',\n        })\n        if (rememberMe === 'false') {\n            cookies.remove('auth_token', {\n                path: '/',\n            })\n        }\n    }\n    const userId = jwt.decode(token)\n    axios.defaults.headers.post['Content-Type'] = 'application/json'\n    axios.defaults.headers.put['Content-Type'] = 'application/json'\n    axios.defaults.headers.delete['Content-Type'] = 'application/json'\n    axios.defaults.headers.common.Accept = 'application/json'\n    if (token && userId) {\n        axios.defaults.headers.common['x-auth-token'] = token\n        axios.defaults.headers.post['x-auth-token'] = token\n        axios.defaults.headers.get['x-auth-token'] = token\n        axios.defaults.headers.delete['x-auth-token'] = token\n        axios.defaults.headers.put['x-auth-token'] = token\n        dispatch(setIsAuthed(userId._id))\n    } else {\n        dispatch(setIsAuthed(false))\n        dispatch(saveLastUrl(props.history.location.pathname))\n        if (forceLogin) props.history.push('/logout')\n    }\n}\n\nconst saveLastUrl = url => ({\n    type: 'SAVE_LAST_URL',\n    url,\n})\n\nconst setIsAuthed = id => ({\n    type: 'SET_IS_AUTHED',\n    id,\n})\n\nexport const logout = () => dispatch => {\n    cookies.remove('rememberme', {\n        path: '/',\n    })\n    cookies.remove('auth_token', {\n        path: '/',\n    })\n    delete axios.defaults.headers.common['x-auth-token']\n    delete axios.defaults.headers.post['x-auth-token']\n    delete axios.defaults.headers.get['x-auth-token']\n    delete axios.defaults.headers.delete['x-auth-token']\n    delete axios.defaults.headers.put['x-auth-token']\n    dispatch(setIsAuthed(false))\n}\n\nexport const setData = data => ({\n    type: 'SET_DATA',\n    data,\n})\n\nexport const removeData = data => ({\n    type: 'REMOVE_DATA',\n    data,\n})\n\nexport const setFriendsData = data => ({\n    type: 'SET_FRIENDS_DATA',\n    data,\n})\n\nexport const setAvatarV = v => ({\n    type: 'SET_AVATAR_V',\n    v,\n})\n\nexport const increaseAvatarV = () => ({\n    type: 'INCREASE_AVATAR_V',\n})\n\nexport const setPageTitle = title => ({\n    type: 'SET_PAGE_TITLE',\n    title,\n})\n\nexport const buyPerk = (account, perk, owner, props) => dispatch => {\n    const currency = account.wallet.find(item => item.user === owner._id)\n    if (currency && currency.amount >= perk.price) {\n        axios\n            .post('/api/shop/buy', {\n                perkId: perk.perkId,\n                ownerId: owner._id,\n            })\n            .then(res => {\n                processRes(res)\n                if (res.data.success) {\n                    // console.log(res.data)\n                    // console.log(props.history.location.pathname)\n                    dispatch(setData(res.data, props.history.location.pathname))\n                }\n            })\n            .catch(err => {})\n    } else {\n        alert(\n            'You cannot buy this item as you do not have enough money from this user.'\n        )\n    }\n}\n\nexport const confirmTransaction = (transactionId, props) => dispatch => {\n    axios\n        .post('/api/shop/confirm', {\n            transactionId,\n        })\n        .then(res => {\n            processRes(res)\n            if (res.data.success) {\n                dispatch(setData(res.data, props.history.location.pathname))\n            }\n        })\n        .catch(err => {})\n}\n\nexport const cancelTransaction = (transactionId, props) => dispatch => {\n    axios\n        .post('/api/shop/cancel', {\n            transactionId,\n        })\n        .then(res => {\n            processRes(res)\n            if (res.data.success) {\n                dispatch(setData(res.data, props.history.location.pathname))\n            }\n        })\n        .catch(err => {})\n}\n\nexport const setFriendSearchResult = data => ({\n    type: 'SET_FRIEND_SEARCH_RESULT',\n    data,\n})\n\nexport const setAccountActivated = value => ({\n    type: 'SET_ACCOUNT_ACTIVATED',\n    value,\n})\n","export default props => {\n    const createEmptyObj = () => ({\n        user: [],\n        account: [],\n        progress: [],\n        post: [],\n        group: [],\n        progressData: [],\n        friendData: [],\n        postData: [],\n        groupData: [],\n        transactionData: [],\n    })\n    const { store } = props\n    const requestedResources = createEmptyObj()\n    const neededResources = createEmptyObj()\n    if (store.isAuthed) {\n        if (!store.user) {\n            requestedResources.user.push(store.isAuthed)\n        } else {\n            neededResources.user.push(store.user._id)\n            if (store.currentAccount) {\n                if (store.account._id !== store.currentAccount) {\n                    requestedResources.account.push(store.currentAccount)\n                } else {\n                    neededResources.account.push(store.account._id)\n                    for (let progress of store.account.progresses) {\n                        if (!store.progressData[progress]) {\n                            requestedResources.progressData.push(progress)\n                        }\n                        neededResources.progressData.push(progress)\n                    }\n                    for (let group of store.account.groups) {\n                        if (!store.groupData[group]) {\n                            requestedResources.groupData.push(group)\n                        }\n                        neededResources.groupData.push(group)\n                    }\n                    for (let post of store.account.followPosts) {\n                        if (!store.postData[post]) {\n                            requestedResources.postData.push(post)\n                        }\n                        neededResources.postData.push(post)\n                    }\n                    for (let post of store.account.myPosts) {\n                        if (!store.postData[post]) {\n                            requestedResources.postData.push(post)\n                        }\n                        neededResources.postData.push(post)\n                    }\n                    for (let transaction of store.account.transactions) {\n                        if (!store.transactionData[transaction]) {\n                            requestedResources.transactionData.push(transaction)\n                        }\n                        neededResources.transactionData.push(transaction)\n                    }\n                    for (let friend of store.account.friends) {\n                        if (!store.friendData[friend.friend]) {\n                            requestedResources.friendData.push(friend.friend)\n                        }\n                        neededResources.friendData.push(friend.friend)\n                    }\n                }\n            }\n            if (store.currentProfile) {\n                if (store.profile._id !== store.currentProfile) {\n                    requestedResources.account.push(store.currentProfile)\n                } else {\n                    neededResources.account.push(store.profile._id)\n                    for (let progress of store.profile.progresses) {\n                        if (!store.progressData[progress]) {\n                            requestedResources.progressData.push(progress)\n                        }\n                        neededResources.progressData.push(progress)\n                    }\n                    for (let group of store.profile.groups) {\n                        if (!store.groupData[group]) {\n                            requestedResources.groupData.push(group)\n                        }\n                        neededResources.groupData.push(group)\n                    }\n                    for (let friend of store.profile.friends) {\n                        if (!store.friendData[friend.friend]) {\n                            requestedResources.friendData.push(friend.friend)\n                        }\n                        neededResources.friendData.push(friend.friend)\n                    }\n                }\n            }\n            if (store.currentGroup) {\n                if (store.group._id !== store.currentGroup) {\n                    requestedResources.group.push(store.currentGroup)\n                } else {\n                    neededResources.group.push(store.group._id)\n                    for (let user of store.group.users) {\n                        if (!store.friendData[user]) {\n                            requestedResources.friendData.push(user)\n                        }\n                        neededResources.friendData.push(user)\n                    }\n                    for (let progress of store.group.progresses) {\n                        if (!store.progressData[progress]) {\n                            requestedResources.progressData.push(progress)\n                        }\n                        neededResources.progressData.push(progress)\n                    }\n                    for (let post of store.group.posts) {\n                        if (!store.postData[post]) {\n                            requestedResources.postData.push(post)\n                        }\n                        neededResources.postData.push(post)\n                    }\n                }\n            }\n            if (store.currentProgress) {\n                if (store.progress._id !== store.currentProgress) {\n                    requestedResources.progress.push(store.currentProgress)\n                } else {\n                    neededResources.progress.push(store.progress._id)\n                    let participants = []\n                    if (store.progress.owner)\n                        participants.push(store.progress.owner)\n                    if (store.progress.worker)\n                        participants.push(store.progress.worker)\n                    participants = [\n                        ...participants,\n                        ...(store.progress.experts || []),\n                        ...(store.progress.supporters || []),\n                    ]\n                    for (let friend of participants) {\n                        if (!store.friendData[friend]) {\n                            requestedResources.friendData.push(friend)\n                        }\n                        neededResources.friendData.push(friend)\n                    }\n                    for (let post of store.progress.posts) {\n                        if (!store.postData[post]) {\n                            requestedResources.postData.push(post)\n                        }\n                        neededResources.postData.push(post)\n                    }\n                }\n            }\n            if (store.currentPosts) {\n                for (let post of store.currentPosts) {\n                    const postEl = store.post[post]\n                    if (!postEl) {\n                        requestedResources.post.push(post)\n                    } else {\n                        neededResources.post.push(post)\n                        for (let friend of postEl.users) {\n                            if (!store.friendData[friend]) {\n                                requestedResources.friendData.push(friend)\n                            }\n                            neededResources.friendData.push(friend)\n                        }\n                        if (post.parent) {\n                            if (post.parent.parentType === 'progress')\n                                neededResources.progressData.push(\n                                    post.parent.parentId\n                                )\n                            else if (post.parent.parentType === 'group')\n                                neededResources.groupData.push(\n                                    post.parent.parentId\n                                )\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    const reduce = obj => {\n        for (let attr in obj) {\n            if (obj[attr]) {\n                obj[attr] = Array.from(new Set(obj[attr]))\n            }\n        }\n    }\n\n    reduce(neededResources)\n    const notNeededResources = createEmptyObj()\n    notNeededResources.profile = []\n    let notNeededExist\n    const check1 = (key, mode) => {\n        if (\n            store[mode]._id &&\n            !neededResources[key].includes(store[mode]._id)\n        ) {\n            notNeededResources[mode].push(store[mode]._id)\n            notNeededExist = true\n        }\n    }\n    const check2 = key => {\n        for (let attr in store[key]) {\n            if (!neededResources[key].includes(attr)) {\n                notNeededResources[key].push(attr)\n                notNeededExist = true\n            }\n        }\n    }\n    check1('account', 'account')\n    check1('account', 'profile')\n    check1('group', 'group')\n    check1('progress', 'progress')\n    check2('post')\n    check2('friendData')\n    check2('progressData')\n    check2('transactionData')\n    check2('postData')\n    check2('groupData')\n\n    if (notNeededExist) {\n        props.removeData(notNeededResources)\n    }\n\n    reduce(requestedResources)\n\n    return requestedResources\n}\n","import requestResource from './requestResource'\n\nexport default (versions, state, store, webSocket) => {\n    const notNeededResources = {\n        user: [],\n        account: [],\n        progress: [],\n        post: [],\n        group: [],\n        progressData: [],\n        friendData: [],\n        postData: [],\n        groupData: [],\n        transactionData: [],\n    }\n\n    const checkData = key => {\n        for (let attr in versions[key]) {\n            if (typeof versions[key][attr] !== 'undefined') {\n                if (store[key][attr]) {\n                    if (store[key][attr] !== versions[key][attr]) {\n                        requestResource(key, [attr], state)\n                    }\n                } else notNeededResources[key].push(attr)\n            }\n        }\n    }\n\n    const check = key => {\n        for (let attr in versions[key]) {\n            if (typeof versions[key][attr] !== 'undefined') {\n                if (store[key]._id === attr) {\n                    if (store[key].__v !== versions[key][attr]) {\n                        requestResource(key, [attr], state)\n                    }\n                    if (!store[key]._id) notNeededResources[key].push(attr)\n                } else notNeededResources[key].push(attr)\n            }\n        }\n    }\n\n    for (let attr in versions.user) {\n        if (typeof versions.user[attr] !== 'undefined') {\n            if (store.user._id === attr) {\n                if (store.user.__v !== versions.user[attr]) {\n                    requestResource('user', [attr], state)\n                }\n            } else notNeededResources.user.push(attr)\n        }\n    }\n\n    for (let attr in versions.account) {\n        if (typeof versions.account[attr] !== 'undefined') {\n            if (store.account._id === attr) {\n                if (store.account.__v !== versions.account[attr]) {\n                    requestResource('account', [attr], state)\n                }\n            }\n            if (store.profile._id === attr) {\n                if (store.profile.__v !== versions.account[attr]) {\n                    requestResource('account', [attr], state)\n                }\n                if (!store.account._id) notNeededResources.account.push(attr)\n            }\n        }\n        if (store.account._id !== attr && store.profile._id !== attr)\n            notNeededResources.account.push(attr)\n    }\n\n    check('progress')\n    check('group')\n\n    checkData('post')\n    checkData('friendData')\n    checkData('progressData')\n    checkData('postData')\n    checkData('groupData')\n    checkData('transactionData')\n\n    if (\n        notNeededResources.user.length > 0 ||\n        notNeededResources.account.length > 0 ||\n        notNeededResources.progress.length > 0 ||\n        notNeededResources.post.length > 0 ||\n        notNeededResources.group.length > 0 ||\n        notNeededResources.friendData.length > 0 ||\n        notNeededResources.progressData.length > 0 ||\n        notNeededResources.postData.length > 0 ||\n        notNeededResources.groupData.length > 0 ||\n        notNeededResources.transactionData.length > 0\n    ) {\n        return notNeededResources\n    }\n}\n","export default props => {\n    const { store } = props\n    const resources = {\n        user: {},\n        account: {},\n        progress: {},\n        post: {},\n        group: {},\n        transactionData: {},\n        friendData: {},\n        progressData: {},\n        groupData: {},\n        postData: {},\n    }\n\n    if (store.user && store.user._id) {\n        resources.user[store.user._id] = store.user.__v\n    }\n\n    if (store.account._id) {\n        resources.account[store.account._id] = store.account.__v\n    }\n    if (store.profile._id) {\n        resources.account[store.profile._id] = store.profile.__v\n    }\n    if (store.progress._id) {\n        resources.progress[store.progress._id] = store.progress.__v\n    }\n    if (store.group._id) {\n        resources.group[store.group._id] = store.group.__v\n    }\n\n    const addData = key => {\n        for (let item in store[key]) {\n            if (typeof store[key][item] !== 'undefined') {\n                if (store[key][item]._id) {\n                    resources[key][store[key][item]._id] = store[key][item].__v\n                }\n            }\n        }\n    }\n\n    addData('post')\n    addData('friendData')\n    addData('postData')\n    addData('groupData')\n    addData('progressData')\n    addData('TransactionData')\n\n    return resources\n}\n","import React, { Component } from 'react'\nimport axios from 'axios'\nimport { withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport * as actions from '../../store/actions'\nimport message from 'antd/es/message'\nimport * as wsActions from '../../websocketActions'\nimport cloneDeep from 'lodash.clonedeep'\nimport getListOfNeededResources from './methods/getListOfNeededResources'\nimport compareVersionsAndRerequest from './methods/compareVersionsAndRerequest'\nimport getResourcesToMonitor from './methods/getResourcesToMonitor'\nconst diffpatcher = require('jsondiffpatch/dist/jsondiffpatch.umd.js').create({\n    propertyFilter: (name, context) => name !== 'patch',\n})\n\nexport let webSocket = false\n\nclass ConnectWebsocket extends Component {\n    state = {\n        user: [],\n        account: [],\n        progress: [],\n        post: [],\n        group: [],\n        friendData: [],\n        progressData: [],\n        postData: [],\n        groupData: [],\n        transactionData: [],\n    }\n    start = () => {\n        let url\n        if (process.env.NODE_ENV === 'development') {\n            url = 'ws://my.websiter.test:5000'\n        } else {\n            url = 'wss://getreward.herokuapp.com'\n        }\n        let pingTimeout\n        webSocket = new WebSocket(url)\n\n        const heartbeat = versions => {\n            let notNeededResources\n            if (versions) {\n                notNeededResources = compareVersionsAndRerequest(\n                    versions,\n                    this.state,\n                    this.props.store,\n                    webSocket\n                )\n            }\n            clearTimeout(pingTimeout)\n\n            pingTimeout = setTimeout(() => {\n                webSocket.close()\n            }, 30000 + 1000)\n\n            webSocket.send(\n                JSON.stringify({\n                    messageCode: 'heartbeat',\n                    notNeededResources,\n                    //get back list of online friends\n                })\n            )\n        }\n\n        webSocket.onopen = event => {\n            const resourcesToMonitor = getResourcesToMonitor(this.props)\n            webSocket.send(\n                JSON.stringify({\n                    messageCode: 'auth',\n                    user: axios.defaults.headers.common['x-auth-token'],\n                    resourcesToMonitor,\n                    // progressId: this.props.progress._id,\n                })\n            )\n            this.initializeRequestResources(this.props)\n            heartbeat()\n        }\n\n        webSocket.onmessage = event => {\n            const news = JSON.parse(event.data)\n\n            switch (news.messageCode) {\n                case 'heartbeat':\n                    heartbeat(news.versions)\n                    break\n                case 'logout':\n                    this.props.logout()\n                    break\n\n                case 'successMessage':\n                    message.success(news.messageText)\n                    break\n                case 'errorMessage':\n                    message.error(news.messageText)\n                    break\n                case 'friendsData':\n                    this.props.setFriendsData(news.friendsData)\n                    break\n                case 'redirectToProgresses':\n                    this.props.history.push('/progresses')\n                    break\n                case 'addResource':\n                    this.props.saveResource(news.resources, news.type)\n                    break\n                case 'updateResource':\n                    this.props.updateResource(\n                        news.code,\n                        news.id,\n                        news.update,\n                        this.state\n                    )\n                    break\n                case 'friendSearchResult':\n                    this.props.setFriendSearchResult(news.data)\n                    break\n                // case 'update':\n                //     let newProgress\n                //     let oldProgress = cloneDeep(this.props.progress)\n                //     if (oldProgress.__v === news.progress.__v - 1) {\n                //         newProgress = diffpatcher.patch(\n                //             oldProgress,\n                //             news.progress.patch\n                //         )\n                //         newProgress.__v = news.progress.__v\n                //         this.props.setData(\n                //             {\n                //                 progress: newProgress,\n                //             },\n                //             this.props.history.location.pathname\n                //         )\n                //     }\n                //     wsActions.getFriendsData(\n                //         newProgress || this.props.progress,\n                //         this.props.account.friends\n                //     )\n                //     break\n                case 'error':\n                    message.error(news.text)\n                    break\n                // case 'notFoundResource':\n                //     this.markNotFoundResource(data)\n                //     break\n                default:\n                    break\n            }\n        }\n        webSocket.onclose = event => {\n            clearTimeout(pingTimeout)\n        }\n    }\n\n    // markNotFoundResource = data => {\n    //     const requestedResources = this.state.requestedResources.filter(\n    //         item => item.id.toString() === data._id.toString()\n    //     )\n    //     this.setState({ requestedResources })\n    // }\n\n    checkInterval = null\n\n    check = () => {\n        if (!webSocket || webSocket.readyState === 3) {\n            clearInterval(this.checkInterval)\n            this.checkInterval = setInterval(this.check, 5000)\n            this.start()\n        }\n    }\n    componentWillMount() {\n        this.checkInterval = setInterval(this.check, 50)\n    }\n\n    reRequestResourcesInterval = null\n    reRequestResources = () => {\n        for (let group of [\n            'user',\n            'account',\n            'progress',\n            'post',\n            'group',\n            'postData',\n            'groupData',\n            'progressData',\n            'friendData',\n            'transactionData',\n        ]) {\n            if (this.state[group].length > 0) {\n                if (webSocket && webSocket.readyState === 1) {\n                    webSocket.send(\n                        JSON.stringify({\n                            messageCode: 'requestResource',\n                            ids: this.state[group],\n                            type: group,\n                        })\n                    )\n                }\n            }\n        }\n    }\n\n    componentWillUnmount() {\n        clearInterval(this.checkInterval)\n        if (webSocket) {\n            webSocket.close()\n        }\n    }\n    // componentDidMount() {\n    //     console.log('didmount')\n    //     this.initializeRequestResources(this.props)\n    // }\n    componentWillReceiveProps(nextProps) {\n        this.initializeRequestResources(nextProps)\n    }\n\n    initializeRequestResources = nextProps => {\n        const newRequestedResources = getListOfNeededResources(nextProps)\n        for (let group of [\n            'user',\n            'account',\n            'progress',\n            'post',\n            'group',\n            'postData',\n            'groupData',\n            'progressData',\n            'friendData',\n            'transactionData',\n        ]) {\n            if (newRequestedResources[group].length > 0) {\n                if (webSocket && webSocket.readyState === 1) {\n                    console.log('init send')\n                    webSocket.send(\n                        JSON.stringify({\n                            messageCode: 'requestResource',\n                            ids: newRequestedResources[group].filter(\n                                item => !this.state[group].includes(item)\n                            ),\n                            type: group,\n                        })\n                    )\n                }\n            }\n        }\n        this.setState(() => newRequestedResources)\n        clearInterval(this.reRequestResourcesInterval)\n        this.reRequestResourcesInterval = setInterval(\n            this.reRequestResources,\n            3000\n        )\n    }\n\n    render() {\n        return null\n    }\n}\nconst mapStateToProps = state => {\n    return {\n        store: state,\n    }\n}\n\nconst mapDispatchToProps = (dispatch: any) => {\n    return {\n        setData: (data, pulledFrom) =>\n            dispatch(actions.setData(data, pulledFrom)),\n        removeData: data => dispatch(actions.removeData(data)),\n        saveResource: (data, type) =>\n            dispatch(actions.saveResource(data, type)),\n        setFriendsData: data => dispatch(actions.setFriendsData(data)),\n        tryAuth: (props, forceAuth) =>\n            dispatch(actions.tryAuth(props, forceAuth)),\n        updateResource: (code, id, update, state) =>\n            dispatch(actions.updateResource(code, id, update, state)),\n        setFriendSearchResult: data =>\n            dispatch(actions.setFriendSearchResult(data)),\n    }\n}\n\nexport default withRouter(\n    connect(\n        mapStateToProps,\n        mapDispatchToProps\n    )(ConnectWebsocket)\n)\n","import { setData } from './auth'\n\nexport const saveResource = (data, type) => (dispatch, getState) => {\n    if (data.length > 0) {\n        const state = getState()\n        switch (type) {\n            case 'user':\n                const user = data[0]\n                let currentAccount = user.currentAccount\n                if (!currentAccount) currentAccount = user.myAccount\n                // if(!currentAccount)\n                //activate-account\n                dispatch(setData({ user, currentAccount }))\n                break\n            case 'account':\n                const account = data.find(\n                    item => item._id === state.currentAccount\n                )\n                if (account) {\n                    dispatch(setData({ account }))\n                }\n\n                const profile = data.find(\n                    item => item._id === state.currentProfile\n                )\n                if (profile) {\n                    dispatch(setData({ profile }))\n                }\n\n                break\n            case 'progress':\n                const progress = data.find(\n                    item => item._id === state.currentProgress\n                )\n                if (progress) {\n                    dispatch(setData({ progress }))\n                }\n                break\n            case 'group':\n                const group = data.find(item => item._id === state.currentGroup)\n                if (group) {\n                    dispatch(setData({ group }))\n                }\n                break\n            case 'post':\n                let post = {}\n                for (let item of data) {\n                    post[item._id] = item\n                }\n                dispatch(setData({ post }))\n                break\n            case 'friendData':\n                let friendData = {}\n                for (let item of data) {\n                    friendData[item._id] = item\n                }\n                dispatch(setData({ friendData }))\n                break\n            case 'progressData':\n                let progressData = {}\n                for (let item of data) {\n                    progressData[item._id] = item\n                }\n                dispatch(setData({ progressData }))\n                break\n            case 'transactionData':\n                let transactionData = {}\n                for (let item of data) {\n                    transactionData[item._id] = item\n                }\n                dispatch(setData({ transactionData }))\n                break\n            case 'postData':\n                let postData = {}\n                for (let item of data) {\n                    postData[item._id] = item\n                }\n                dispatch(setData({ postData }))\n                break\n            case 'groupData':\n                let groupData = {}\n                for (let item of data) {\n                    groupData[item._id] = item\n                }\n                dispatch(setData({ groupData }))\n                break\n            default:\n                break\n        }\n    }\n}\n","import { webSocket } from '../ConnectWebsocket'\n\nexport default (type, ids, state) => {\n    const notRequestedIds = ids.filter(id => !state[type].includes(id))\n    if (webSocket && webSocket.readyState === 1) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'requestResource',\n                ids: notRequestedIds,\n                type,\n            })\n        )\n    }\n}\n","import requestResource from '../../containers/ConnectWebsocket/methods/requestResource'\nimport * as actions from './index'\nimport cloneDeep from 'lodash.clonedeep'\n\nconst applyDelta = (source, delta, watchFields) => {\n    // console.log('---------------------------APLY DELTA------------------------')\n    // console.log('----------------source----------------')\n    // console.log(source)\n    // console.log('----------------delta-------------------')\n    // console.log(delta)\n    const result = cloneDeep(source)\n\n    const applyUpdateToPart = (res, del, watchFields) => {\n        const applyWithDot = (res, keys, del) => {\n            if (keys.length > 1) {\n                const key = keys.shift()\n                applyWithDot(res[key], keys, del)\n            } else {\n                if (typeof res === 'array') {\n                    res.push(del)\n                } else {\n                    res[keys[0]] = del\n                }\n            }\n        }\n        for (let attr in del) {\n            const keys = attr.split('.')\n            if (!watchFields || watchFields.includes(keys[0])) {\n                if (typeof del[attr] !== 'undefined') {\n                    applyWithDot(res, keys, del[attr])\n                }\n            }\n        }\n    }\n\n    applyUpdateToPart(result, delta.updatedFields, watchFields)\n\n    const applyDeleteToPart = (result, keys) => {\n        if (keys.length > 1) {\n            const key = keys.shift()\n            applyDeleteToPart(result[key], keys)\n        } else {\n            if (typeof result === 'object') {\n                delete result[keys[0]]\n            } else if (typeof result === 'array') {\n                result.splice(keys[0], 1)\n            }\n        }\n    }\n\n    for (let field of delta.removedFields) {\n        if (field.indexOf('.') > -1) {\n            const keys = field.split('.')\n            if (!watchFields || watchFields.includes(keys[0]))\n                applyDeleteToPart(result, keys)\n        } else {\n            delete result[field]\n        }\n    }\n    return result\n}\n\nexport const updateResource = (code, id, update, parState) => (\n    dispatch,\n    getState\n) => {\n    if (update && id && code) {\n        const state = getState()\n        const check = key => {\n            if (state[key]._id === id) {\n                if (state[key].__v === update.updatedFields.__v - 1) {\n                    const element = applyDelta(state[key], update)\n                    dispatch(actions.setData({ [key]: element }))\n                } else {\n                    if (state[key].id) requestResource(code, [id], parState)\n                }\n            }\n        }\n        const check2 = (key, watchFields) => {\n            let updateData = {\n                [key]: cloneDeep(state[key]),\n            }\n            const friend = updateData[key][id]\n            if (friend) {\n                if (friend.__v === update.updatedFields.__v - 1) {\n                    updateData[key][id] = applyDelta(\n                        friend,\n                        update,\n                        watchFields\n                    )\n                    dispatch(actions.setData(updateData))\n                } else {\n                    requestResource(code, [id], parState)\n                }\n            }\n        }\n        switch (code) {\n            case 'user':\n                check('user')\n                break\n            case 'account':\n                check('account')\n                check('profile')\n                break\n            case 'progress':\n                check('progress')\n                break\n            case 'group':\n                check('group')\n                break\n            case 'post':\n                dispatch(actions.setData(check2(code)))\n                break\n            case 'friendData':\n                dispatch(\n                    actions.setData(\n                        check2(code, ['name', 'image', 'notifications', '__v'])\n                    )\n                )\n                break\n            case 'progressData':\n                dispatch(\n                    actions.setData(\n                        check2(code, [\n                            'owner',\n                            'worker',\n                            'goal',\n                            'notifications',\n                            '__v',\n                        ])\n                    )\n                )\n                break\n            case 'postData':\n                dispatch(\n                    actions.setData(check2(code, ['notifications', '__v']))\n                )\n                break\n            case 'groupData':\n                dispatch(\n                    actions.setData(check2(code, ['notifications', '__v']))\n                )\n                break\n            case 'transactionData':\n                dispatch(actions.setData(check2(code)))\n                break\n            default:\n                break\n        }\n    }\n}\n","import axios from 'axios'\nimport message from 'antd/es/message'\n\nexport const uploadFile = (file, size, filename, callback) => {\n    if (file == null) {\n        return alert('No file selected.')\n    }\n\n    const reader = new FileReader()\n    reader.onload = async event => {\n        resizeImageToSpecificSize(file, { width: size, height: size }, data => {\n            urltoFile(data, '/120').then(function(file) {\n                getSignedRequest(file, filename, callback)\n            })\n        })\n    }\n\n    reader.readAsArrayBuffer(file)\n}\n\nconst urltoFile = (url, filename, mimeType) => {\n    mimeType = mimeType || (url.match(/^data:([^;]+);/) || '')[1]\n    return fetch(url)\n        .then(function(res) {\n            return res.arrayBuffer()\n        })\n        .then(function(buf) {\n            return new File([buf], filename, { type: mimeType })\n        })\n}\n\nconst resizeImageToSpecificSize = (file, size, cb) => {\n    if (file) {\n        var reader = new FileReader()\n        reader.onload = function(event) {\n            resizeImageFromSrcToSpecificSize(event.target.result, size, cb)\n        }\n        reader.readAsDataURL(file)\n    }\n}\n\nconst resizeImageFromSrcToSpecificSize = (src, size, cb) => {\n    var data\n    var img = new Image()\n    img.onload = function() {\n        const widthCoef = img.width / size.width\n        const heightCoef = img.height / size.height\n        var oc = document.createElement('canvas'),\n            octx = oc.getContext('2d')\n        oc.width = img.width\n        oc.height = img.height\n        octx.drawImage(img, 0, 0)\n        if (widthCoef > 1 || heightCoef > 1) {\n            if (img.width > img.height) {\n                oc.height = (img.height / img.width) * size.width\n                oc.width = size.width\n            } else {\n                oc.width = (img.width / img.height) * size.width\n                oc.height = size.width\n            }\n        }\n        octx.drawImage(oc, 0, 0, oc.width, oc.height)\n        octx.drawImage(img, 0, 0, oc.width, oc.height)\n        data = oc.toDataURL()\n        cb(data)\n    }\n    img.src = src\n}\n\nconst getSignedRequest = (file, fileName, callback) => {\n    return axios\n        .post('/api/sign-s3', {\n            fileName,\n        })\n        .then(response => {\n            doUploadFile(file, response.data, callback)\n        })\n        .catch(err => {})\n}\n\nconst doUploadFile = (file, data, callback) => {\n    return axios\n        .put(data.signedRequest, file, {\n            headers: {\n                'Content-Type': 'multipart/form-data',\n            },\n        })\n        .then(response => {\n            callback(data.url)\n            message.success('The image has been saved.')\n        })\n        .catch(err => {\n            console.log(err)\n        })\n}\n","export default {\n    name: 200,\n    description: 10000,\n    message: 10000,\n}\n","import fieldLength from './fieldLength'\n\nexport const nicknameRules = [\n    {\n        required: true,\n        message: 'Nickname is too short. Minimal length is 2.',\n        whitespace: true,\n        min: 2,\n    },\n    {\n        message: `Nickname is too long. Miximum length is ${fieldLength.name}.`,\n        whitespace: true,\n        max: fieldLength.name,\n    },\n    {\n        pattern: /^[a-zA-Z0-9_-]*$/,\n        message: \"Nickname should contain only letters, numbers, '-' and '_'.\",\n    },\n]\n\nexport const nameRules = [\n    {\n        required: true,\n        min: 1,\n        whitespace: true,\n        message: 'Name is too short. Minimal length is 1.',\n    },\n    {\n        max: fieldLength.name,\n        message: `Name is too long. Miximum length is ${fieldLength.name}.`,\n    },\n]\n\nexport const accountNameRules = [\n    {\n        required: true,\n        min: 2,\n        whitespace: true,\n        message: 'Name is too short. Minimal length is 2.',\n    },\n    {\n        max: fieldLength.name,\n        message: `Name is too long. Miximum length is ${fieldLength.name}.`,\n    },\n]\n\nexport const descriptionRules = [\n    {\n        max: fieldLength.description,\n        message: `Description is too long. Miximum length is ${\n            fieldLength.description\n        }.`,\n    },\n]\n\nexport const messageRules = [\n    {\n        min: 1,\n        whitespace: true,\n        message: 'Message is too short. Minimal length is 1.',\n    },\n    {\n        max: fieldLength.message,\n        message: `Message is too long. Miximum length is ${\n            fieldLength.message\n        }.`,\n    },\n]\n\nexport const priceRules = [\n    {\n        required: true,\n        message: 'Please input the item price.',\n    },\n]\n","import React, { useState } from 'react'\nimport Modal from 'antd/es/modal'\n\nimport Button from 'antd/es/button'\nimport Input from 'antd/es/input'\nimport InputNumber from 'antd/es/input-number'\nimport Form from 'antd/es/form'\nimport Select from 'antd/es/select'\nimport Upload from 'antd/es/upload'\nimport PlusOutlined from '@ant-design/icons/PlusOutlined'\n\nimport Avatar from 'antd/es/avatar'\nimport Popconfirm from 'antd/es/popconfirm'\nimport {\n    nameRules,\n    descriptionRules,\n    priceRules,\n} from '../../constants/fieldRules'\nimport getAvatar from '../../utils/getAvatar'\n\nconst AddPerkForm = props => {\n    const [previewImage, setPreviewImage] = useState('')\n    const {\n        connections,\n        perkId,\n        perk,\n        deletePerk,\n        onFinish,\n        images,\n        setImages,\n        uploadImage,\n    } = props\n\n    const layout = {\n        labelCol: { span: 8 },\n        wrapperCol: { span: 16 },\n    }\n    const tailLayout = {\n        wrapperCol: { offset: 8, span: 16 },\n    }\n\n    const connectionsSelect = (\n        <Select\n            mode=\"multiple\"\n            style={{ width: '100%' }}\n            placeholder=\"Please select\"\n        >\n            {connections.map(item => (\n                <Select.Option key={item._id}>\n                    <Avatar\n                        src={getAvatar(item._id, item.image)}\n                        size={20}\n                        style={{ marginRight: '10px' }}\n                    />\n                    {item.name} - ({item._id})\n                </Select.Option>\n            ))}\n        </Select>\n    )\n    const [form] = Form.useForm()\n\n    const normFile = e => {\n        if (Array.isArray(e)) {\n            return e\n        }\n        return e && e.fileList.map(image => image.url)\n    }\n\n    return !props.perkId || perk ? (\n        <>\n            <Form\n                form={form}\n                name=\"dynamic_form_nest_item\"\n                onFinish={onFinish}\n                autoComplete=\"off\"\n                initialValues={perk || {}}\n                {...layout}\n            >\n                <Form.Item\n                    name=\"images\"\n                    label=\"Images\"\n                    valuePropName=\"images\"\n                    getValueFromEvent={normFile}\n                >\n                    <Upload\n                        listType=\"picture-card\"\n                        fileList={images.map((image, index) => ({\n                            ...image,\n                            uid: index,\n                        }))}\n                        onPreview={file => {\n                            setPreviewImage(file.url)\n                        }}\n                        onChange={({ fileList }) => setImages(fileList)}\n                        customRequest={({ file }) => {\n                            uploadImage(file)\n                        }}\n                    >\n                        {images.length >= 8 ? null : (\n                            <div>\n                                <PlusOutlined />\n                                <div className=\"ant-upload-text\">Upload</div>\n                            </div>\n                        )}\n                    </Upload>\n                </Form.Item>\n                <Form.Item label=\"Name\" name=\"name\" rules={nameRules}>\n                    <Input placeholder=\"New item\" />\n                </Form.Item>\n                <Form.Item\n                    label=\"Description\"\n                    name=\"description\"\n                    rules={descriptionRules}\n                >\n                    <Input.TextArea placeholder=\"Write a few words about this item.\" />\n                </Form.Item>\n\n                {props.mode === 'shop' && (\n                    <Form.Item label=\"Available for\" name=\"users\">\n                        {connectionsSelect}\n                    </Form.Item>\n                )}\n\n                {props.mode === 'shop' && (\n                    <Form.Item label=\"Price\" name=\"price\" rules={priceRules}>\n                        <InputNumber />\n                    </Form.Item>\n                )}\n\n                <Form.Item {...tailLayout}>\n                    <Button type=\"primary\" htmlType=\"submit\" size=\"large\">\n                        Save\n                    </Button>\n\n                    {perkId && (\n                        <Popconfirm\n                            title=\"Are you sure you want to delete this item?\"\n                            onConfirm={deletePerk}\n                            onCancel={() => {}}\n                            okText=\"Confirm\"\n                            cancelText=\"Cancel\"\n                        >\n                            <Button type=\"link\" danger size=\"large\">\n                                Delete\n                            </Button>\n                        </Popconfirm>\n                    )}\n                </Form.Item>\n            </Form>\n            <Modal\n                visible={previewImage}\n                footer={null}\n                onCancel={() => setPreviewImage('')}\n            >\n                <img\n                    alt=\"example\"\n                    style={{ width: '100%' }}\n                    src={previewImage}\n                />\n            </Modal>\n        </>\n    ) : null\n}\n\nexport default AddPerkForm\n","import { webSocket } from '../containers/ConnectWebsocket/ConnectWebsocket'\n\nexport const sendMessage = (\n    accountId,\n    postId,\n    messageValue,\n    imageUrl,\n    replyToMessage,\n    editedMessage\n) => {\n    if (webSocket && webSocket.readyState === 1) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'sendMessage',\n                messageValue,\n                imageUrl,\n                postId,\n                accountId,\n                replyToMessage,\n                editedMessage,\n            })\n        )\n    }\n}\n\nexport const changeLikesMessage = (\n    messageCode,\n    messageId,\n    accountId,\n    postId\n) => {\n    if (webSocket && webSocket.readyState === 1) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode,\n                messageId,\n                accountId,\n                postId,\n            })\n        )\n    }\n}\n\nexport const addPost = (\n    accountId,\n    parentId,\n    parentType,\n    messageValue,\n    imageUrl?\n) => {\n    if (webSocket && webSocket.readyState === 1) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'addPost',\n                accountId,\n                parentId,\n                parentType,\n                messageValue,\n                imageUrl,\n            })\n        )\n    }\n}\n","import { webSocket } from '../containers/ConnectWebsocket/ConnectWebsocket'\n\nexport const savePerk = (accountId, id, value, mode) => {\n    if (accountId && webSocket && webSocket.readyState === 1) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode:\n                    mode === 'wishlist'\n                        ? 'saveWishlistItem'\n                        : mode === 'goals'\n                        ? 'saveGoal'\n                        : 'savePerk',\n                id,\n                value,\n                accountId,\n            })\n        )\n    }\n}\n\nexport const deletePerk = (accountId, id, mode) => {\n    if (accountId && id && webSocket && webSocket.readyState === 1) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode:\n                    mode === 'wishlist'\n                        ? 'deleteWishlistItem'\n                        : mode === 'goals'\n                        ? 'deleteGoal'\n                        : 'deletePerk',\n                id,\n                accountId,\n            })\n        )\n    }\n}\n\nexport const buyPerk = (buyer, seller, perkId) => {\n    if (perkId && buyer && seller && webSocket && webSocket.readyState === 1) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: mode === 'buyPerk',\n                perkId,\n                buyer,\n                seller,\n            })\n        )\n    }\n}\n","import { webSocket } from '../containers/ConnectWebsocket/ConnectWebsocket'\n\nexport const searchFriends = search => {\n    if (webSocket && webSocket.readyState === 1) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'searchFriends',\n                search,\n            })\n        )\n    }\n}\n\nexport const addFriend = (accountId, friendId) => {\n    if (webSocket && webSocket.readyState === 1) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'addFriend',\n                accountId,\n                friendId,\n            })\n        )\n    }\n}\n\nexport const acceptFriend = (accountId, friendId) => {\n    if (webSocket && webSocket.readyState === 1) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'acceptFriend',\n                accountId,\n                friendId,\n            })\n        )\n    }\n}\n\nexport const unfriend = (accountId, friendId) => {\n    if (webSocket && webSocket.readyState === 1) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'unfriend',\n                accountId,\n                friendId,\n            })\n        )\n    }\n}\n","import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { uploadFile } from '../../utils/uploadFile'\nimport AddPerkForm from './AddPerkForm'\nimport { withRouter } from 'react-router-dom'\nimport * as wsActions from '../../websocketActions'\n\nconst AddPerk = props => {\n    const [perk, setPerk] = useState()\n    const [images, setImages] = useState([])\n    const { account, mode } = props\n    const perkId = props.perkId || ''\n    useEffect(() => {\n        if (perkId) {\n            const perk =\n                mode === 'wishlist'\n                    ? account.wishlist.find(item => item.itemId === perkId)\n                    : mode === 'goals'\n                    ? account.goals.find(item => item.goalId === perkId)\n                    : account.perks.find(item => item.perkId === perkId)\n            if (perk) {\n                setPerk(perk)\n                setImages(\n                    perk.images.map((url, index) => ({\n                        url,\n                        uid: index,\n                    }))\n                )\n            }\n        }\n    }, [])\n\n    const connections = account.friends\n        .filter(friend => friend.status === 'friend')\n        .map(friend => props.friendData[friend.friend])\n\n    const uploadImage = file => {\n        uploadFile(file, 800, undefined, url => {\n            setImages(\n                [...images, { url }].map((image, index) => ({\n                    ...image,\n                    uid: index,\n                }))\n            )\n        })\n    }\n\n    return !props.perkId || perk ? (\n        <AddPerkForm\n            connections={connections}\n            perkId={perkId}\n            perk={perk}\n            deletePerk={() => {\n                wsActions.deletePerk(account._id, perkId, mode)\n                props.setEditPerkOpen(false)\n            }}\n            onFinish={value => {\n                const processedValue = {\n                    ...value,\n                    images: images.map(image => image.url),\n                }\n                wsActions.savePerk(account._id, perkId, processedValue, mode)\n                props.setEditPerkOpen(false)\n            }}\n            images={images}\n            setImages={setImages}\n            uploadImage={uploadImage}\n            mode={props.mode}\n        />\n    ) : null\n}\nconst mapStateToProps = state => {\n    return {\n        account: state.account,\n        friendData: state.friendData,\n    }\n}\nexport default withRouter(connect(mapStateToProps)(AddPerk))\n","import React from 'react'\nimport Carousel from 'antd/es/carousel'\n\nconst ImageCarousel = props =>\n    props.images && props.images.length > 0 ? (\n        <Carousel style={{ width: props.size || 'auto' }}>\n            {props.images.map(\n                image =>\n                    image && (\n                        <div>\n                            <div\n                                style={{\n                                    backgroundImage: 'url(\"' + image + '\")',\n                                    backgroundSize: props.type || 'contain',\n                                    backgroundPosition: 'center',\n                                    width: props.size || '100%',\n                                    height:\n                                        props.height || props.size || '300px',\n                                    backgroundRepeat: 'no-repeat',\n                                }}\n                            />\n                        </div>\n                    )\n            )}\n        </Carousel>\n    ) : null\n\nexport default ImageCarousel\n","import React from 'react'\nimport Card from 'antd/es/card'\nimport { withRouter } from 'react-router-dom'\n\nimport EditFilled from '@ant-design/icons/EditFilled'\nimport Tooltip from 'antd/es/tooltip'\nimport DollarCircleOutlined from '@ant-design/icons/DollarCircleOutlined'\nimport * as wsActions from '../../websocketActions'\nimport Carousel from 'antd/es/carousel'\nimport ImageCarousel from '../../components/UI/ImageCarousel/ImageCarousel'\nimport Dropdown from 'antd/es/dropdown'\nimport Menu from 'antd/es/menu'\nimport Button from 'antd/es/button'\nimport { EllipsisOutlined } from '@ant-design/icons'\nconst { Meta } = Card\n\nconst PerkCard = props => {\n    const {\n        perk,\n        perkId,\n        owner,\n        account,\n        setEditedPerk,\n        setEditPerkOpen,\n        mode,\n    } = props\n\n    return (\n        <Card\n            type=\"inner\"\n            style={{ width: '100%' }}\n            bordered={false}\n            extra={\n                <div onClick={e => e.stopPropagation()}>\n                    {owner._id === account._id &&\n                    !props.onlyBuy &&\n                    props.mode === 'shop' ? (\n                        <Dropdown.Button\n                            type=\"primary\"\n                            key=\"1\"\n                            onClick={() =>\n                                wsActions.buyPerk(\n                                    account._id,\n                                    owner._id,\n                                    perkId\n                                )\n                            }\n                            overlay={\n                                <Menu>\n                                    <Menu.Item\n                                        key=\"0\"\n                                        onClick={() => {\n                                            setEditedPerk(perkId)\n                                            setEditPerkOpen(true)\n                                        }}\n                                    >\n                                        Edit\n                                    </Menu.Item>\n                                </Menu>\n                            }\n                        >\n                            Buy\n                        </Dropdown.Button>\n                    ) : props.mode === 'shop' ? (\n                        <Button\n                            type=\"primary\"\n                            onClick={() =>\n                                wsActions.buyPerk(\n                                    account._id,\n                                    owner._id,\n                                    perkId\n                                )\n                            }\n                        >\n                            Buy\n                        </Button>\n                    ) : owner._id === account._id && !props.onlyBuy ? (\n                        <Dropdown\n                            overlay={\n                                <Menu>\n                                    <Menu.Item\n                                        key=\"0\"\n                                        onClick={() => {\n                                            setEditedPerk(perkId)\n                                            setEditPerkOpen(true)\n                                        }}\n                                    >\n                                        Edit\n                                    </Menu.Item>\n                                </Menu>\n                            }\n                        >\n                            <Button type=\"link\">\n                                <EllipsisOutlined />\n                            </Button>\n                        </Dropdown>\n                    ) : null}\n                </div>\n            }\n            title={\n                <div\n                    onClick={() =>\n                        props.history.push(\n                            `/${mode || 'shop'}/${owner._id}/${perkId}`\n                        )\n                    }\n                    style={{\n                        display: 'flex',\n                        alignItems: 'center',\n                    }}\n                >\n                    <div style={{ width: '50px', marginRight: '20px' }}>\n                        <ImageCarousel images={perk.images} size={50} />\n                    </div>\n                    {perk.name}\n                    {mode === 'shop' && ` ($${perk.price})`}\n                </div>\n            }\n        />\n    )\n}\n\nexport default withRouter(PerkCard)\n","import React from 'react'\nimport Button from 'antd/es/button'\nimport { PlusOutlined } from '@ant-design/icons'\n\nconst AddCard = props => (\n    <Button\n        onClick={props.action}\n        type=\"primary\"\n        shape=\"round\"\n        icon={<PlusOutlined />}\n        size=\"large\"\n    >\n        {props.title}\n    </Button>\n)\n\nexport default AddCard\n","import React, { useState } from 'react'\nimport Modal from 'antd/es/modal'\nimport Button from 'antd/es/button'\nimport AddPerk from './AddPerk'\nimport PerkCard from './PerkCard'\nimport AddCard from '../../components/AddCard/AddCard'\n\nconst WishlistAndPerks = props => {\n    const [editedPerk, setEditedPerk] = useState('')\n    const [editPerkOpen, setEditPerkOpen] = useState()\n\n    const { account } = props\n\n    const editPerk = (\n        <Modal\n            title=\"Add item\"\n            visible={editPerkOpen}\n            maskClosable\n            closable\n            onCancel={() => setEditPerkOpen(false)}\n            width=\"90%\"\n            footer={\n                <Button key=\"back\" onClick={() => setEditPerkOpen(false)}>\n                    Close\n                </Button>\n            }\n            destroyOnClose={true}\n        >\n            <AddPerk\n                setEditPerkOpen={setEditPerkOpen}\n                perkId={editedPerk}\n                mode={props.mode}\n            />\n        </Modal>\n    )\n\n    return account._id ? (\n        <>\n            <AddCard\n                action={() => {\n                    setEditedPerk('')\n                    setEditPerkOpen(true)\n                }}\n                title=\"Add item\"\n                sub={props.mode === 'shop' && 'Set price'}\n            />\n\n            {account[props.listKey || props.mode] &&\n                account[props.listKey || props.mode].map((perk, index) => (\n                    <PerkCard\n                        key={index}\n                        perk={perk}\n                        perkId={\n                            props.mode === 'wishlist' || props.mode === 'goals'\n                                ? perk.itemId\n                                : perk.perkId\n                        }\n                        owner={account}\n                        account={account}\n                        setEditedPerk={setEditedPerk}\n                        setEditPerkOpen={setEditPerkOpen}\n                        mode={props.mode}\n                    />\n                ))}\n            {editPerk}\n        </>\n    ) : null\n}\n\nexport default WishlistAndPerks\n","import React, { useEffect } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport * as actions from '../../store/actions'\nimport WishlistAndPerks from '../Shop/WishlistAndPerks'\n\nconst Goals = props => {\n    useEffect(() => {\n        props.setPageTitle({ main: 'Goals', sub: '' })\n    }, [])\n\n    return props.account._id ? (\n        <WishlistAndPerks mode=\"goals\" account={props.account} />\n    ) : (\n        <span />\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        account: state.account,\n    }\n}\n\nconst mapDispatchToProps = (dispatch: any) => {\n    return {\n        setPageTitle: title => dispatch(actions.setPageTitle(title)),\n    }\n}\n\nexport default withRouter(\n    connect(\n        mapStateToProps,\n        mapDispatchToProps\n    )(Goals)\n)\n","import axios from 'axios'\nimport processRes from './processRes'\nexport default (props, data, setData, options, callback) => {\n    // if (typeof props.isAuthed === 'undefined') return\n    // options = {\n    //     forceAuth: true,\n    //     forceActivate: true,\n    //     pullData: true,\n    //     ...(options || {}),\n    // }\n\n    // if (!props.isAuthed) {\n    //     props.tryAuth(props, options.forceAuth)\n    // }\n\n    // if (options.pullData) {\n    console.log('reqas')\n    axios\n        .get('/api' + props.history.location.pathname)\n        .then(res => {\n            processRes(res, props)\n            // if (options.forceActivate) {\n            //     if (props.isAuthed && res.data.status === 'no account') {\n            //         props.history.push('/activate-account')\n            //     }\n            // }\n\n            setData(res.data)\n            callback(res.data)\n        })\n        .catch(err => {})\n    // }\n}\n","import React, { useState, useEffect } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport Button from 'antd/es/button'\nimport Comment from 'antd/es/comment'\nimport Avatar from 'antd/es/avatar'\nimport Input from 'antd/es/input'\nimport Form from 'antd/es/form'\nimport Upload from 'antd/es/upload'\nimport PictureOutlined from '@ant-design/icons/PictureOutlined'\nimport LoadingOutlined from '@ant-design/icons/LoadingOutlined'\nimport SendOutlined from '@ant-design/icons/SendOutlined'\nimport { uploadFile } from '../../utils/uploadFile'\nimport * as wsActions from '../../websocketActions'\nimport getAvatar from '../../utils/getAvatar'\nimport { messageRules } from '../../constants/fieldRules'\n\nconst AddMessage = props => {\n    const [imageLoading, setImageLoading] = useState(false)\n\n    const { post, account } = props\n\n    const [messageText, setMessageText] = useState(\n        props.content ||\n            (props.replyToUser ? '@' + props.replyToUser + ' ' : '')\n    )\n\n    useEffect(() => {\n        setMessageText(\n            props.content ||\n                (props.replyToUser ? '@' + props.replyToUser + ' ' : '')\n        )\n    }, [props.replyToUser, props.content])\n\n    return post && account._id ? (\n        <div\n            style={{\n                background: '#fff',\n\n                ...(props.replyTo\n                    ? {}\n                    : {\n                          width: '100%',\n                          bottom: '-200px',\n                          left: '0px',\n                          //   position: 'absolute',\n                      }),\n            }}\n        >\n            <Comment\n                avatar={<Avatar src={getAvatar(account._id, account.image)} />}\n                content={\n                    <>\n                        <Form.Item rules={messageRules} style={{ margin: 0 }}>\n                            <Input.TextArea\n                                autoSize={{\n                                    minRows: 1,\n                                    maxRows: 3,\n                                }}\n                                rows={1}\n                                onChange={e => setMessageText(e.target.value)}\n                                value={messageText}\n                                placeholder=\"Write a comment\"\n                            />\n                        </Form.Item>\n                        <Form.Item style={{ margin: 0 }}>\n                            <Button\n                                htmlType=\"submit\"\n                                onClick={() => {\n                                    wsActions.sendMessage(\n                                        account._id,\n                                        post._id,\n                                        messageText,\n                                        false,\n                                        props.replyTo,\n                                        props.editingMessage\n                                    )\n                                    setMessageText('')\n                                    if (props.onSend) props.onSend()\n                                }}\n                                icon={<SendOutlined />}\n                                size=\"large\"\n                                type=\"text\"\n                            >\n                                Send\n                            </Button>\n                            <Upload\n                                showUploadList={false}\n                                customRequest={({ file }) => {\n                                    setImageLoading(true)\n                                    uploadFile(file, 800, undefined, url => {\n                                        setImageLoading(false)\n                                        wsActions.sendMessage(\n                                            state,\n                                            props,\n                                            '',\n                                            url,\n                                            props.replyTo,\n                                            props.editingMessage\n                                        )\n                                        if (props.onSend) props.onSend()\n                                    })\n                                }}\n                            >\n                                <Button\n                                    size=\"large\"\n                                    type=\"text\"\n                                    icon={\n                                        imageLoading ? (\n                                            <LoadingOutlined />\n                                        ) : (\n                                            <PictureOutlined />\n                                        )\n                                    }\n                                >\n                                    Image\n                                </Button>\n                            </Upload>\n                        </Form.Item>\n                    </>\n                }\n            />\n        </div>\n    ) : null\n}\n\nexport default withRouter(AddMessage)\n","import React from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\n\nimport Button from 'antd/es/button'\nimport Avatar from 'antd/es/avatar'\nimport getAvatar from '../../utils/getAvatar'\n\nconst UserButton = props => {\n    const { account, profile, friendData, id } = props\n    const getUserData = id =>\n        id === account._id\n            ? account\n            : id === profile._id\n            ? profile\n            : friendData[id]\n    const userName = id => (getUserData(id) ? getUserData(id).name : id)\n    const userAvatar = id =>\n        getUserData(id) ? (\n            <span\n                onClick={e => {\n                    e.stopPropagation()\n                    props.history.push('/profile/' + id)\n                }}\n            >\n                <Avatar\n                    src={getAvatar(id, getUserData(id).image)}\n                    size={props.size || (props.noClick ? 20 : 30)}\n                    style={props.group ? {} : { margin: ' 0 5px' }}\n                />\n            </span>\n        ) : null\n    return props.group ? (\n        <Avatar.Group style={{ margin: ' 0 5px' }}>\n            {props.ids.map(id => userAvatar(id))}\n        </Avatar.Group>\n    ) : props.noClick ? (\n        <>\n            {!props.noAva && userAvatar(id)}\n            {!props.noName && userName(id)}\n        </>\n    ) : props.span ? (\n        <span\n            style={{ cursor: 'pointer', ...props.style }}\n            onClick={() => props.history.push('/profile/' + props.id)}\n        >\n            {!props.noAva && userAvatar(id)}\n            {!props.noName && userName(id)}\n        </span>\n    ) : (\n        <Button\n            type=\"link\"\n            style={{ padding: '0px 5px', height: 'auto', ...props.style }}\n            onClick={() => props.history.push('/profile/' + props.id)}\n        >\n            {!props.noAva && userAvatar(id)}\n            {!props.noName && userName(id)}\n        </Button>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        isAuthed: state.isAuthed,\n        account: state.account,\n        profile: state.profile,\n        friendData: state.friendData,\n    }\n}\n\nexport default withRouter(connect(mapStateToProps)(UserButton))\n","import React, { useState } from 'react'\nimport { withRouter } from 'react-router-dom'\n\nimport Comment from 'antd/es/comment'\n\nimport Tooltip from 'antd/es/tooltip'\nimport Avatar from 'antd/es/avatar'\nimport TimeAgo from 'timeago-react'\n\nimport * as wsActions from '../../websocketActions'\nimport LikeFilled from '@ant-design/icons/LikeFilled'\nimport LikeOutlined from '@ant-design/icons/LikeOutlined'\nimport Card from 'antd/es/card'\nimport Carousel from 'antd/es/carousel'\nimport AddMessage from './AddMessage'\nimport getAvatar from '../../utils/getAvatar'\nimport Button from 'antd/es/button'\nimport ImageCarousel from '../UI/ImageCarousel/ImageCarousel'\nimport UserButton from '../UserButton/UserButton'\n\nconst Message = props => {\n    const {\n        account,\n        state,\n        setState,\n        message,\n        friendData,\n        progressData,\n        groupData,\n        post,\n        replies,\n        isStart,\n    } = props\n    const [replyVisible, setReplyVisible] = useState(false)\n    const [replyToUser, setReplyToUser] = useState('')\n    const [editingMessage, setEditingMessage] = useState('')\n\n    const commentProps = {\n        actions: !props.isStart && [\n            <span>\n                <TimeAgo datetime={message.date} live />\n            </span>,\n            <span key=\"comment-basic-like\">\n                <Tooltip title=\"Like\">\n                    {message.likes.includes(account._id) ? (\n                        <LikeFilled\n                            onClick={() =>\n                                wsActions.changeLikesMessage(\n                                    'dislikeMessage',\n                                    message.messageId,\n                                    account._id,\n                                    post._id\n                                )\n                            }\n                        />\n                    ) : (\n                        <LikeOutlined\n                            onClick={() =>\n                                wsActions.changeLikesMessage(\n                                    'likeMessage',\n                                    message.messageId,\n                                    account._id,\n                                    post._id\n                                )\n                            }\n                        />\n                    )}\n                </Tooltip>\n                <span style={{ paddingLeft: '8px' }}>\n                    {message.likes.length}\n                </span>\n            </span>,\n\n            <span\n                key=\"comment-basic-reply-to\"\n                onClick={() => {\n                    if (props.setReplyVisible) {\n                        props.setReplyVisible(true)\n                        props.setReplyToUser(props.message.author)\n                    } else {\n                        setReplyVisible(true)\n                        setReplyToUser('')\n                    }\n                }}\n            >\n                Reply to\n            </span>,\n            <span\n                key=\"comment-basic-reply-to\"\n                onClick={() => setEditingMessage(message.messageId)}\n            >\n                Edit\n            </span>,\n        ],\n        avatar: (\n            <Avatar\n                src={getAvatar(\n                    message.author,\n                    friendData[message.author]\n                        ? friendData[message.author].image\n                        : Math.floor(Math.random() * 1000000)\n                )}\n            />\n        ),\n        content: isStart ? (\n            <>\n                {message.messageType === 'wishlist' && (\n                    <>\n                        {' '}\n                        <span\n                            style={{\n                                fontWeight: 'bold',\n                                cursor: 'pointer',\n                                margin: '10px 0px 0px ',\n                            }}\n                            onClick={() =>\n                                props.history.push(\n                                    `/wishlist/${message.details.owner}/${\n                                        message.details.itemId\n                                    }`\n                                )\n                            }\n                        >\n                            {message.details.name}\n                        </span>\n                    </>\n                )}\n                {message.text && <p>{message.text}</p>}\n            </>\n        ) : (\n            <>\n                <div\n                    style={{\n                        background: '#eee',\n                        borderRadius: '5px',\n                        padding: '3px 10px',\n                        display: 'inline-block',\n                    }}\n                >\n                    <UserButton\n                        id={message.author}\n                        span={true}\n                        noAva={true}\n                        style={{ fontWeight: 'bold' }}\n                    />\n                    {message.image && message.image.length > 0 && (\n                        <ImageCarousel images={message.image} />\n                    )}\n                    {message.text && <p>{message.text}</p>}\n                </div>\n                <div />\n            </>\n        ),\n        author: isStart && (\n            <span\n                style={{ color: '#333', fontWeight: 'bold', fontSize: '14px' }}\n            >\n                <UserButton id={message.author} span={true} noAva={true} />{' '}\n                &rArr;{' '}\n                {post.parent &&\n                    progressData &&\n                    progressData[post.parent.parentId] && (\n                        <span\n                            style={{ cursor: 'pointer' }}\n                            onClick={() =>\n                                props.history.push(\n                                    '/progresses/' + post.parent.parentId\n                                )\n                            }\n                        >\n                            {progressData[post.parent.parentId].goal.name}\n                        </span>\n                    )}\n                {post.startMessage &&\n                    ['wishlist', 'perk', 'goal'].includes(\n                        post.startMessage.messageType\n                    ) && (\n                        <span\n                            style={{ cursor: 'pointer' }}\n                            onClick={() =>\n                                props.history.push('/profile/' + message.author)\n                            }\n                        >\n                            {post.startMessage.messageType === 'wishlist'\n                                ? 'Wishlist'\n                                : post.startMessage.messageType === 'goals'\n                                ? 'Goals'\n                                : 'Shop'}\n                        </span>\n                    )}\n            </span>\n        ),\n        datetime: isStart && (\n            <span style={{ color: '#333' }}>\n                <TimeAgo datetime={message.date} live />\n            </span>\n        ),\n    }\n    return account && friendData ? (\n        account._id !== message.author || !editingMessage ? (\n            <Comment {...commentProps}>\n                {props.isTop && replies && replies.length\n                    ? replies.map((reply, index) => (\n                          <Message\n                              key={index}\n                              message={reply}\n                              post={post}\n                              account={account}\n                              friendData={friendData}\n                              setReplyVisible={setReplyVisible}\n                              setReplyToUser={setReplyToUser}\n                          />\n                      ))\n                    : null}\n\n                {props.isTop && replyVisible ? (\n                    <AddMessage\n                        post={post}\n                        account={account}\n                        replyTo={message.messageId}\n                        replyToUser={replyToUser}\n                    />\n                ) : null}\n            </Comment>\n        ) : (\n            <AddMessage\n                post={post}\n                account={account}\n                replyTo={message.messageId}\n                editingMessage={editingMessage}\n                content={message.text}\n                onSend={() => setEditingMessage('')}\n            />\n        )\n    ) : null\n}\n\nexport default withRouter(Message)\n","import React, { useState } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport * as wsActions from '../../websocketActions'\nimport Message from './Message'\nimport Tooltip from 'antd/es/tooltip'\nimport { LikeOutlined, LikeFilled } from '@ant-design/icons'\nimport AddMessage from './AddMessage'\nimport Divider from 'antd/es/divider'\nimport Button from 'antd/es/button'\nimport ImageCarousel from '../UI/ImageCarousel/ImageCarousel'\n\nconst Post = props => {\n    const { post, account, friendData, progressData, groupData } = props\n    const [postOpen, setPostOpen] = useState(props.showReplies)\n    const getNumberOfMessages = messages => {\n        let result = 0\n        for (let item of messages) {\n            result = result + 1 + item.replies.length\n        }\n        return result\n    }\n    return post ? (\n        <>\n            {!props.noStartMessage && (\n                <>\n                    <Message\n                        message={post.startMessage}\n                        post={post}\n                        account={account}\n                        friendData={friendData}\n                        progressData={progressData}\n                        groupData={groupData}\n                        replies={[]}\n                        isStart={true}\n                    />\n                    {post.startMessage.image &&\n                        post.startMessage.image.length > 0 && (\n                            <ImageCarousel\n                                images={post.startMessage.image}\n                                height=\"60vw\"\n                                type=\"cover\"\n                            />\n                        )}\n                </>\n            )}\n            <Divider type=\"horizontal\" style={{ margin: '5px 0' }} />\n\n            <div\n                style={{\n                    textAlign: 'left',\n                    // marginBottom: '200px',\n                    position: 'relative',\n                }}\n            >\n                <div\n                    style={{ display: 'flex', justifyContent: 'space-around' }}\n                >\n                    <span key=\"comment-basic-like\">\n                        {post.startMessage.likes.includes(account._id) ? (\n                            <LikeFilled\n                                onClick={() =>\n                                    wsActions.changeLikesMessage(\n                                        'dislikeMessage',\n                                        post.startMessage.messageId,\n                                        account._id,\n                                        post._id\n                                    )\n                                }\n                            />\n                        ) : (\n                            <LikeOutlined\n                                onClick={() =>\n                                    wsActions.changeLikesMessage(\n                                        'likeMessage',\n                                        post.startMessage.messageId,\n                                        account._id,\n                                        post._id\n                                    )\n                                }\n                            />\n                        )}\n\n                        <span style={{ paddingLeft: '8px' }}>\n                            {post.startMessage.likes.length}\n                        </span>\n                    </span>\n                    <span>\n                        <Button onClick={() => setPostOpen(true)} type=\"text\">\n                            Comment\n                            <span style={{ paddingLeft: '8px' }}>\n                                {getNumberOfMessages(post.messages)}\n                            </span>\n                        </Button>\n                    </span>\n                </div>\n                <Divider type=\"horizontal\" style={{ margin: '5px 0' }} />\n                {postOpen ? (\n                    <>\n                        <AddMessage post={post} account={account} />\n                        {post.messages && post.messages.length\n                            ? post.messages.map((message, index) => (\n                                  <Message\n                                      key={index}\n                                      message={message}\n                                      post={post}\n                                      account={account}\n                                      friendData={friendData}\n                                      replies={message.replies}\n                                      isTop={true}\n                                  />\n                              ))\n                            : null}\n                    </>\n                ) : (\n                    <Button onClick={() => setPostOpen(true)} type=\"text\">\n                        Show replies\n                    </Button>\n                )}\n            </div>\n        </>\n    ) : null\n}\n\nexport default withRouter(Post)\n","import React, { useEffect, useState } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport * as actions from '../../store/actions'\nimport Card from 'antd/es/card'\nimport pullData from '../../utils/pullData'\nimport Post from '../../components/Post/Post'\nimport UserButton from '../../components/UserButton/UserButton'\nimport ImageCarousel from '../../components/UI/ImageCarousel/ImageCarousel'\n\nconst Goal = props => {\n    const [data, setData] = useState({})\n    const { account } = props\n    useEffect(() => {\n        const pathParts = props.history.location.pathname.split('/')\n        if (pathParts.length > 3) {\n            const accountId = pathParts[2]\n            if (props.isAuthed && account._id === accountId) {\n                const goal = account.goals.find(\n                    item => item.itemId === pathParts[3]\n                )\n                setData({ profile: account, goal })\n            } else {\n                pullData(props, data, setData, { forceAuth: false }, data => {\n                    const friendData = {}\n                    for (let friend of data.friendData)\n                        friendData[friend._id] = friend\n\n                    props.setData({\n                        post: { [data.post._id]: data.post },\n                        friendData,\n                    })\n                })\n            }\n        }\n    }, [props.isAuthed])\n    if (!data.goal) return null\n    const { goal, profile } = data\n    props.setData({ currentPosts: goal.post })\n    if (goal) {\n        props.setPageTitle({ main: goal.name, sub: profile._id })\n    }\n    return goal ? (\n        <Card\n            title={\n                <span>\n                    Goal from <UserButton id={profile._id} /> goals\n                </span>\n            }\n            bordered={false}\n        >\n            <ImageCarousel images={goal.images} />\n\n            <h1>{goal.name}</h1>\n            <p style={{ whiteSpace: 'pre-wrap' }}>{goal.description}</p>\n            <Post\n                noStartMessage={true}\n                post={props.post[goal.post]}\n                account={props.account}\n                friendData={props.friendData}\n                showReplies={true}\n            />\n        </Card>\n    ) : null\n}\nconst mapStateToProps = state => {\n    return {\n        isAuthed: state.isAuthed,\n        account: state.account,\n        post: state.post,\n        friendData: state.friendData,\n    }\n}\n\nconst mapDispatchToProps = (dispatch: any) => {\n    return {\n        setData: data => {\n            dispatch(actions.setData(data))\n        },\n        setPageTitle: title => dispatch(actions.setPageTitle(title)),\n    }\n}\n\nexport default withRouter(\n    connect(\n        mapStateToProps,\n        mapDispatchToProps\n    )(Goal)\n)\n","import React from 'react'\nimport { withRouter } from 'react-router-dom'\n\nimport Card from 'antd/es/card'\nimport UserButton from '../../components/UserButton/UserButton'\n\nconst ProgressCard = props => {\n    const { progress } = props\n    const { goal } = progress\n    return (\n        <Card\n            type=\"inner\"\n            style={{ width: '100%' }}\n            bordered={false}\n            title={\n                <div\n                    onClick={() =>\n                        props.history.push('/progresses/' + progress._id)\n                    }\n                    style={{\n                        display: 'flex',\n                        alignItems: 'center',\n                    }}\n                >\n                    {goal.images.length > 0 && (\n                        <div style={{ width: '50px', marginRight: '20px' }}>\n                            <ImageCarousel images={goal.images} size={50} />\n                        </div>\n                    )}\n                    {goal.name} -{' '}\n                    <UserButton id={progress.owner} noName={true} /> =&gt;{' '}\n                    <UserButton ids={progress.goal.users} group={true} />\n                </div>\n            }\n        />\n    )\n}\n\nexport default withRouter(ProgressCard)\n","import React from 'react'\n\nimport Select from 'antd/es/select'\nimport UserButton from '../UserButton/UserButton'\n\nexport default (account, friendData, value?, onSelect?) => (\n    <Select\n        mode=\"multiple\"\n        style={{ width: '100%' }}\n        placeholder=\"Please select\"\n        value={value}\n        onChange={onSelect}\n    >\n        {[\n            account,\n            ...account.friends\n                .filter(friend => friend.status === 'friend')\n                .map(friend => friendData[friend.friend]),\n        ].map(item => (\n            <Select.Option key={item._id}>\n                <UserButton id={item._id} noClick={true} />\n            </Select.Option>\n        ))}\n    </Select>\n)\n","import React, { useState } from 'react'\nimport Modal from 'antd/es/modal'\nimport { withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport * as wsActions from '../../websocketActions'\nimport Button from 'antd/es/button'\nimport Input from 'antd/es/input'\nimport InputNumber from 'antd/es/input-number'\nimport Form from 'antd/es/form'\nimport Select from 'antd/es/select'\n\nimport Upload from 'antd/es/upload'\nimport Divider from 'antd/es/divider'\nimport PlusOutlined from '@ant-design/icons/PlusOutlined'\nimport DeleteOutlined from '@ant-design/icons/DeleteOutlined'\nimport EditOutlined from '@ant-design/icons/EditOutlined'\n\nimport { uploadFile } from '../../utils/uploadFile'\nimport {\n    descriptionRules,\n    nameRules,\n    priceRules,\n} from '../../constants/fieldRules'\nimport connectionsSelect from '../EditGoalAndProgressForm/connectionsSelect'\nimport Descriptions from 'antd/es/descriptions'\nimport Popconfirm from 'antd/es/popconfirm'\nimport UserButton from '../UserButton/UserButton'\nimport { EllipsisOutlined } from '@ant-design/icons'\nimport Dropdown from 'antd/es/dropdown'\nimport Menu from 'antd/es/menu'\n\nconst Rewards = props => {\n    const [previewImage, setPreviewImage] = useState('')\n    const [previewReward, setPreviewReward] = useState()\n    const [editedReward, setEditedReward] = useState()\n    const [editedRewardIndex, setEditedRewardIndex] = useState()\n    const { account, friendData, readOnly, progress } = props\n    const rewardsGI = props.rewards.findIndex(\n        item => item.key === props.rewardKey\n    )\n\n    if (rewardsGI === -1 && props.setRewards)\n        props.setRewards([\n            ...props.rewards,\n            {\n                key: props.rewardKey,\n                rewards: [],\n            },\n        ])\n\n    return rewardsGI >= 0 ? (\n        <div>\n            <Form.Item label={props.label} key={props.rewardKey}>\n                <ol>\n                    {props.rewards[rewardsGI].rewards.map((item, index) => {\n                        return (\n                            <li>\n                                <Button\n                                    type=\"link\"\n                                    onClick={() => setPreviewReward(item)}\n                                >\n                                    {item.mode === 'simple'\n                                        ? item.simple\n                                        : item.mode === 'money'\n                                        ? item.money + ' (money)'\n                                        : item.mode === 'item'\n                                        ? item.itemName\n                                        : ''}\n                                </Button>\n                                <UserButton id={item.owner} noName={true} />{' '}\n                                =&gt;\n                                <UserButton id={item.for} noName={true} />\n                                {item.owner === account._id && !readOnly && (\n                                    <>\n                                        <Dropdown\n                                            overlay={\n                                                <Menu>\n                                                    <Menu.Item\n                                                        onClick={() => {\n                                                            setEditedRewardIndex(\n                                                                index\n                                                            )\n                                                            setEditedReward(\n                                                                item\n                                                            )\n                                                        }}\n                                                    >\n                                                        Edit\n                                                    </Menu.Item>\n\n                                                    \n                                                        <Menu.Item\n                                                        onClick={() => {\n                                                            if(!window.confirm(\"Are you sure you want to delete this item?\")) return \n                                                            if (\n                                                                props.setRewards\n                                                            ) {\n                                                                const newRewards = [\n                                                                    ...props.rewards,\n                                                                ]\n                                                                newRewards[\n                                                                    rewardsGI\n                                                                ] = {\n                                                                    ...newRewards[\n                                                                        rewardsGI\n                                                                    ],\n                                                                    rewards: newRewards[\n                                                                        rewardsGI\n                                                                    ].rewards.filter(\n                                                                        (\n                                                                            item,\n                                                                            indexIn\n                                                                        ) =>\n                                                                            indexIn !==\n                                                                            index\n                                                                    ),\n                                                                }\n                                                                props.setRewards(\n                                                                    newRewards\n                                                                )\n                                                            } else {\n                                                                wsActions.deleteReward(\n                                                                    account._id,\n                                                                    progress._id,\n                                                                    props.rewardKey,\n                                                                    item.rewardId\n                                                                )\n                                                            }\n                                                        }}>\n                                                            Delete\n                                                        </Menu.Item>\n                                                </Menu>\n                                            }\n                                        >\n                                            <Button type=\"link\">\n                                                <EllipsisOutlined />\n                                            </Button>\n                                        </Dropdown>\n                                    </>\n                                )}\n                            </li>\n                        )\n                    })}\n                </ol>\n\n                {!readOnly && (\n                    <Button\n                        type=\"link\"\n                        onClick={() => {\n                            setEditedRewardIndex('new')\n                            setEditedReward({ mode: 'simple' })\n                        }}\n                    >\n                        <PlusOutlined />\n                        Add rewards\n                    </Button>\n                )}\n            </Form.Item>\n            <Modal\n                visible={editedReward}\n                title={\n                    editedReward === 'new' ? 'Add new reward' : 'Edit reward'\n                }\n                closable={true}\n                onCancel={() => setEditedReward()}\n                onOk={() => {\n                    let rewardToSave = {}\n                    if (editedReward.mode === 'money') {\n                        rewardToSave.money = editedReward.money\n                        rewardToSave.mode = editedReward.mode\n                        rewardToSave.for = editedReward.for\n                        rewardToSave.rewardId = editedReward.rewardId\n                    } else {\n                        rewardToSave = { ...editedReward, money: undefined }\n                    }\n                    rewardToSave.owner = account._id\n\n                    if (props.setRewards) {\n                        const newRewards = [...props.rewards]\n\n                        if (editedRewardIndex === 'new')\n                            newRewards[rewardsGI] = {\n                                ...newRewards[rewardsGI],\n                                rewards: [\n                                    ...newRewards[rewardsGI].rewards,\n                                    rewardToSave,\n                                ],\n                            }\n                        else\n                            newRewards[rewardsGI] = {\n                                ...newRewards[rewardsGI],\n                                rewards: newRewards[rewardsGI].rewards.map(\n                                    (item, index) => {\n                                        if (index === editedRewardIndex)\n                                            return rewardToSave\n                                        else return item\n                                    }\n                                ),\n                            }\n                        props.setRewards(newRewards)\n                        setEditedReward()\n                        setEditedRewardIndex()\n                    } else {\n                        wsActions.saveReward(\n                            account._id,\n                            progress._id,\n                            props.rewardKey,\n                            rewardToSave\n                        )\n                        setEditedReward()\n                        setEditedRewardIndex()\n                    }\n                }}\n                destroyOnClose={true}\n                okText=\"Save\"\n            >\n                {editedReward && (\n                    <>\n                        <Form.Item label=\"Reward type\">\n                            <Select\n                                placeholder=\"Type\"\n                                value={editedReward.mode}\n                                onSelect={value => {\n                                    setEditedReward({\n                                        ...editedReward,\n                                        mode: value,\n                                    })\n                                }}\n                                style={{ width: '100%' }}\n                            >\n                                <Select.Option key=\"simple\" value=\"simple\">\n                                    Simple reward\n                                </Select.Option>\n                                <Select.Option key=\"item\" value=\"item\">\n                                    Item reward\n                                </Select.Option>\n                                <Select.Option key=\"money\" value=\"money\">\n                                    Money reward\n                                </Select.Option>\n                            </Select>\n                        </Form.Item>\n                        <Form.Item label=\"Reward for\">\n                            {connectionsSelect(\n                                account,\n                                friendData,\n                                editedReward.for,\n                                value => {\n                                    setEditedReward({\n                                        ...editedReward,\n                                        for: value,\n                                    })\n                                }\n                            )}\n                            <p>(leave blank for all)</p>\n                        </Form.Item>\n                        <Divider type=\"horizontal\" />\n                        {editedReward.mode === 'simple' ? (\n                            <Form.Item\n                                label=\"Description\"\n                                rules={[\n                                    ...descriptionRules,\n                                    {\n                                        required: true,\n                                        min: 1,\n                                        whitespace: true,\n                                        message:\n                                            'Desription is too short. Minimal length is 1.',\n                                    },\n                                ]}\n                            >\n                                <Input.TextArea\n                                    value={editedReward.simple}\n                                    onChange={({ target: { value } }) =>\n                                        setEditedReward({\n                                            ...editedReward,\n                                            simple: value,\n                                        })\n                                    }\n                                    placeholder=\"Explain how you will reward\"\n                                />\n                            </Form.Item>\n                        ) : editedReward.mode === 'money' ? (\n                            <Form.Item label=\"Amount\" rules={priceRules}>\n                                <InputNumber\n                                    value={editedReward.money}\n                                    onChange={value => {\n                                        setEditedReward({\n                                            ...editedReward,\n                                            money: value,\n                                        })\n                                    }}\n                                />\n                            </Form.Item>\n                        ) : (\n                            <>\n                                <Form.Item label=\"Images\">\n                                    <Upload\n                                        listType=\"picture-card\"\n                                        fileList={(\n                                            editedReward.itemImages || []\n                                        ).map((url, index) => ({\n                                            url,\n                                            uid: index,\n                                        }))}\n                                        onPreview={file => {\n                                            setPreviewImage(file.url)\n                                        }}\n                                        onChange={({ fileList }) => {\n                                            setEditedReward({\n                                                ...editedReward,\n                                                itemImages: fileList.map(\n                                                    image => image.url\n                                                ),\n                                            })\n                                        }}\n                                        customRequest={({ file }) => {\n                                            uploadFile(\n                                                file,\n                                                800,\n                                                undefined,\n                                                url => {\n                                                    setEditedReward({\n                                                        ...editedReward,\n                                                        itemImages: [\n                                                            ...(editedReward.itemImages ||\n                                                                []),\n                                                            url,\n                                                        ],\n                                                    })\n                                                }\n                                            )\n                                        }}\n                                    >\n                                        {(editedReward.itemImages || [])\n                                            .length >= 8 ? null : (\n                                            <div>\n                                                <PlusOutlined />\n                                                <div className=\"ant-upload-text\">\n                                                    Upload\n                                                </div>\n                                            </div>\n                                        )}\n                                    </Upload>\n                                </Form.Item>\n                                <Form.Item label=\"Name\" rules={nameRules}>\n                                    <Input\n                                        value={editedReward.itemName}\n                                        onChange={({ target: { value } }) =>\n                                            setEditedReward({\n                                                ...editedReward,\n                                                itemName: value,\n                                            })\n                                        }\n                                    />\n                                </Form.Item>\n                                <Form.Item\n                                    label=\"Description\"\n                                    rules={descriptionRules}\n                                >\n                                    <Input.TextArea\n                                        value={editedReward.itemDescription}\n                                        onChange={({ target: { value } }) =>\n                                            setEditedReward({\n                                                ...editedReward,\n                                                itemDescription: value,\n                                            })\n                                        }\n                                    />\n                                </Form.Item>\n                            </>\n                        )}\n                    </>\n                )}\n            </Modal>\n            <Modal\n                visible={previewImage}\n                footer={null}\n                onCancel={() => setPreviewImage('')}\n            >\n                <img\n                    alt=\"example\"\n                    style={{ width: '100%' }}\n                    src={previewImage}\n                />\n            </Modal>\n            <Modal\n                visible={previewReward}\n                footer={null}\n                onCancel={() => setPreviewReward()}\n                title=\"Reward details\"\n            >\n                {previewReward ? (\n                    <>\n                        {previewReward.itemImages &&\n                            previewReward.itemImages.map((image, index) => (\n                                <span\n                                    key={index}\n                                    onClick={() => setPreviewImage(image)}\n                                >\n                                    <Card\n                                        type=\"inner\"\n                                        style={{\n                                            width: 200,\n                                            display: 'inline-block',\n                                        }}\n                                        hoverable\n                                        cover={\n                                            <div\n                                                style={{\n                                                    backgroundImage:\n                                                        'url(' + image + ')',\n                                                    height: 200,\n                                                    width: 200,\n                                                    backgroundSize: 'cover',\n                                                }}\n                                            />\n                                        }\n                                    />\n                                </span>\n                            ))}\n\n                        <Descriptions\n                            title=\"Reward description\"\n                            bordered\n                            column={{\n                                xxl: 4,\n                                xl: 3,\n                                lg: 3,\n                                md: 3,\n                                sm: 2,\n                                xs: 1,\n                            }}\n                        >\n                            {previewReward.mode === 'item' && (\n                                <Descriptions.Item label=\"Name\">\n                                    {previewReward.itemName}\n                                </Descriptions.Item>\n                            )}\n                            {previewReward.mode === 'item' && (\n                                <Descriptions.Item label=\"Description\">\n                                    {previewReward.itemDescription}\n                                </Descriptions.Item>\n                            )}\n                            {previewReward.mode === 'simple' && (\n                                <Descriptions.Item label=\"Description\">\n                                    {previewReward.simple}\n                                </Descriptions.Item>\n                            )}\n                            {previewReward.mode === 'money' && (\n                                <Descriptions.Item label=\"Money\">\n                                    {previewReward.money}\n                                </Descriptions.Item>\n                            )}\n                        </Descriptions>\n                    </>\n                ) : null}\n            </Modal>\n        </div>\n    ) : null\n}\n\nconst mapStateToProps = state => {\n    return {\n        isAuthed: state.isAuthed,\n        account: state.account,\n        friendData: state.friendData,\n        progress: state.progress,\n    }\n}\n\nexport default withRouter(connect(mapStateToProps)(Rewards))\n","import { webSocket } from '../containers/ConnectWebsocket/ConnectWebsocket'\n\nexport const changeStage = (data, value, milestoneId) => {\n    if (webSocket && webSocket.readyState === 1) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'changeStage',\n                milestoneId,\n                value,\n                progressId: data.progress._id,\n                accountId: data.account._id,\n            })\n        )\n    }\n}\n\nexport const leaveProgress = data => {\n    if (webSocket && webSocket.readyState === 1) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'leaveProgress',\n                progressId: data.progress._id,\n                accountId: data.account._id,\n            })\n        )\n    }\n}\n\nexport const createGroup = (accountId, progressId) => {\n    if (webSocket && webSocket.readyState === 1) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'createGroup',\n                progressId,\n                accountId,\n            })\n        )\n    }\n}\n\nexport const getFriendsData = (progress, accountFriends) => {\n    if (webSocket && webSocket.readyState === 1) {\n        if (progress) {\n            let accountIds = [\n                progress.owner,\n                progress.worker,\n                ...progress.goal.supporters,\n                ...progress.goal.experts,\n                ...accountFriends,\n            ]\n\n            accountIds = [...new Set(accountIds)]\n\n            webSocket.send(\n                JSON.stringify({\n                    messageCode: 'getFriendsData',\n                    accountIds,\n                })\n            )\n        }\n    }\n}\n\nexport const editGoalInProgress = (data, value) => {\n    if (webSocket && webSocket.readyState === 1) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'editGoalInProgress',\n                progressId: data.progress._id,\n                accountId: data.account._id,\n                value,\n            })\n        )\n    }\n}\n\nexport const startProgress = (accountId, value, inGroup) => {\n    if (webSocket && webSocket.readyState === 1) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'startProgress',\n                accountId,\n                value,\n                inGroup,\n            })\n        )\n    }\n}\n\nexport const deleteReward = (accountId, progressId, rewardKey, rewardId) => {\n    if (webSocket && webSocket.readyState === 1) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'deleteReward',\n                accountId,\n                progressId,\n                rewardKey,\n                rewardId,\n            })\n        )\n    }\n}\n\nexport const saveReward = (accountId, progressId, rewardKey, reward) => {\n    if (webSocket && webSocket.readyState === 1) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'saveReward',\n                accountId,\n                progressId,\n                rewardKey,\n                reward,\n            })\n        )\n    }\n}\n","import React, { useState } from 'react'\nimport Modal from 'antd/es/modal'\n\nimport Button from 'antd/es/button'\nimport Input from 'antd/es/input'\nimport Form from 'antd/es/form'\nimport Switch from 'antd/es/switch'\nimport Tabs from 'antd/es/tabs'\nimport Collapse from 'antd/es/collapse'\nimport Divider from 'antd/es/divider'\nimport Upload from 'antd/es/upload'\nimport PlusOutlined from '@ant-design/icons/PlusOutlined'\n\nimport { uploadFile } from '../../utils/uploadFile'\nimport Rewards from '../Rewards/Rewards'\nimport DraggableTabs from '../UI/DraggableTabs/DraggableTabs'\nimport { nameRules, descriptionRules } from '../../constants/fieldRules'\nimport connectionsSelect from './connectionsSelect'\nimport Dropdown from 'antd/es/dropdown/dropdown'\nimport { EllipsisOutlined } from '@ant-design/icons'\nimport Menu from 'antd/es/menu'\n\nconst EditGoalAndProgressForm = props => {\n    const { goal, account, friendData } = props\n\n    const [milestones, setMilestones] = useState(\n        (goal && goal.milestones) || [{ name: 'Milestone 1', key: 'mile1' }]\n    )\n\n    const [images, setImages] = useState(\n        (goal &&\n            goal.images.map((url, index) => ({\n                url,\n                uid: index,\n            }))) ||\n            []\n    )\n    const [withMilestones, setWithMilestones] = useState(\n        goal && goal.withMilestones\n    )\n    const [previewImage, setPreviewImage] = useState('')\n    const [newTabIndex, setNewTabIndex] = useState(\n        (goal && goal.newTabIndex) || 2\n    )\n\n    const [rewards, setRewards] = useState((goal && goal.rewardsGroups) || [])\n\n    const onFinish = value => {\n        const milestonesValues = []\n        for (let milestone of milestones) {\n            milestonesValues.push({\n                ...value[milestone.key],\n                key: milestone.key,\n                name: milestone.name,\n            })\n        }\n\n        props.onFinish({\n            ...value,\n            images: images.map(image => image.url),\n            milestones,\n            milestonesValues,\n            newTabIndex,\n            rewardsGroups: rewards,\n        })\n    }\n\n    const addMilestone = milestone => {\n        console.log(milestone)\n        const newPanes = [...milestones]\n        const newKey = `mile${newTabIndex}`\n        if (typeof milestone !== 'undefined') {\n            const indexOfMile = milestones.findIndex(\n                mile => mile.key === milestone\n            )\n            if (indexOfMile < 0) return\n            newPanes.splice(indexOfMile + 1, 0, {\n                key: newKey,\n                name: 'New milestone',\n            })\n        } else {\n            console.log('here')\n            newPanes.push({\n                key: newKey,\n                name: 'New milestone',\n            })\n        }\n        setMilestones(newPanes)\n        setNewTabIndex(newTabIndex + 1)\n        form.setFieldsValue({\n            [newKey]: { key: newKey, name: 'New milestone' },\n        })\n    }\n\n    const layout = {\n        labelCol: { span: 8 },\n        wrapperCol: { span: 16 },\n    }\n    const tailLayout = {\n        wrapperCol: { offset: 8, span: 16 },\n    }\n\n    const [form] = Form.useForm()\n\n    const normFile = e => {\n        if (Array.isArray(e)) {\n            return e\n        }\n        return e && e.fileList.map(image => image.url)\n    }\n\n    const connections = connectionsSelect(account, friendData)\n\n    const MilestoneControls = props => {\n        const moveMilestoneUp = () => {\n            const indexOfMile = milestones.findIndex(\n                mile => mile.key === props.milestone\n            )\n            if (indexOfMile <= 0) return\n            const newMilestones = [...milestones]\n            newMilestones.splice(\n                indexOfMile - 1,\n                0,\n                newMilestones.splice(indexOfMile, 1)[0]\n            )\n            setMilestones(newMilestones)\n        }\n\n        const moveMilestoneDown = () => {\n            const indexOfMile = milestones.findIndex(\n                mile => mile.key === props.milestone\n            )\n            if (indexOfMile < 0 || indexOfMile >= milestones.length - 1) return\n            const newMilestones = [...milestones]\n            newMilestones.splice(\n                indexOfMile + 1,\n                0,\n                newMilestones.splice(indexOfMile, 1)[0]\n            )\n            setMilestones(newMilestones)\n        }\n\n        const addMilestoneBelow = () => {\n            addMilestone(props.milestone)\n        }\n\n        const deleteMilestone = () => {\n            const newPanes = milestones.filter(\n                pane => pane.key !== props.milestone\n            )\n            setMilestones(newPanes)\n        }\n\n        return (\n            <Dropdown\n                overlay={\n                    <Menu\n                        onClick={({ domEvent }) => domEvent.stopPropagation()}\n                    >\n                        <Menu.Item key=\"0\" onClick={addMilestoneBelow}>\n                            Add a milestone below\n                        </Menu.Item>\n                        <Menu.Item key=\"1\" onClick={moveMilestoneUp}>\n                            Move up\n                        </Menu.Item>\n                        <Menu.Item key=\"2\" onClick={moveMilestoneDown}>\n                            Move down\n                        </Menu.Item>\n                        <Menu.Divider />\n                        <Menu.Item\n                            key=\"3\"\n                            danger={true}\n                            onClick={deleteMilestone}\n                        >\n                            Delete\n                        </Menu.Item>\n                    </Menu>\n                }\n                trigger={['click']}\n            >\n                <a\n                    className=\"ant-dropdown-link\"\n                    onClick={e => {\n                        e.preventDefault()\n                        e.stopPropagation()\n                    }}\n                >\n                    <EllipsisOutlined />\n                </a>\n            </Dropdown>\n        )\n    }\n    return !props.goalId || goal ? (\n        <>\n            <Form\n                form={form}\n                name=\"dynamic_form_nest_item\"\n                onFinish={onFinish}\n                autoComplete=\"off\"\n                initialValues={\n                    goal || {\n                        name: 'New goal',\n                        mile1: { name: 'Milestone 1', key: 'mile1' },\n                    }\n                }\n                {...layout}\n                onValuesChange={changedValues => {\n                    for (let attr in changedValues) {\n                        const index = milestones.findIndex(\n                            item => item.key === attr\n                        )\n\n                        if (index > -1) {\n                            if (changedValues[attr].name) {\n                                const newMilestones = [...milestones]\n                                newMilestones[index] = {\n                                    ...newMilestones[index],\n                                    name: changedValues[attr].name,\n                                }\n                                setMilestones(newMilestones)\n                            }\n                        }\n                        if (attr === 'withMilestones') {\n                            setWithMilestones(changedValues[attr])\n                        }\n                    }\n                }}\n            >\n                <Form.Item\n                    name=\"images\"\n                    label=\"Images\"\n                    valuePropName=\"images\"\n                    getValueFromEvent={normFile}\n                >\n                    <Upload\n                        listType=\"picture-card\"\n                        fileList={images.map((image, index) => ({\n                            ...image,\n                            uid: index,\n                        }))}\n                        onPreview={file => {\n                            setPreviewImage(file.url)\n                        }}\n                        onChange={({ fileList }) => setImages(fileList)}\n                        customRequest={({ file }) => {\n                            uploadFile(file, 800, undefined, url => {\n                                setImages(\n                                    [...images, { url }].map(\n                                        (image, index) => ({\n                                            ...image,\n                                            uid: index,\n                                        })\n                                    )\n                                )\n                            })\n                        }}\n                    >\n                        {images.length >= 8 ? null : (\n                            <div>\n                                <PlusOutlined />\n                                <div className=\"ant-upload-text\">Upload</div>\n                            </div>\n                        )}\n                    </Upload>\n                </Form.Item>\n                <Form.Item label=\"Name\" name=\"name\" rules={nameRules}>\n                    <Input />\n                </Form.Item>\n                <Form.Item\n                    label=\"Description\"\n                    name=\"description\"\n                    rules={descriptionRules}\n                >\n                    <Input.TextArea\n                        autoSize={{ minRows: 4, maxRows: 20 }}\n                        placeholder=\"Write a few words about why this goal is important and how to achieve it.\"\n                    />\n                </Form.Item>\n\n                <Form.Item label=\"Achievers\" name=\"users\">\n                    {connections}\n                </Form.Item>\n\n                <Form.Item label=\"Experts\" name=\"experts\">\n                    {connections}\n                </Form.Item>\n                <Form.Item label=\"Supporters\" name=\"supporters\">\n                    {connections}\n                </Form.Item>\n\n                <Rewards\n                    rewardKey=\"start\"\n                    label=\"Start rewards\"\n                    rewards={rewards}\n                    setRewards={setRewards}\n                />\n                <Rewards\n                    rewardKey=\"finish\"\n                    label=\"Finish rewards\"\n                    rewards={rewards}\n                    setRewards={setRewards}\n                />\n                <Form.Item\n                    label=\"Milestones\"\n                    name=\"withMilestones\"\n                    valuePropName=\"checked\"\n                >\n                    <Switch />\n                </Form.Item>\n\n                {withMilestones && (\n                    <>\n                        <Divider>Milestones</Divider>\n                        <Collapse expandIconPosition=\"right\">\n                            {milestones.map(milestone => (\n                                <Collapse.Panel\n                                    header={form.getFieldValue([\n                                        milestone.key,\n                                        'name',\n                                    ])}\n                                    key={milestone.key}\n                                    extra={\n                                        <MilestoneControls\n                                            milestone={milestone.key}\n                                        />\n                                    }\n                                >\n                                    <Form.Item\n                                        label=\"Name\"\n                                        name={[milestone.key, 'name']}\n                                        rules={nameRules}\n                                    >\n                                        <Input />\n                                    </Form.Item>\n                                    <Form.Item\n                                        label=\"Description\"\n                                        name={[milestone.key, 'description']}\n                                        rules={descriptionRules}\n                                    >\n                                        <Input.TextArea placeholder=\"Write a few words about why this milestone is important and how to achieve it.\" />\n                                    </Form.Item>\n                                    <Rewards\n                                        rewardKey={milestone.key}\n                                        label=\"Rewards\"\n                                        rewards={rewards}\n                                        setRewards={setRewards}\n                                    />\n                                </Collapse.Panel>\n                            ))}\n                        </Collapse>\n                        <Button type=\"link\" onClick={() => addMilestone()}>\n                            <PlusOutlined /> Add a new milestone\n                        </Button>\n                    </>\n                )}\n                <Form.Item {...tailLayout}>\n                    <Button type=\"primary\" htmlType=\"submit\" size=\"large\">\n                        Save\n                    </Button>\n                </Form.Item>\n            </Form>\n            <Modal\n                visible={previewImage}\n                footer={null}\n                onCancel={() => setPreviewImage('')}\n            >\n                <img\n                    alt=\"example\"\n                    style={{ width: '100%' }}\n                    src={previewImage}\n                />\n            </Modal>\n        </>\n    ) : null\n}\n\nexport default EditGoalAndProgressForm\n","import React from 'react'\nimport * as wsActions from '../../websocketActions'\n\nimport EditGoalAndProgressForm from '../../components/EditGoalAndProgressForm/EditGoalAndProgressForm'\n\nconst AddProgress = props =>\n    props.account._id ? (\n        <EditGoalAndProgressForm\n            onFinish={value => {\n                wsActions.startProgress(props.account._id, value, props.inGroup)\n                props.setStartProgressVisible(false)\n            }}\n            account={props.account}\n            friendData={props.friendData}\n        />\n    ) : null\n\nexport default AddProgress\n","import React from 'react'\nimport { withRouter } from 'react-router-dom'\n\nimport Card from 'antd/es/card'\n\nconst { Meta } = Card\n\nconst GroupCard = props => {\n    const { group } = props\n\n    return (\n        <div\n            style={{\n                display: 'inline-block',\n                margin: '4px 8px',\n            }}\n            onClick={() => props.history.push('/groups/' + group._id)}\n        >\n            <Card\n                type=\"inner\"\n                style={{\n                    width: 200,\n                }}\n                hoverable\n                cover={\n                    <div\n                        onClick={() =>\n                            props.history.push('/groups/' + group._id)\n                        }\n                        style={{\n                            backgroundImage:\n                                'url(' +\n                                (group.images &&\n                                    group.images.length > 0 &&\n                                    group.images[0]) +\n                                ')',\n                            height: 200,\n                            width: 200,\n                            backgroundSize: 'cover',\n                        }}\n                    />\n                }\n            >\n                <Meta title={group.name} />\n            </Card>\n        </div>\n    )\n}\n\nexport default withRouter(GroupCard)\n","import React, { useState } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport * as actions from '../../store/actions'\nimport Tabs from 'antd/es/tabs'\nimport Button from 'antd/es/button'\nimport Empty from 'antd/es/empty'\nimport ProgressCard from './ProgressCard'\nimport AddCard from '../../components/AddCard/AddCard'\nimport Modal from 'antd/es/modal/Modal'\nimport AddProgress from './AddProgress'\nimport GroupCard from './GroupCard'\n\nconst { TabPane } = Tabs\n\nconst Progresses = props => {\n    const { fromProfile, progressData, account, groupData, profile } = props\n\n    const { progresses, groups } = fromProfile ? profile : account\n    const [startProgressVisible, setStartProgressVisible] = useState(false)\n\n    props.setPageTitle({ main: 'Progresses', sub: '' })\n    let loadedProgresses, loadedGroups\n    if (progresses) {\n        loadedProgresses = progresses\n            .filter(item => progressData[item])\n            .map(item => progressData[item])\n        loadedGroups = groups\n            .filter(item => groupData[item] && groupData[item].active)\n            .map(item => groupData[item])\n    }\n\n    const editGoal = fromProfile ? null : (\n        <Modal\n            title=\"Add progress\"\n            visible={startProgressVisible}\n            maskClosable\n            closable\n            onCancel={() => setStartProgressVisible(false)}\n            width=\"90%\"\n            footer={\n                <Button\n                    key=\"back\"\n                    onClick={() => setStartProgressVisible(false)}\n                >\n                    Close\n                </Button>\n            }\n            destroyOnClose={true}\n        >\n            <AddProgress\n                setStartProgressVisible={setStartProgressVisible}\n                account={account}\n                friendData={props.friendData}\n            />\n        </Modal>\n    )\n\n    return loadedProgresses && loadedGroups ? (\n        <Tabs\n            style={{\n                background: 'transparent',\n                boxShadow: 'none',\n                margin: '0',\n                marginTop: '-15px',\n            }}\n        >\n            <TabPane tab=\"Progresses\" key=\"1\">\n                {!fromProfile && (\n                    <>\n                        <AddCard\n                            title=\"Start a new progress\"\n                            sub=\"Rich your goals or help others!\"\n                            action={() => {\n                                setStartProgressVisible(true)\n                            }}\n                        />\n                        {editGoal}\n                    </>\n                )}\n                {loadedProgresses.map((progress, index) => (\n                    <ProgressCard key={index} progress={progress} />\n                ))}\n            </TabPane>\n            <TabPane tab=\"Groups\" key=\"2\">\n                {loadedGroups.length > 0 ? (\n                    loadedGroups.map((group, index) => (\n                        <GroupCard key={index} group={group} />\n                    ))\n                ) : (\n                    <Empty\n                        imageStyle={{\n                            height: 160,\n                        }}\n                        description={\n                            <span>\n                                Here you will find your groups. Groups can be\n                                created in existing progresses.\n                            </span>\n                        }\n                    />\n                )}\n            </TabPane>\n        </Tabs>\n    ) : null\n\n    // ) : (\n    //     <Empty\n    //         imageStyle={{\n    //             height: 160,\n    //         }}\n    //         description={\n    //             <span>\n    //                 This user has no progresses. You can create a goal and\n    //                 invite this user.\n    //             </span>\n    //         }\n    //     />\n    // )\n}\n\nconst mapStateToProps = state => {\n    return {\n        account: state.account,\n        profile: state.profile,\n        isAuthed: state.isAuthed,\n        progressData: state.progressData,\n        groupData: state.groupData,\n        friendData: state.friendData,\n    }\n}\n\nconst mapDispatchToProps = (dispatch: any) => {\n    return {\n        setData: (data, pulledFrom) =>\n            dispatch(actions.setData(data, pulledFrom)),\n        setPageTitle: title => dispatch(actions.setPageTitle(title)),\n        tryAuth: (props, forceAuth) =>\n            dispatch(actions.tryAuth(props, forceAuth)),\n    }\n}\n\nexport default withRouter(\n    connect(\n        mapStateToProps,\n        mapDispatchToProps\n    )(Progresses)\n)\n","import React from 'react'\nimport Button from 'antd/es/button'\nimport Table from 'antd/es/table'\nimport Checkbox from 'antd/es/checkbox'\nimport Modal from 'antd/es/modal'\nimport Descriptions from 'antd/es/descriptions'\n\nimport * as wsActions from '../../websocketActions'\nimport Rewards from '../../components/Rewards/Rewards'\nimport UserButton from '../../components/UserButton/UserButton'\nconst { Item } = Descriptions\n\nconst ActivityTable = props => {\n    const { progress, account, state, setState } = props\n    const { goal } = progress\n    const { rewardsGroups } = goal\n\n    const renderCheckbox = ({ checked, milestoneId, disabled }) => (\n        <Checkbox\n            checked={checked}\n            onChange={e =>\n                wsActions.changeStage(props, e.target.checked, milestoneId)\n            }\n            disabled={disabled}\n        />\n    )\n\n    const columns = [\n        {\n            title: 'Milestone',\n            dataIndex: 'name',\n            key: 'name',\n            render: milestone => (\n                <Button\n                    type=\"link\"\n                    onClick={() =>\n                        setState({ ...state, previewMilestone: milestone })\n                    }\n                >\n                    {milestone.name}\n                </Button>\n            ),\n            fixed: 'left',\n        },\n        {\n            title: 'Rewards',\n            dataIndex: 'rewards',\n            key: 'rewards',\n            render: rewards => (\n                <Rewards\n                    rewardKey={rewards}\n                    rewards={rewardsGroups}\n                    readOnly={account._id ? false : true}\n                />\n            ),\n        },\n        {\n            title: 'Status',\n            dataIndex: 'status',\n            key: 'status',\n            render: status => (\n                <>\n                    <div>{status ? 'Paid:' : 'Not finished'}</div>\n                    {status && (\n                        <Rewards\n                            rewardKey={1}\n                            rewards={[{ rewards: status, key: 1 }]}\n                            readOnly={true}\n                        />\n                    )}\n                </>\n            ),\n        },\n        ...goal.users.map(user => ({\n            title: (\n                <>\n                    <UserButton id={user} noName={true} /> (ach)\n                </>\n            ),\n            dataIndex: user,\n            key: user,\n            render: renderCheckbox,\n            align: 'center',\n        })),\n        {\n            title: (\n                <>\n                    <UserButton id={progress.owner} noName={true} /> (own)\n                </>\n            ),\n            dataIndex: 'owner',\n            key: 'owner',\n            render: renderCheckbox,\n            align: 'center',\n        },\n        ...goal.experts.map(expert => ({\n            title: (\n                <>\n                    <UserButton id={expert} noName={true} /> (exp)\n                </>\n            ),\n            dataIndex: expert,\n            key: expert,\n            render: renderCheckbox,\n            align: 'center',\n        })),\n    ]\n\n    const getCheckboxStatus = (id, stage, milestone) => {\n        return {\n            checked: stage.approvedBy.find(item => item.accountId === id),\n            milestoneId: milestone.key,\n            disabled: id !== account._id,\n        }\n    }\n\n    const getMilestoneData = (milestone, index) => {\n        const stage = progress.stages.find(\n            stage => stage.milestoneId === milestone.key\n        ) || { approvedBy: [] }\n\n        const experts = {}\n        for (let expert of goal.experts) {\n            experts[expert] = getCheckboxStatus(expert, stage, milestone)\n        }\n\n        const users = {}\n        for (let user of goal.users) {\n            users[user] = getCheckboxStatus(user, stage, milestone)\n        }\n        return {\n            key: index,\n            name: milestone,\n            rewards: milestone.key,\n            status: stage.paid,\n            ...users,\n            owner: getCheckboxStatus(progress.owner, stage, milestone),\n            ...experts,\n        }\n    }\n\n    const milestonesData = [\n        getMilestoneData(\n            {\n                key: 'start',\n                name: 'Start',\n                description:\n                    'At this stage owner and user should agree to start this progress.',\n            },\n            'start'\n        ),\n        ...(goal.withMilestones\n            ? goal.milestonesValues.map(getMilestoneData)\n            : []),\n        getMilestoneData(\n            {\n                key: 'finish',\n                name: 'Finish',\n                description:\n                    'At this stage owner and user should agree to finish this progress.',\n            },\n            'finish'\n        ),\n    ]\n\n    return (\n        <>\n            <Table\n                columns={columns}\n                dataSource={milestonesData}\n                scroll={{ x: 'max-content' }}\n                bordered={true}\n            />\n            <Modal\n                visible={state.previewMilestone}\n                footer={null}\n                onCancel={() => setState({ ...state, previewMilestone: '' })}\n                closable={true}\n            >\n                {state.previewMilestone ? (\n                    <>\n                        <h2>{state.previewMilestone.name}</h2>\n                        <p>{state.previewMilestone.description}</p>\n                        <Descriptions\n                            title=\"Milestone description\"\n                            bordered\n                            column={{\n                                xxl: 4,\n                                xl: 3,\n                                lg: 3,\n                                md: 3,\n                                sm: 2,\n                                xs: 1,\n                            }}\n                        >\n                            <Item label=\"Rewards\">\n                                <Rewards\n                                    rewardKey={state.previewMilestone.key}\n                                    rewards={rewardsGroups}\n                                    readOnly={true}\n                                />\n                            </Item>\n                        </Descriptions>\n                    </>\n                ) : null}\n            </Modal>\n        </>\n    )\n}\nexport default ActivityTable\n","import React from 'react'\n\nimport * as wsActions from '../../websocketActions'\nimport EditGoalAndProgressForm from '../../components/EditGoalAndProgressForm/EditGoalAndProgressForm'\n\nconst EditProgress = props => {\n    const { progress, account, state, setState } = props\n\n    const milestonesValues = {}\n    for (let milestone of progress.goal.milestonesValues) {\n        milestonesValues[milestone.key] = milestone\n    }\n    const goal = { ...progress.goal, ...milestonesValues }\n\n    const onFinish = value => {\n        wsActions.editGoalInProgress(props, value)\n        setState({ ...state, editProgressOpen: false })\n    }\n\n    return goal ? (\n        <EditGoalAndProgressForm\n            goal={goal}\n            onFinish={onFinish}\n            account={account}\n        />\n    ) : null\n}\n\nexport default EditProgress\n","import React from 'react'\nimport { withRouter } from 'react-router-dom'\nimport Card from 'antd/es/card'\nimport Button from 'antd/es/button'\nimport Divider from 'antd/es/divider'\nimport Modal from 'antd/es/modal'\n\nimport Descriptions from 'antd/es/descriptions'\n\nconst { Item } = Descriptions\n\nimport * as wsActions from '../../websocketActions'\nimport ActivityTable from './ActivityTable'\nimport EditProgress from './EditProgress'\nimport Popconfirm from 'antd/es/popconfirm'\nimport UserButton from '../../components/UserButton/UserButton'\n\nconst Activity = props => {\n    const { account, progress, state, setState } = props\n    const { goal } = progress\n    return goal ? (\n        <>\n            {goal.images.map((image, index) => (\n                <span\n                    key={index}\n                    onClick={() =>\n                        setState({\n                            ...state,\n                            previewImage: image,\n                        })\n                    }\n                >\n                    <Card\n                        type=\"inner\"\n                        style={{\n                            width: 200,\n                            display: 'inline-block',\n                        }}\n                        hoverable\n                        cover={\n                            <div\n                                style={{\n                                    backgroundImage: 'url(' + image + ')',\n                                    height: 200,\n                                    width: 200,\n                                    backgroundSize: 'cover',\n                                }}\n                            />\n                        }\n                    />\n                </span>\n            ))}\n            <h1>{goal.name}</h1>\n\n            <p>{goal.description}</p>\n\n            <Descriptions\n                title=\"Goal description\"\n                bordered\n                column={{ xxl: 4, xl: 3, lg: 3, md: 3, sm: 2, xs: 1 }}\n            >\n                <Item label=\"Status\">{progress.status}</Item>\n                <Item label=\"Worker\">\n                    {goal.users && <UserButton ids={goal.users} group={true} />}\n                </Item>\n                <Item label=\"Owner\">\n                    <UserButton id={progress.owner} noName={true} />\n                </Item>\n                <Item label=\"Supporters\">\n                    {goal.supporters && (\n                        <UserButton ids={goal.supporters} group={true} />\n                    )}\n                </Item>\n                <Item label=\"Experts\">\n                    {goal.experts && (\n                        <UserButton ids={goal.experts} group={true} />\n                    )}\n                </Item>\n            </Descriptions>\n            <Divider orientation=\"center\" type=\"horizontal\">\n                Milestones\n            </Divider>\n            <ActivityTable\n                progress={progress}\n                account={account}\n                state={state}\n                setState={setState}\n            />\n            {account._id === progress.owner && (\n                <Button\n                    style={{ margin: '0px 20px 50px 0px' }}\n                    type=\"primary\"\n                    onClick={() => {\n                        setState({ ...state, editProgressOpen: true })\n                    }}\n                >\n                    Edit progress\n                </Button>\n            )}\n            {account._id === progress.owner && (\n                <Popconfirm\n                    title=\"Create a group if you want to have more similar prgresses with the same people.\"\n                    onConfirm={() =>\n                        wsActions.createGroup(account._id, progress._id)\n                    }\n                >\n                    <Button\n                        style={{ margin: '0px 20px 50px 0px' }}\n                        type=\"primary\"\n                    >\n                        Create a group\n                    </Button>\n                </Popconfirm>\n            )}\n            {account.progresses &&\n                account.progresses.includes(progress._id.toString()) && (\n                    <Button\n                        danger={true}\n                        onClick={() => {\n                            wsActions.leaveProgress(props)\n                        }}\n                    >\n                        Leave the progress\n                    </Button>\n                )}\n\n            <Modal\n                visible={state.editProgressOpen}\n                footer={null}\n                onCancel={() => setState({ ...state, editProgressOpen: false })}\n                closable={true}\n                destroyOnClose={true}\n                width=\"80%\"\n            >\n                <EditProgress\n                    progress={progress}\n                    account={account}\n                    state={state}\n                    setState={setState}\n                />\n            </Modal>\n        </>\n    ) : null\n}\n\nexport default withRouter(Activity)\n","import React, { useState, useEffect } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport Button from 'antd/es/button'\nimport Comment from 'antd/es/comment'\nimport Avatar from 'antd/es/avatar'\nimport Input from 'antd/es/input'\nimport Form from 'antd/es/form'\nimport Upload from 'antd/es/upload'\nimport PictureOutlined from '@ant-design/icons/PictureOutlined'\nimport LoadingOutlined from '@ant-design/icons/LoadingOutlined'\nimport SendOutlined from '@ant-design/icons/SendOutlined'\nimport { uploadFile } from '../../utils/uploadFile'\nimport * as wsActions from '../../websocketActions'\nimport getAvatar from '../../utils/getAvatar'\nimport { messageRules } from '../../constants/fieldRules'\n\nconst AddPost = props => {\n    const [imageLoading, setImageLoading] = useState(false)\n\n    const { parent, account, parentType } = props\n\n    const [messageText, setMessageText] = useState(\n        props.content ||\n            (props.replyToUser ? '@' + props.replyToUser + ' ' : '')\n    )\n\n    useEffect(() => {\n        setMessageText(\n            props.content ||\n                (props.replyToUser ? '@' + props.replyToUser + ' ' : '')\n        )\n    }, [props.replyToUser, props.content])\n\n    return account._id ? (\n        <div\n            style={{\n                background: '#fff',\n                padding: '0px 10px',\n                boxShadow:\n                    '0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 -1px 10px 0 rgba(0, 0, 0, 0.12), 0 2px 4px -1px rgba(0, 0, 0, 0.2)',\n                bottom: '0px',\n                left: '0px',\n                zIndex: 1000,\n            }}\n        >\n            <h2>Post something new</h2>\n            <Comment\n                avatar={<Avatar src={getAvatar(account._id, account.image)} />}\n                content={\n                    <>\n                        <Form.Item rules={messageRules}>\n                            <Input.TextArea\n                                autoSize={{\n                                    minRows: 1,\n                                    maxRows: 3,\n                                }}\n                                rows={1}\n                                onChange={e => setMessageText(e.target.value)}\n                                value={messageText}\n                            />\n                        </Form.Item>\n                        <Form.Item>\n                            <Button\n                                htmlType=\"submit\"\n                                onClick={() => {\n                                    wsActions.addPost(\n                                        account._id,\n                                        parent,\n                                        parentType,\n                                        messageText\n                                    )\n                                    setMessageText('')\n                                    if (props.onSend) props.onSend()\n                                }}\n                                icon={<SendOutlined />}\n                                size=\"large\"\n                                type=\"link\"\n                            />\n                            <Upload\n                                showUploadList={false}\n                                customRequest={({ file }) => {\n                                    setImageLoading(true)\n                                    uploadFile(file, 800, undefined, url => {\n                                        setImageLoading(false)\n                                        wsActions.addPost(\n                                            account._id,\n                                            parent,\n                                            parentType,\n                                            messageText,\n                                            url\n                                        )\n                                        if (props.onSend) props.onSend()\n                                    })\n                                }}\n                            >\n                                <Button\n                                    size=\"large\"\n                                    type=\"link\"\n                                    icon={\n                                        imageLoading ? (\n                                            <LoadingOutlined />\n                                        ) : (\n                                            <PictureOutlined />\n                                        )\n                                    }\n                                />\n                            </Upload>\n                        </Form.Item>\n                    </>\n                }\n            />\n        </div>\n    ) : null\n}\n\nexport default withRouter(AddPost)\n","import React, { useEffect, useState } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport * as actions from '../../store/actions'\n\nimport Modal from 'antd/es/modal'\nimport Activity from './Activity'\nimport Card from 'antd/es/card'\nimport Post from '../../components/Post/Post'\nimport AddPost from '../../components/Post/AddPost'\nimport Tabs from 'antd/es/tabs'\nimport pullData from '../../utils/pullData'\n\nconst Progress = props => {\n    const [state, setState] = useState({})\n\n    const [data, setData] = useState({})\n    const pathParts = props.history.location.pathname.split('/')\n    const progressId = pathParts.length > 2 ? pathParts[2] : ''\n    if (!progressId) return null\n    useEffect(() => {\n        if (props.isAuthed) {\n            props.setData({ currentProgress: progressId })\n        } else {\n            pullData(props, data, setData, { forceAuth: false }, data => {\n                const friendData = {}\n                for (let friend of data.friendData)\n                    friendData[friend._id] = friend\n                const post = {}\n                for (let item of data.post) post[item._id] = item\n\n                props.setData({\n                    friendData,\n                    posts: post,\n                    account: {},\n                    progress: data.progress,\n                })\n            })\n        }\n    }, [props.isAuthed, props.history.location.pathname])\n\n    const { progress, account, friendData, posts } = props.isAuthed\n        ? props\n        : { ...data, account: {} }\n\n    if (!progress || !progress._id) return null\n    props.setData({ currentPosts: progress.posts })\n\n    const { goal } = progress\n    if (goal) props.setPageTitle({ main: goal.name, sub: progress.worker })\n    return goal && friendData ? (\n        <>\n            <Tabs>\n                <Tabs.TabPane tab=\"Posts\" key=\"posts\">\n                    {account && (\n                        <AddPost\n                            parent={progressId}\n                            account={account}\n                            parentType=\"progress\"\n                            // onSend={() => setEditingMessage('')}\n                        />\n                    )}\n                    {progress.posts.map(postId => {\n                        if (posts[postId]) {\n                            const post = posts[postId]\n                            return (\n                                <Card>\n                                    <Post\n                                        friendData={friendData}\n                                        account={account}\n                                        post={post}\n                                    />\n                                </Card>\n                            )\n                        } else return null\n                    })}\n                </Tabs.TabPane>\n                <Tabs.TabPane tab=\"Details\" key=\"details\">\n                    <Activity\n                        state={state}\n                        setState={setState}\n                        progress={progress}\n                        account={account}\n                    />\n                </Tabs.TabPane>\n            </Tabs>\n            <Modal\n                visible={state.previewImage}\n                footer={null}\n                onCancel={() => setState({ ...state, previewImage: '' })}\n            >\n                <img\n                    alt=\"example\"\n                    style={{ width: '100%' }}\n                    src={state.previewImage}\n                />\n            </Modal>\n        </>\n    ) : null\n}\nconst mapStateToProps = state => {\n    return {\n        isAuthed: state.isAuthed,\n        account: state.account,\n        posts: state.post,\n        progress: state.progress,\n        friendData: state.friendData,\n    }\n}\n\nconst mapDispatchToProps = (dispatch: any) => {\n    return {\n        setData: data => {\n            dispatch(actions.setData(data))\n        },\n        setPageTitle: title => dispatch(actions.setPageTitle(title)),\n    }\n}\n\nexport default withRouter(\n    connect(\n        mapStateToProps,\n        mapDispatchToProps\n    )(Progress)\n)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { withRouter } from 'react-router-dom'\nimport Card from 'antd/es/card'\nimport PlusCircleOutlined from '@ant-design/icons/PlusCircleOutlined'\nimport Button from 'antd/es/button'\nimport Avatar from 'antd/es/avatar'\nimport getAvatar from '../../utils/getAvatar'\nimport UserButton from '../../components/UserButton/UserButton'\n\nconst Wallet = props => {\n    const account = props.pulledProfile || props.account\n    return account.wallet\n        ? account.wallet.map((money, index) => (\n              <div\n                  onClick={() => props.history.push('/profile/' + money.user)}\n                  style={{ display: 'inline-block', margin: '4px 8px' }}\n              >\n                  <Card\n                      key={index}\n                      type=\"inner\"\n                      style={{\n                          width: 200,\n                      }}\n                      cover={\n                          <span style={{ padding: '25px' }}>\n                              <Avatar src={getAvatar(money.user)} size={150} />\n                          </span>\n                      }\n                      extra={\n                          <Button key=\"1\" icon={<PlusCircleOutlined />}>\n                              Go to the shop\n                          </Button>\n                      }\n                  >\n                      <UserButton id={money.user} />\n                      {money.amount}\n                  </Card>\n              </div>\n          ))\n        : null\n}\nconst mapStateToProps = state => {\n    return {\n        account: state.account,\n        isAuthed: state.isAuthed,\n    }\n}\n\nexport default withRouter(connect(mapStateToProps)(Wallet))\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport * as actions from '../../store/actions'\nimport Button from 'antd/es/button'\nimport Table from 'antd/es/table'\nimport Tag from 'antd/es/tag'\nimport TimeAgo from 'timeago-react'\nimport Card from 'antd/es/card'\nimport Avatar from 'antd/es/avatar'\nimport getAvatar from '../../utils/getAvatar'\nimport Rewards from '../../components/Rewards/Rewards'\n\nconst Transactions = props => {\n    props.setPageTitle({ main: 'Shop', sub: 'Transactions' })\n\n    const { account, aTransactionData, friendData } = props\n    if (!account || !account._id) return null\n\n    const transactions = account.transactions\n        .filter(item => aTransactionData[item])\n        .map(item => aTransactionData[item])\n\n    const columns = [\n        {\n            title: 'Type',\n            dataIndex: 'types',\n            key: 'types',\n            render: types => (\n                <>\n                    {types.map(tag => {\n                        let color = tag.length > 5 ? 'geekblue' : 'green'\n                        if (tag === 'loser') {\n                            color = 'volcano'\n                        }\n                        return (\n                            <Tag color={color} key={tag}>\n                                {tag.toUpperCase()}\n                            </Tag>\n                        )\n                    })}\n                </>\n            ),\n        },\n        {\n            title: 'With',\n            dataIndex: 'user',\n            key: 'user',\n            render: user => {\n                const friend = friendData[user]\n                return friend ? (\n                    <Button\n                        type=\"link\"\n                        style={{ padding: 0 }}\n                        onClick={() => props.history.push('/profile/' + user)}\n                    >\n                        <Avatar\n                            src={getAvatar(user, friend.image)}\n                            style={{ marginRight: '5px' }}\n                        />\n                        {friend.name + ' (' + friend._id + ')'}\n                    </Button>\n                ) : (\n                    user\n                )\n            },\n        },\n        {\n            title: 'Item',\n            dataIndex: 'perk',\n            key: 'perk',\n            render: perk =>\n                perk.simple || (\n                    <Rewards\n                        rewardKey={1}\n                        label=\"Rewards\"\n                        rewards={[{ rewards: [perk], key: 1 }]}\n                        readOnly={true}\n                    />\n                ),\n        },\n        {\n            title: 'Amount',\n            dataIndex: 'amount',\n            key: 'amount',\n            render: amount => (amount > 0 ? amount : ''),\n        },\n        {\n            title: 'Date',\n            dataIndex: 'date',\n            key: 'date',\n            render: date => <TimeAgo datetime={date} live />,\n        },\n        {\n            title: 'Progress',\n            dataIndex: 'progress',\n            key: 'progress',\n            render: progress => (\n                <Button\n                    type=\"link\"\n                    onClick={() =>\n                        props.history.push('/progresses/' + progress)\n                    }\n                >\n                    {progress}\n                </Button>\n            ),\n        },\n        {\n            title: 'Status',\n            key: 'status',\n            dataIndex: 'status',\n            render: (status, record) => {\n                if (status === 'Not confirmed') {\n                    return (\n                        <>\n                            <Button\n                                danger={true}\n                                type=\"link\"\n                                onClick={() =>\n                                    wsActions.cancelTransaction(\n                                        account._id,\n                                        record.transaction._id\n                                    )\n                                }\n                            >\n                                Cancel\n                            </Button>\n                            {record.transaction.from === account._id && (\n                                <Button\n                                    type=\"link\"\n                                    onClick={() =>\n                                        wsActions.confirmTransaction(\n                                            account._id,\n                                            record.transaction._id\n                                        )\n                                    }\n                                >\n                                    Confirm\n                                </Button>\n                            )}\n                        </>\n                    )\n                }\n                return status\n            },\n        },\n    ]\n\n    const tableData = []\n    let sorted = [...transactions]\n    sorted = sorted.sort((a, b) =>\n        new Date(a.date).getTime() < new Date(b.date).getTime() ? 1 : -1\n    )\n    for (let transaction of sorted) {\n        const types = []\n        if (transaction.from === account._id && transaction.to === account.id) {\n            types.push('internal')\n        }\n        if (transaction.to === account._id) {\n            if (transaction.progress) {\n                types.push('earn')\n                if (!transaction.amount) types.push('item')\n                else types.push('money')\n            } else {\n                if (transaction.item && transaction.amount) {\n                    types.push('buy')\n                    types.push('item')\n                } else {\n                    types.push('recieve gift')\n                    if (!transaction.amount) types.push('item')\n                    else types.push('money')\n                }\n            }\n        } else if (transaction.from === account._id) {\n            if (transaction.progress) {\n                types.push('pay')\n                if (!transaction.amount) types.push('item')\n                else types.push('money')\n            } else {\n                if (transaction.item && transaction.amount) {\n                    types.push('sell')\n                    types.push('item')\n                } else {\n                    types.push('send gift')\n                    if (!transaction.amount) types.push('item')\n                    else types.push('money')\n                }\n            }\n        }\n\n        const user =\n            transaction.to !== account._id ? transaction.to : transaction.from\n\n        tableData.push({\n            key: tableData.length,\n            types,\n            user,\n            perk: transaction.item,\n            amount: transaction.amount,\n            date: transaction.date,\n            progress: transaction.progress,\n            status: transaction.status,\n            transaction,\n        })\n    }\n    return (\n        <Card>\n            <Table\n                columns={columns}\n                dataSource={tableData}\n                scroll={{ x: true }}\n            />\n        </Card>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        account: state.account,\n        aTransactionData: state.aTransactionData,\n        friendData: state.friendData,\n    }\n}\n\nconst mapDispatchToProps = (dispatch: any) => {\n    return {\n        setPageTitle: title => dispatch(actions.setPageTitle(title)),\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Transactions)\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport * as actions from '../../store/actions'\nimport Tabs from 'antd/es/tabs'\nimport Wallet from './Wallet'\nimport Transactions from './Transactions'\nimport WishlistAndPerks from './WishlistAndPerks'\n\nconst Shop = props => {\n    useEffect(() => {\n        props.setPageTitle({ main: 'Shop', sub: 'My items' })\n    }, [])\n\n    return props.account._id ? (\n        <Tabs\n            style={{\n                background: 'transparent',\n                boxShadow: 'none',\n                margin: '0',\n                marginTop: '-15px',\n            }}\n        >\n            <Tabs.TabPane tab=\"My shop\" key={1}>\n                <WishlistAndPerks\n                    mode=\"shop\"\n                    listKey=\"perks\"\n                    account={props.account}\n                />\n            </Tabs.TabPane>\n            <Tabs.TabPane tab=\"Wallet\" key={3}>\n                <Wallet />\n            </Tabs.TabPane>\n            <Tabs.TabPane tab=\"Transactions\" key={4}>\n                <Transactions />\n            </Tabs.TabPane>\n        </Tabs>\n    ) : (\n        <span />\n    )\n}\nconst mapStateToProps = state => {\n    return {\n        account: state.account,\n    }\n}\n\nconst mapDispatchToProps = (dispatch: any) => {\n    return {\n        setPageTitle: title => dispatch(actions.setPageTitle(title)),\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Shop)\n","import React, { useEffect, useState } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport * as actions from '../../store/actions'\nimport isEqual from 'lodash.isequal'\n\nimport Card from 'antd/es/card'\nimport Post from '../../components/Post/Post'\n\nimport UserButton from '../../components/UserButton/UserButton'\nimport Progresses from '../Progresses/Progresses'\nimport Divider from 'antd/es/divider'\n\nconst DashboardPosts = props => {\n    const {\n        account,\n        friendData,\n        statePosts,\n        progressData,\n        groupData,\n        currentPosts,\n    } = props\n\n    const [posts, setPosts] = useState([])\n    const [startTime] = useState(new Date().getTime())\n\n    const sortNotifications = (a, b) => {\n        if (a.notifications.length === 0 && b.notifications.length > 0) return 1\n        else if (a.notifications.length > 0 && b.notifications.length === 0)\n            return -1\n        else if (a.notifications.length === 0 && b.notifications.length === 0)\n            return 0\n        else\n            return new Date(a.notifications[0].date).getTime() <\n                new Date(b.notifications[0].date).getTime()\n                ? 1\n                : -1\n    }\n\n    useEffect(() => {\n        if (currentPosts) {\n            const newPosts = currentPosts\n                .filter(item => statePosts[item])\n                .map(item => statePosts[item])\n\n            const newUnseenPosts = []\n            const newOldPosts = []\n            let oldPosts = [...posts]\n            for (let post of newPosts) {\n                let oldPostIndex = oldPosts.findIndex(item => {\n                    return item._id.toString() === post._id.toString()\n                })\n                if (oldPostIndex === -1) {\n                    if (\n                        post.notifications &&\n                        post.notifications.length > 0 &&\n                        new Date(post.notifications[0].date).getTime() >\n                            startTime\n                    ) {\n                        newUnseenPosts.push(post)\n                    } else {\n                        newOldPosts.push(post)\n                    }\n                } else {\n                    oldPosts[oldPostIndex] = post\n                }\n            }\n\n            for (let post of newOldPosts) {\n                const index = oldPosts.findIndex(item => {\n                    if (\n                        item &&\n                        item.notifications &&\n                        item.notifications.length > 0\n                    ) {\n                        return (\n                            new Date(item.notifications[0]).getTime() >\n                            new Date(post.notifications[0]).getTime()\n                        )\n                    } else return false\n                })\n                if (index === -1) {\n                    oldPosts.push(post)\n                } else {\n                    oldPosts.splice(index, 0, post)\n                }\n            }\n\n            let resultPosts = [...newUnseenPosts, ...oldPosts]\n            if (posts.length === 0) {\n                resultPosts = resultPosts.sort(sortNotifications)\n            }\n            setPosts(resultPosts)\n        }\n    }, [currentPosts, statePosts])\n    if (!account._id) return null\n\n    let lastNotifications = []\n    for (let progress of account.progresses) {\n        if (progressData[progress])\n            lastNotifications = [\n                ...lastNotifications,\n                ...progressData[progress].notifications.filter(\n                    item => item.code === 'add post'\n                ),\n            ]\n    }\n\n    for (let group of account.groups) {\n        if (groupData[group])\n            lastNotifications = [\n                ...lastNotifications,\n                ...groupData[group].notifications.filter(\n                    item => item.code === 'add post'\n                ),\n            ]\n    }\n\n    lastNotifications = lastNotifications\n        .sort(sortNotifications)\n        .map(item => item.details.postId)\n        .slice(0, 10)\n\n    const neededPosts = [\n        ...new Set([\n            ...account.followPosts,\n            ...account.myPosts,\n            ...posts.map(post => post._id),\n            ...lastNotifications,\n        ]),\n    ]\n    if (!isEqual(currentPosts, neededPosts))\n        props.setData({ currentPosts: neededPosts })\n\n    props.setPageTitle({ main: 'Dashboard', sub: '' })\n\n    return posts.map(item => {\n        let text = null\n\n        const not = item.notifications.length > 0 ? item.notifications[0] : null\n        if (not) {\n            switch (not.code) {\n                case 'edit wishlist item':\n                    text = 'edited item in wishlist.'\n\n                    break\n                case 'edit goal':\n                    text = 'edited goal.'\n\n                    break\n                case 'edit perk':\n                    text = 'edited item in shop.'\n\n                    break\n\n                case 'comment':\n                    text = 'added a comment.'\n\n                    break\n                case 'edit comment':\n                    text = 'edited a comment.'\n\n                    break\n                case 'like':\n                    text = 'added a like.'\n\n                    break\n                case 'dislike':\n                    text = 'removed a like.'\n\n                    break\n                default:\n                    text = null\n                    break\n            }\n        }\n        return (\n            <>\n                <div\n                    style={{\n                        height: '5px',\n                        background: '#ddd',\n                        width: 'calc(100% + 8px)',\n                        position: 'absolute',\n                        left: '-8px',\n                    }}\n                />\n                <div style={{ marginTop: '10px' }}>\n                    {text && (\n                        <>\n                            <span>\n                                <UserButton\n                                    id={not.user}\n                                    noAva={true}\n                                    span={true}\n                                    style={{ fontWeight: 'bold' }}\n                                />{' '}\n                                {text}\n                            </span>\n                            <Divider\n                                type=\"horizontal\"\n                                style={{ margin: '5px 0' }}\n                            />\n                        </>\n                    )}\n                    <Post\n                        friendData={friendData}\n                        account={account}\n                        post={item}\n                        progressData={progressData}\n                        groupData={groupData}\n                    />\n                </div>\n            </>\n        )\n    })\n}\nconst mapStateToProps = state => {\n    return {\n        isAuthed: state.isAuthed,\n        account: state.account,\n        statePosts: state.post,\n        progress: state.progress,\n        friendData: state.friendData,\n        progressData: state.progressData,\n        groupData: state.groupData,\n        currentPosts: state.currentPosts,\n    }\n}\n\nconst mapDispatchToProps = (dispatch: any) => {\n    return {\n        setData: data => {\n            dispatch(actions.setData(data))\n        },\n        setPageTitle: title => dispatch(actions.setPageTitle(title)),\n    }\n}\n\nexport default withRouter(\n    connect(\n        mapStateToProps,\n        mapDispatchToProps\n    )(DashboardPosts)\n)\n","import React from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\n\nimport Card from 'antd/es/card'\nimport Button from 'antd/es/button'\nimport UserButton from '../../components/UserButton/UserButton'\n\nconst DashboardEvents = props => {\n    const { lastNotifications } = props\n    const getRewardText = item =>\n        item.details.reward.money\n            ? '$' + item.details.reward.money\n            : item.details.reward.simple || item.details.reward.itemName\n    return lastNotifications.map(item => {\n        let text = null\n\n        switch (item.code) {\n            case 'change name':\n                text = (\n                    <span>\n                        {' '}\n                        <UserButton id={item.user} /> changed name.\n                    </span>\n                )\n                break\n            case 'delete account':\n                text = (\n                    <span>\n                        {item.user}\n                        deleted account.\n                    </span>\n                )\n                break\n            case 'friend request':\n                text = (\n                    <span>\n                        <UserButton id={item.user} /> wants to become friends\n                        with you.\n                    </span>\n                )\n                break\n            case 'friend add':\n                text = (\n                    <span>\n                        <UserButton id={item.user} /> and{' '}\n                        <UserButton id={item.details.friend} /> became friends.\n                    </span>\n                )\n                break\n            case 'unfriend':\n                text = (\n                    <span>\n                        <UserButton id={item.user} /> and{' '}\n                        <UserButton id={item.details.friend} /> stopped being\n                        friends.\n                    </span>\n                )\n                break\n            case 'add wishlist item':\n            case 'edit wishlist item':\n                text = (\n                    <span>\n                        <UserButton id={item.user} />{' '}\n                        {item.code === 'add wishlist item'\n                            ? 'added to wishlist a new item'\n                            : 'edited in wishlist'}{' '}\n                        <Button\n                            type=\"link\"\n                            onClick={() =>\n                                props.history.push(\n                                    `/wishlist/${item.user}/${\n                                        item.details.itemId\n                                    }`\n                                )\n                            }\n                        >\n                            {item.details.itemName}\n                        </Button>{' '}\n                        .\n                    </span>\n                )\n                break\n            case 'delete wishlist item':\n                text = (\n                    <span>\n                        <UserButton id={item.user} /> deleted{' '}\n                        {item.details.itemName} from wishlist.\n                    </span>\n                )\n                break\n            case 'add goal':\n            case 'edit goal':\n                text = (\n                    <span>\n                        <UserButton id={item.user} />{' '}\n                        {item.code === 'add goal'\n                            ? 'added a new goal'\n                            : 'edited goal'}{' '}\n                        <Button\n                            type=\"link\"\n                            onClick={() =>\n                                props.history.push(\n                                    `/goals/${item.user}/${item.details.itemId}`\n                                )\n                            }\n                        >\n                            {item.details.itemName}\n                        </Button>{' '}\n                        .\n                    </span>\n                )\n                break\n            case 'delete goal':\n                text = (\n                    <span>\n                        <UserButton id={item.user} /> deleted{' '}\n                        {item.details.itemName} from goals.\n                    </span>\n                )\n                break\n            case 'add perk':\n            case 'edit perk':\n                text = (\n                    <span>\n                        <UserButton id={item.user} />{' '}\n                        {item.code === 'add perk'\n                            ? 'added to shop a new item'\n                            : 'edited in shop'}{' '}\n                        <Button\n                            type=\"link\"\n                            onClick={() =>\n                                props.history.push(\n                                    `/shop/${item.user}/${item.details.itemId}`\n                                )\n                            }\n                        >\n                            {item.details.itemName}\n                        </Button>{' '}\n                        .\n                    </span>\n                )\n                break\n            case 'delete perk':\n                text = (\n                    <span>\n                        <UserButton id={item.user} /> deleted{' '}\n                        {item.details.itemName} from shop.\n                    </span>\n                )\n                break\n            case 'buy perk':\n                text = (\n                    <span>\n                        <UserButton id={item.user} /> bought\n                        <Button\n                            type=\"link\"\n                            onClick={() =>\n                                props.history.push(\n                                    `/shop/${item.user}/${item.details.itemId}`\n                                )\n                            }\n                        >\n                            {item.details.itemName} (${item.details.price})\n                        </Button>{' '}\n                        from <UserButton id={item.details.owner} /> .\n                    </span>\n                )\n                break\n            case 'cancel transaction':\n            case 'confirm transaction':\n                text = (\n                    <span>\n                        <UserButton id={item.user} />{' '}\n                        {item.code === 'cancel transaction'\n                            ? 'cancelled'\n                            : 'confirmed'}\n                        purchase of\n                        <Button\n                            type=\"link\"\n                            onClick={() =>\n                                props.history.push(\n                                    `/shop/${item.user}/${item.details.itemId}`\n                                )\n                            }\n                        >\n                            {item.details.itemName} (${item.details.price})\n                        </Button>{' '}\n                        by <UserButton id={item.details.buyer} /> .\n                    </span>\n                )\n                break\n            case 'start progress':\n                text = (\n                    <span>\n                        <UserButton id={item.user} /> started participating in\n                        progress\n                        <Button\n                            type=\"link\"\n                            onClick={() =>\n                                props.history.push(\n                                    `/progresses/${item.details.itemId}`\n                                )\n                            }\n                        >\n                            {item.details.itemName}\n                        </Button>{' '}\n                        as {item.details.as}.\n                    </span>\n                )\n                break\n            case 'approve milestone':\n                text = (\n                    <span>\n                        <UserButton id={item.user} /> approved milestone{' '}\n                        {item.details.itemName} in\n                        <Button\n                            type=\"link\"\n                            onClick={() =>\n                                props.history.push(\n                                    `/progresses/${item.details.progressId}`\n                                )\n                            }\n                        >\n                            {item.details.progressName}\n                        </Button>\n                        .\n                    </span>\n                )\n                break\n            case 'disapprove milestone':\n                text = (\n                    <span>\n                        <UserButton id={item.user} /> disapproved milestone{' '}\n                        {item.details.itemName} in\n                        <Button\n                            type=\"link\"\n                            onClick={() =>\n                                props.history.push(\n                                    `/progresses/${item.details.progressId}`\n                                )\n                            }\n                        >\n                            {item.details.progressName}\n                        </Button>\n                        .\n                    </span>\n                )\n                break\n            case 'finish progress':\n                text = (\n                    <span>\n                        Progress{' '}\n                        <Button\n                            type=\"link\"\n                            onClick={() =>\n                                props.history.push(\n                                    `/progresses/${item.details.progressId}`\n                                )\n                            }\n                        >\n                            {item.details.progressName}\n                        </Button>\n                        was approved and finished.\n                    </span>\n                )\n                break\n            case 'milestone finish':\n                text = (\n                    <span>\n                        Milestone {item.details.itemName} in progress{' '}\n                        <Button\n                            type=\"link\"\n                            onClick={() =>\n                                props.history.push(\n                                    `/progresses/${item.details.progressId}`\n                                )\n                            }\n                        >\n                            {item.details.progressName}\n                        </Button>\n                        was approved and finished.\n                    </span>\n                )\n                break\n            case 'get reward':\n                text = (\n                    <span>\n                        <UserButton id={item.user} /> recieved{' '}\n                        {getRewardText(item)} as a reward from{' '}\n                        <UserButton id={item.details.from} /> in progress\n                        <Button\n                            type=\"link\"\n                            onClick={() =>\n                                props.history.push(\n                                    `/progresses/${item.details.progressId}`\n                                )\n                            }\n                        >\n                            {item.details.progressName}\n                        </Button>\n                        .\n                    </span>\n                )\n                break\n            case 'leave progress':\n                text = (\n                    <span>\n                        <UserButton id={item.user} /> left progress{' '}\n                        <Button\n                            type=\"link\"\n                            onClick={() =>\n                                props.history.push(\n                                    `/progresses/${item.details.progressId}`\n                                )\n                            }\n                        >\n                            {item.details.progressName}\n                        </Button>\n                        .\n                    </span>\n                )\n                break\n            case 'edit progress':\n                text = (\n                    <span>\n                        <UserButton id={item.user} /> edited progress{' '}\n                        <Button\n                            type=\"link\"\n                            onClick={() =>\n                                props.history.push(\n                                    `/progresses/${item.details.progressId}`\n                                )\n                            }\n                        >\n                            {item.details.progressName}\n                        </Button>\n                        {item.details.addedAccounts.length > 0 ? (\n                            <>\n                                {' '}\n                                and added{' '}\n                                {item.details.addedAccounts.map(ac => (\n                                    <UserButton id={ac} />\n                                ))}{' '}\n                            </>\n                        ) : (\n                            ''\n                        )}\n                        {item.details.droppedAccounts.length > 0 ? (\n                            <>\n                                {' '}\n                                and removed{' '}\n                                {item.details.droppedAccounts.map(ac => (\n                                    <UserButton id={ac} />\n                                ))}{' '}\n                            </>\n                        ) : (\n                            ''\n                        )}\n                        .\n                    </span>\n                )\n                break\n            case 'remove from progress':\n                text = (\n                    <span>\n                        <UserButton id={item.user} /> removed{' '}\n                        <UserButton id={item.details.account} /> from progress\n                        <Button\n                            type=\"link\"\n                            onClick={() =>\n                                props.history.push(\n                                    `/progresses/${item.details.progressId}`\n                                )\n                            }\n                        >\n                            {item.details.progressName}\n                        </Button>\n                        .\n                    </span>\n                )\n                break\n            case 'remove from progress':\n                text = (\n                    <span>\n                        <UserButton id={item.user} /> added{' '}\n                        <UserButton id={item.details.account} /> to progress\n                        <Button\n                            type=\"link\"\n                            onClick={() =>\n                                props.history.push(\n                                    `/progresses/${item.details.progressId}`\n                                )\n                            }\n                        >\n                            {item.details.progressName}\n                        </Button>\n                        .\n                    </span>\n                )\n                break\n            case 'add reward':\n                text = (\n                    <span>\n                        <UserButton id={item.user} /> added{' '}\n                        {getRewardText(item)} as a reward for asdasdasd\n                        {!item.details.for || item.details.for.length === 0\n                            ? 'all '\n                            : item.details.for.map(account => (\n                                  <>\n                                      <UserButton id={account} />,\n                                  </>\n                              ))}\n                        in progress\n                        <Button\n                            type=\"link\"\n                            onClick={() =>\n                                props.history.push(\n                                    `/progresses/${item.details.progressId}`\n                                )\n                            }\n                        >\n                            {item.details.progressName}\n                        </Button>\n                        .\n                    </span>\n                )\n                break\n            case 'delete reward':\n                text = (\n                    <span>\n                        <UserButton id={item.user} /> removed{' '}\n                        {getRewardText(item)} as a reward for{' '}\n                        {!item.details.for || item.details.for.length === 0\n                            ? 'all '\n                            : item.details.for.map(account => (\n                                  <>\n                                      <UserButton id={account} />,\n                                  </>\n                              ))}\n                        in progress\n                        <Button\n                            type=\"link\"\n                            onClick={() =>\n                                props.history.push(\n                                    `/progresses/${item.details.progressId}`\n                                )\n                            }\n                        >\n                            {item.details.progressName}\n                        </Button>\n                        .\n                    </span>\n                )\n                break\n            default:\n                text = 'New event'\n                break\n        }\n        return <Card>{text}</Card>\n    })\n}\nconst mapStateToProps = state => {\n    return {\n        lastNotifications: state.lastNotifications,\n    }\n}\n\nexport default withRouter(connect(mapStateToProps)(DashboardEvents))\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport * as actions from '../../store/actions'\nimport * as wsActions from '../../websocketActions'\n\nimport Tabs from 'antd/es/tabs'\nimport DashboardPosts from './DashboardPosts'\nimport DashboardEvents from './DashboardEvents'\n\nconst Progress = props => {\n    const { account, lastNotifications } = props\n\n    if (!account._id) return null\n\n    props.setPageTitle({ main: 'Dashboard', sub: '' })\n\n    return (\n        <Tabs\n            onChange={activeTab => {\n                if (activeTab === 'events') {\n                    if (\n                        lastNotifications.length > 0 &&\n                        parseInt(account.lastSeenNot) !==\n                            parseInt(lastNotifications[0].notId)\n                    ) {\n                        wsActions.setLastSeenNot(\n                            account._id,\n                            parseInt(lastNotifications[0].notId)\n                        )\n                    }\n                }\n            }}\n        >\n            <Tabs.TabPane tab=\"Posts\" key=\"psts\">\n                <DashboardPosts />\n            </Tabs.TabPane>\n            <Tabs.TabPane tab=\"Events\" key=\"events\">\n                <DashboardEvents />\n            </Tabs.TabPane>\n        </Tabs>\n    )\n}\nconst mapStateToProps = state => {\n    return {\n        account: state.account,\n        lastNotifications: state.lastNotifications,\n    }\n}\n\nconst mapDispatchToProps = (dispatch: any) => {\n    return {\n        setPageTitle: title => dispatch(actions.setPageTitle(title)),\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Progress)\n","import { webSocket } from '../containers/ConnectWebsocket/ConnectWebsocket'\n\nexport const setLastSeenNot = (accountId, notId) => {\n    if (webSocket && webSocket.readyState === 1) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'setLastSeenNot',\n                accountId,\n                notId,\n            })\n        )\n    }\n}\n","import React from 'react'\n\nimport * as wsActions from '../websocketActions'\nimport Menu from 'antd/es/menu'\nimport Dropdown from 'antd/es/dropdown'\nimport { EllipsisOutlined, DownOutlined } from '@ant-design/icons'\nimport Button from 'antd/es/button'\n\nconst FriendActionButton = props => {\n    const {\n        invitingFriends,\n        invitedFriends,\n        realFriends,\n        _id,\n        accountId,\n    } = props\n    if (!accountId) return []\n\n    if (accountId === _id) return [props.additionalButton]\n\n    const menu = (\n        <Menu onClick={({ domEvent }) => domEvent.stopPropagation()}>\n            {props.additionalButtons &&\n                props.additionalButtons.map((button, index) => (\n                    <Menu.Item key={index + 100} onClick={button.onClick}>\n                        {button.title}\n                    </Menu.Item>\n                ))}\n            {invitingFriends.find(item => item.friend === _id) ? (\n                <Menu.Item\n                    key=\"2\"\n                    onClick={() => wsActions.unfriend(accountId, _id)}\n                    danger={true}\n                >\n                    Decline\n                </Menu.Item>\n            ) : invitedFriends.find(item => item.friend === _id) ? (\n                <Menu.Item\n                    key=\"3\"\n                    onClick={() => wsActions.unfriend(accountId, _id)}\n                    danger={true}\n                >\n                    Cancel invitation\n                </Menu.Item>\n            ) : realFriends.find(item => item.friend === _id) ? (\n                <Menu.Item\n                    key=\"4\"\n                    onClick={() => wsActions.unfriend(accountId, _id)}\n                    danger={true}\n                >\n                    Unfriend\n                </Menu.Item>\n            ) : (\n                <Menu.Item\n                    key=\"5\"\n                    onClick={() => wsActions.addFriend(accountId, _id)}\n                    danger={true}\n                >\n                    Become friends\n                </Menu.Item>\n            )}\n        </Menu>\n    )\n    return invitingFriends.find(item => item.friend === _id) ? (\n        <Dropdown.Button\n            type=\"primary\"\n            overlay={menu}\n            trigger={['click']}\n            onClick={e => {\n                e.preventDefault()\n                e.stopPropagation()\n                wsActions.acceptFriend(accountId, _id)\n            }}\n        >\n            Accept\n        </Dropdown.Button>\n    ) : (\n        <Dropdown overlay={menu} trigger={['click']}>\n            <a\n                // className=\"ant-dropdown-link\"\n                onClick={e => {\n                    e.preventDefault()\n                    e.stopPropagation()\n                }}\n            >\n                <Button type=\"link\">\n                    {props.asText ? (\n                        <>\n                            Actions <DownOutlined />\n                        </>\n                    ) : (\n                        <EllipsisOutlined />\n                    )}\n                </Button>\n            </a>\n        </Dropdown>\n    )\n}\n\nexport default FriendActionButton\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport * as actions from '../store/actions'\nimport { withRouter } from 'react-router-dom'\n\nimport Card from 'antd/es/card'\nimport friendActionButton from './FriendActionButton'\nimport UserButton from './UserButton/UserButton'\n\nconst FriendCard = props => {\n    const friendActions = friendActionButton({\n        accountId: props.account ? props.account._id : '',\n        realFriends: props.realFriends,\n        invitedFriends: props.invitedFriends,\n        invitingFriends: props.invitingFriends,\n        _id: props.friend._id,\n        asIcons: true,\n\n        additionalButtons: [\n            {\n                title: 'See profile',\n                onClick: () =>\n                    props.history.push('/profile/' + props.friend._id),\n            },\n        ],\n    })\n\n    return (\n        <Card\n            type=\"inner\"\n            style={{ width: '100%' }}\n            bordered={false}\n            extra={friendActions}\n            title={<UserButton id={props.friend._id} size={50} />}\n        />\n    )\n}\nconst mapStateToProps = state => {\n    return {\n        account: state.account,\n        isAuthed: state.isAuthed,\n    }\n}\n\nconst mapDispatchToProps = (dispatch: any) => {\n    return {\n        setData: (data, pulledFrom) =>\n            dispatch(actions.setData(data, pulledFrom)),\n        tryAuth: (props, forceAuth) =>\n            dispatch(actions.tryAuth(props, forceAuth)),\n    }\n}\n\nexport default withRouter(\n    connect(\n        mapStateToProps,\n        mapDispatchToProps\n    )(FriendCard)\n)\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport * as actions from '../../store/actions'\nimport * as wsActions from '../../websocketActions'\nimport Card from 'antd/es/card'\nimport Button from 'antd/es/button'\nimport Modal from 'antd/es/modal'\n\nimport Input from 'antd/es/input'\nimport Form from 'antd/es/form'\n\nimport FriendCard from '../../components/FriendCard'\nimport { nicknameRules } from '../../constants/fieldRules'\n\nconst AddFriends = props => {\n    useEffect(() => {\n        props.setFriendSearchResult(null)\n    }, [props.addFriendOpen])\n\n    const {\n        addFriendOpen,\n        setAddFriendOpen,\n        searchResult,\n        realFriends,\n        invitedFriends,\n        invitingFriends,\n    } = props\n    const layout = {\n        labelCol: { span: 8 },\n        wrapperCol: { span: 16 },\n    }\n    const tailLayout = {\n        wrapperCol: { offset: 8, span: 16 },\n    }\n\n    return (\n        <Modal\n            title=\"Add friend\"\n            visible={addFriendOpen}\n            maskClosable\n            closable\n            onCancel={() => setAddFriendOpen(false)}\n            footer={\n                <Button key=\"back\" onClick={() => setAddFriendOpen(false)}>\n                    Return\n                </Button>\n            }\n            destroyOnClose={true}\n        >\n            <p>To find a friend you need to enter your friend's nickname.</p>\n            <Form\n                name=\"dynamic_form_nest_item\"\n                onFinish={value => wsActions.searchFriends(value.search)}\n                autoComplete=\"off\"\n                {...layout}\n            >\n                <Form.Item label=\"Search\" name=\"search\" rules={nicknameRules}>\n                    <Input placeholder=\"Must be more than 2 characters long\" />\n                </Form.Item>\n\n                <Form.Item {...tailLayout}>\n                    <Button type=\"primary\" htmlType=\"submit\" size=\"large\">\n                        Search\n                    </Button>\n                </Form.Item>\n            </Form>\n            {searchResult && (\n                <Card title=\"Search result\">\n                    <FriendCard\n                        {...props}\n                        friend={searchResult}\n                        realFriends={realFriends}\n                        invitingFriends={invitingFriends}\n                        invitedFriends={invitedFriends}\n                    />\n                </Card>\n            )}\n        </Modal>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        searchResult: state.friendSearchResult,\n    }\n}\n\nconst mapDispatchToProps = (dispatch: any) => {\n    return {\n        setFriendSearchResult: data =>\n            dispatch(actions.setFriendSearchResult(data)),\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(AddFriends)\n","import React from 'react'\nimport { withRouter } from 'react-router-dom'\n\nimport FriendCard from '../../components/FriendCard'\n\nconst pendingFriends = props => {\n    const { realFriends, invitedFriends, invitingFriends } = props\n    return (\n        <>\n            {invitingFriends.length > 0 && (\n                <>\n                    <h2>People invited me to be friends</h2>\n                    {invitingFriends.map(friend => (\n                        <FriendCard\n                            key={friend._id}\n                            {...props}\n                            friend={friend}\n                            realFriends={realFriends}\n                            invitingFriends={invitingFriends}\n                            invitedFriends={invitedFriends}\n                        />\n                    ))}\n                </>\n            )}\n\n            {invitedFriends.length > 0 && (\n                <>\n                    <h2>I invited these people</h2>\n                    {invitedFriends.map(friend => (\n                        <FriendCard\n                            key={friend._id}\n                            {...props}\n                            friend={friend}\n                            realFriends={realFriends}\n                            invitingFriends={invitingFriends}\n                            invitedFriends={invitedFriends}\n                        />\n                    ))}\n                </>\n            )}\n        </>\n    )\n}\n\nexport default withRouter(pendingFriends)\n","import React, { useState, useEffect } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport * as actions from '../../store/actions'\n\nimport FriendCard from '../../components/FriendCard'\nimport AddCard from '../../components/AddCard/AddCard'\nimport AddFriends from './AddFriends'\nimport PendingFriends from './PendingFriends'\nimport Tabs from 'antd/es/tabs'\nimport Empty from 'antd/es/empty'\nimport Badge from 'antd/es/badge'\n\nconst Friends = props => {\n    const [addFriendOpen, setAddFriendOpen] = useState()\n\n    useEffect(() => {\n        props.setPageTitle({ main: 'Friends', sub: '' })\n    }, [])\n\n    const { account, friendData } = props\n    if (!account._id) return null\n    const realFriends = [],\n        invitedFriends = [],\n        invitingFriends = []\n\n    if (account.friends) {\n        for (let friend of account.friends) {\n            const fullFriend = { ...friendData[friend.friend], ...friend }\n            if (fullFriend) {\n                if (fullFriend.status === 'friend') realFriends.push(fullFriend)\n                else if (fullFriend.status === 'invited')\n                    invitedFriends.push(fullFriend)\n                else if (fullFriend.status === 'inviting')\n                    invitingFriends.push(fullFriend)\n            }\n        }\n    }\n    const confirmedFriends =\n        realFriends.length > 0 ? (\n            realFriends.map(friend => (\n                <FriendCard\n                    key={friend._id}\n                    {...props}\n                    friend={friend}\n                    realFriends={realFriends}\n                    invitingFriends={invitingFriends}\n                    invitedFriends={invitedFriends}\n                />\n            ))\n        ) : (\n            <Empty\n                image=\"https://websiter.s3.us-east-2.amazonaws.com/image+4.jpg\"\n                imageStyle={{ height: '250px', marginTop: '50px' }}\n                description={false}\n            />\n        )\n\n    return (\n        <>\n            <AddCard\n                title=\"Add friend\"\n                sub=\"Find by nickname\"\n                action={() => setAddFriendOpen(true)}\n            />\n            {invitedFriends.length > 0 || invitingFriends.length > 0 ? (\n                <Tabs>\n                    <Tabs.TabPane key=\"confirmed\" tab=\"Confrmed\">\n                        {confirmedFriends}\n                    </Tabs.TabPane>\n\n                    <Tabs.TabPane\n                        tab={\n                            <Badge\n                                count={invitingFriends.length}\n                                offset={[10, 0]}\n                            >\n                                Pending\n                            </Badge>\n                        }\n                        key=\"pending\"\n                    >\n                        <PendingFriends\n                            realFriends={realFriends}\n                            invitedFriends={invitedFriends}\n                            invitingFriends={invitingFriends}\n                        />\n                    </Tabs.TabPane>\n                </Tabs>\n            ) : (\n                confirmedFriends\n            )}\n            <AddFriends\n                addFriendOpen={addFriendOpen}\n                setAddFriendOpen={setAddFriendOpen}\n                realFriends={realFriends}\n                invitedFriends={invitedFriends}\n                invitingFriends={invitingFriends}\n                account={account}\n            />\n        </>\n    )\n}\nconst mapStateToProps = state => {\n    return {\n        account: state.account,\n        friendData: state.friendData,\n    }\n}\n\nconst mapDispatchToProps = (dispatch: any) => {\n    return {\n        setPageTitle: title => dispatch(actions.setPageTitle(title)),\n    }\n}\n\nexport default withRouter(\n    connect(\n        mapStateToProps,\n        mapDispatchToProps\n    )(Friends)\n)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport * as actions from '../../store/actions'\nimport PageHeader from 'antd/es/page-header'\nimport Form from 'antd/es/form'\nimport Button from 'antd/es/button'\nimport Input from 'antd/es/input'\n\nimport { withRouter } from 'react-router-dom'\nimport Card from 'antd/es/card'\nimport Upload from 'antd/es/upload'\nimport * as classes from './Account.module.css'\n\nimport LoadingOutlined from '@ant-design/icons/LoadingOutlined'\nimport PlusOutlined from '@ant-design/icons/PlusOutlined'\n\nimport { uploadFile } from '../../utils/uploadFile'\nimport Avatar from 'antd/es/avatar'\nimport getAvatar from '../../utils/getAvatar'\nimport Modal from 'antd/es/modal'\nimport { accountNameRules } from '../../constants/fieldRules'\nimport * as wsActions from '../../websocketActions'\nimport message from 'antd/es/message'\nimport Dropdown from 'antd/es/dropdown'\nimport Menu from 'antd/es/menu'\n\nconst Account = props => {\n    const [deleteVisible, setDeleteVisible] = useState()\n    const [deleteField, setDeleteField] = useState('')\n    const { account } = props\n\n    useEffect(() => {\n        props.setPageTitle({ main: 'Account', sub: '' })\n    }, [])\n\n    const loading = false\n\n    const layout = {\n        labelCol: { span: 8 },\n        wrapperCol: { span: 16 },\n    }\n    const tailLayout = {\n        wrapperCol: { offset: 8, span: 0 },\n    }\n    return account && account.name ? (\n        <Card>\n            <Upload\n                name=\"avatar\"\n                listType=\"picture-card\"\n                className={classes.Avatar}\n                showUploadList={false}\n                customRequest={({ file }) => {\n                    uploadFile(file, 800, 'avatar', () => {\n                        props.increaseAvatarV()\n                    })\n                }}\n            >\n                {account.image ? (\n                    <Avatar\n                        src={getAvatar(account._id, account.image)}\n                        size={150}\n                        style={{ margin: '25px' }}\n                    />\n                ) : (\n                    <div>\n                        {loading ? <LoadingOutlined /> : <PlusOutlined />}\n                        <div className=\"ant-upload-text\">Upload</div>\n                    </div>\n                )}\n            </Upload>\n            <Form\n                name=\"dynamic_form_nest_item\"\n                onFinish={value => wsActions.editAccount(value, account._id)}\n                autoComplete=\"off\"\n                {...layout}\n                initialValues={{\n                    name: account.name,\n                    nickname: account._id,\n                }}\n            >\n                <Form.Item label=\"Name\" name=\"name\" rules={accountNameRules}>\n                    <Input placeholder=\"Must be more than 1 character long\" />\n                </Form.Item>\n                <Form.Item label=\"Nickname\" name=\"nickname\">\n                    <Input disabled={true} />\n                </Form.Item>\n                <Form.Item\n                    {...tailLayout}\n                    style={{\n                        flex: 'none',\n                        maxWidth: ' 100%',\n                        overflow: 'hidden',\n                    }}\n                >\n                    <Dropdown.Button\n                        type=\"primary\"\n                        htmlType=\"submit\"\n                        size=\"large\"\n                        overlay={\n                            <Menu>\n                                <Menu.Item\n                                    danger={true}\n                                    onClick={() => setDeleteVisible(true)}\n                                >\n                                    Delete account\n                                </Menu.Item>\n                            </Menu>\n                        }\n                    >\n                        Save\n                    </Dropdown.Button>\n                </Form.Item>\n            </Form>\n            <Modal\n                title=\"Delete account\"\n                visible={deleteVisible}\n                onOk={() => {\n                    if (deleteField !== account._id) {\n                        message.warning('The nickmanme is not correct.')\n                    } else {\n                        wsActions.deleteAccount(account._id)\n                    }\n                }}\n                onCancel={() => {\n                    setDeleteVisible(false)\n                    setDeleteField('')\n                }}\n            >\n                <p>\n                    Please enter your nickname and press Ok to delete your\n                    account.\n                </p>\n                <Input onChange={e => setDeleteField(e.target.value)} />\n            </Modal>\n        </Card>\n    ) : null\n}\n\nconst mapStateToProps = state => {\n    return {\n        account: state.account,\n    }\n}\n\nconst mapDispatchToProps = (dispatch: any) => {\n    return {\n        setPageTitle: title => dispatch(actions.setPageTitle(title)),\n        increaseAvatarV: () => dispatch(actions.increaseAvatarV()),\n    }\n}\n\nexport default withRouter(\n    connect(\n        mapStateToProps,\n        mapDispatchToProps\n    )(Account)\n)\n","import { webSocket } from '../containers/ConnectWebsocket/ConnectWebsocket'\n\nexport const deleteAccount = id => {\n    if (webSocket && webSocket.readyState === 1) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'deleteAccount',\n                accountId: id,\n            })\n        )\n    }\n}\n\nexport const editAccount = (value, id) => {\n    if (webSocket && webSocket.readyState === 1) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'editAccount',\n                name: value.name,\n                accountId: id,\n            })\n        )\n    }\n}\n","import React, { useEffect, useState } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport * as actions from '../../store/actions'\nimport Avatar from 'antd/es/avatar'\nimport Card from 'antd/es/card'\n\nimport friendActionButton from '../../components/FriendActionButton'\nimport FriendCard from '../../components/FriendCard'\nimport Tabs from 'antd/es/tabs'\nimport Progresses from '../Progresses/Progresses'\nimport Wallet from '../Shop/Wallet'\nimport PerkCard from '../Shop/PerkCard'\nimport getAvatar from '../../utils/getAvatar'\nimport pullData from '../../utils/pullData'\n\nconst Profile = props => {\n    const [data, setData] = useState({})\n\n    useEffect(() => {\n        const pathParts = props.history.location.pathname.split('/')\n        if (pathParts.length > 2) {\n            const profileId = pathParts[2]\n            if (props.isAuthed) {\n                props.setData({ currentProfile: profileId })\n            } else {\n                pullData(props, data, setData, { forceAuth: false }, data => {\n                    const friendData = {}\n                    for (let friend of data.friendData)\n                        friendData[friend._id] = friend\n                    const progressData = {}\n                    for (let progress of data.progressData)\n                        progressData[progress._id] = progress\n                    const groupData = {}\n                    for (let group of data.groupData)\n                        groupData[group._id] = group\n\n                    props.setData({\n                        profile: data.profile,\n                        friendData,\n                        progressData,\n                        groupData,\n                        account: {},\n                    })\n                })\n            }\n        }\n    }, [props.isAuthed, props.history.location.pathname])\n\n    const { profile, friendData, account } = props.isAuthed ? props : data\n\n    if (!profile || !profile._id) return null\n    // props.setPageTitle({ main: profile.name, sub: profile._id })\n\n    const realFriends = [],\n        invitedFriends = [],\n        invitingFriends = []\n    if (profile && profile.friends && account && account._id) {\n        for (let friend of account.friends) {\n            if (friend.status === 'friend') realFriends.push(friend)\n            else if (friend.status === 'invited') invitedFriends.push(friend)\n            else if (friend.status === 'inviting') invitingFriends.push(friend)\n        }\n    }\n    const friendActions = friendActionButton({\n        accountId: account ? account._id : '',\n        realFriends: realFriends,\n        invitedFriends: invitedFriends,\n        invitingFriends: invitingFriends,\n        _id: profile._id,\n        additionalButton: null,\n        asText: true,\n    })\n    return (\n        <Card>\n            <div style={{ textAlign: 'center', marginBottom: '50px' }}>\n                <Avatar\n                    src={getAvatar(profile._is, profile.image)}\n                    size={200}\n                />\n                <h1>{profile.name}</h1>\n                <h3>({profile._id})</h3>\n                {friendActions}\n            </div>\n            <Tabs>\n                <Tabs.TabPane tab=\"Progresses\" key={2}>\n                    <Progresses fromProfile={true} />\n                </Tabs.TabPane>\n                <Tabs.TabPane tab=\"Friends\" key={1}>\n                    {profile.friends\n                        .filter(friend => friend.status === 'friend')\n                        .map(friend => {\n                            const oneFriendData = {\n                                ...friendData[friend.friend],\n                                ...friend.friend,\n                            }\n\n                            return (\n                                <FriendCard\n                                    key={oneFriendData._id}\n                                    {...props}\n                                    account={account}\n                                    friend={oneFriendData}\n                                    realFriends={realFriends}\n                                    invitingFriends={invitingFriends}\n                                    invitedFriends={invitedFriends}\n                                />\n                            )\n                        })}\n                </Tabs.TabPane>\n                <Tabs.TabPane tab=\"Goals\" key={3}>\n                    {profile.goals.map((goal, index) => (\n                        <PerkCard\n                            key={index}\n                            perk={goal}\n                            perkId={goal.itemId}\n                            owner={profile}\n                            account={account || {}}\n                            setEditedPerk={() => {}}\n                            setEditPerkOpen={() => {}}\n                            onlyBuy={true}\n                            mode=\"goals\"\n                        />\n                    ))}\n                </Tabs.TabPane>\n                <Tabs.TabPane tab=\"Shop\" key={4}>\n                    {profile.perks &&\n                        profile.perks.map((perk, index) => (\n                            <PerkCard\n                                key={index}\n                                perk={perk}\n                                perkId={perk.perkId}\n                                owner={profile}\n                                account={account || {}}\n                                onlyBuy={true}\n                                mode=\"shop\"\n                            />\n                        ))}\n                </Tabs.TabPane>\n                <Tabs.TabPane tab=\"Wallet\" key={5}>\n                    <Wallet pulledProfile={profile} account={profile} />\n                </Tabs.TabPane>\n                <Tabs.TabPane tab=\"Wishlist\" key={6}>\n                    {profile.wishlist.map((item, index) => (\n                        <PerkCard\n                            key={index}\n                            perk={item}\n                            perkId={item.itemId}\n                            owner={profile}\n                            account={account || {}}\n                            setEditedPerk={() => {}}\n                            setEditPerkOpen={() => {}}\n                            onlyBuy={true}\n                            mode=\"wishlist\"\n                        />\n                    ))}\n                </Tabs.TabPane>\n            </Tabs>\n        </Card>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        account: state.account,\n        profile: state.profile,\n        isAuthed: state.isAuthed,\n        friendData: state.friendData,\n    }\n}\n\nconst mapDispatchToProps = (dispatch: any) => {\n    return {\n        setData: data => dispatch(actions.setData(data)),\n        setPageTitle: title => dispatch(actions.setPageTitle(title)),\n        tryAuth: (props, forceAuth) =>\n            dispatch(actions.tryAuth(props, forceAuth)),\n    }\n}\n\nexport default withRouter(\n    connect(\n        mapStateToProps,\n        mapDispatchToProps\n    )(Profile)\n)\n","import React from 'react'\nimport { connect } from 'react-redux'\n\nimport Button from 'antd/es/button'\nimport message from 'antd/es/message'\n\nimport Input from 'antd/es/input'\nimport PageHeader from 'antd/es/page-header'\nimport Form from 'antd/es/form'\nimport { withRouter } from 'react-router-dom'\nimport axios from 'axios'\nimport { nicknameRules, accountNameRules } from '../../constants/fieldRules'\nimport * as actions from '../../store/actions'\n\nconst ActivateAccount = props => {\n    if (!props.isAuthed) props.history.push('/logout')\n    const onFinish = value => {\n        axios\n            .post('/api/activate-account', {\n                ...value,\n            })\n            .then(res => {\n                if (res.data.success) {\n                    message.success('Your account has been activated!')\n                    props.setAccountActivated(false)\n                    props.history.push('/account')\n                } else {\n                    if (res.data.nicknameNotUnique) {\n                        message.warning(\n                            'The nickname is taken. Choose another nickname please.'\n                        )\n                    }\n                    if (res.data.errorCode) {\n                        message.error(\n                            'Something is wrong with the data. Please try one more time with new data.'\n                        )\n                    }\n                }\n            })\n            .catch(err => {})\n    }\n\n    const layout = {\n        labelCol: { span: 8 },\n        wrapperCol: { span: 16 },\n    }\n    const tailLayout = {\n        wrapperCol: { offset: 8, span: 16 },\n    }\n\n    return (\n        <>\n            <PageHeader\n                className=\"site-page-header\"\n                title=\"Activate your account\"\n                backIcon={false}\n            />\n            <Form\n                name=\"dynamic_form_nest_item\"\n                onFinish={onFinish}\n                autoComplete=\"off\"\n                {...layout}\n            >\n                <Form.Item label=\"Name\" name=\"name\" rules={accountNameRules}>\n                    <Input placeholder=\"Must be more than 1 character long\" />\n                </Form.Item>\n                <Form.Item\n                    label=\"Nickname\"\n                    name=\"nickname\"\n                    rules={nicknameRules}\n                >\n                    <Input placeholder=\"Must be more than 1 character long\" />\n                </Form.Item>\n                <Form.Item {...tailLayout}>\n                    <Button type=\"primary\" htmlType=\"submit\" size=\"large\">\n                        Save\n                    </Button>\n                </Form.Item>\n            </Form>\n        </>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        isAuthed: state.isAuthed,\n        user: state.user,\n        account: state.account,\n    }\n}\n\nconst mapDispatchToProps = (dispatch: any) => {\n    return {\n        setPageTitle: title => dispatch(actions.setPageTitle(title)),\n        setAccountActivated: value =>\n            dispatch(actions.setAccountActivated(value)),\n    }\n}\n\nexport default withRouter(\n    connect(\n        mapStateToProps,\n        mapDispatchToProps\n    )(ActivateAccount)\n)\n","import React, { useEffect, useState } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport * as actions from '../../store/actions'\nimport Card from 'antd/es/card'\nimport pullData from '../../utils/pullData'\nimport Descriptions from 'antd/es/descriptions'\nimport Post from '../../components/Post/Post'\nimport UserButton from '../../components/UserButton/UserButton'\nimport ImageCarousel from '../../components/UI/ImageCarousel/ImageCarousel'\n\nconst { Item } = Descriptions\n\nconst Perk = props => {\n    const [data, setData] = useState({})\n    const { account } = props\n    useEffect(() => {\n        const pathParts = props.history.location.pathname.split('/')\n        if (pathParts.length > 3) {\n            const accountId = pathParts[2]\n            if (props.isAuthed && account._id === accountId) {\n                const perk = account.perks.find(\n                    item => item.perkId === pathParts[3]\n                )\n                setData({ profile: account, perk })\n            } else {\n                pullData(props, data, setData, { forceAuth: false }, data => {\n                    const friendData = {}\n                    for (let friend of data.friendData)\n                        friendData[friend._id] = friend\n\n                    props.setData({\n                        post: { [data.post._id]: data.post },\n                        friendData,\n                    })\n                })\n            }\n        }\n    }, [props.isAuthed])\n    if (!data.perk) return null\n    const { perk, profile } = data\n    props.setData({ currentPosts: perk.post })\n    if (perk) {\n        props.setPageTitle({ main: perk.name, sub: profile._id })\n    }\n\n    const getAccounts = items => {\n        if (profile && props.friendData) {\n            return items.map(item => <UserButton id={item} />)\n        } else return items\n    }\n\n    return perk ? (\n        <Card\n            title={\n                <span>\n                    Item from <UserButton id={profile._id} /> shop\n                </span>\n            }\n            bordered={false}\n        >\n            <ImageCarousel images={perk.images} />\n\n            <h1>{perk.name}</h1>\n            <p style={{ whiteSpace: 'pre-wrap' }}>{perk.description}</p>\n\n            <Descriptions\n                title=\"Goal description\"\n                bordered\n                column={{ xxl: 4, xl: 3, lg: 3, md: 3, sm: 2, xs: 1 }}\n            >\n                <Item label=\"Available for\">{getAccounts(perk.users)}</Item>\n                <Item label=\"Price\">{perk.price}</Item>\n            </Descriptions>\n            <Post\n                noStartMessage={true}\n                post={props.post[perk.post]}\n                account={props.account}\n                friendData={props.friendData}\n                showReplies={true}\n            />\n        </Card>\n    ) : null\n}\nconst mapStateToProps = state => {\n    return {\n        isAuthed: state.isAuthed,\n        account: state.account,\n        post: state.post,\n        friendData: state.friendData,\n    }\n}\n\nconst mapDispatchToProps = (dispatch: any) => {\n    return {\n        setData: data => {\n            dispatch(actions.setData(data))\n        },\n        setPageTitle: title => dispatch(actions.setPageTitle(title)),\n    }\n}\n\nexport default withRouter(\n    connect(\n        mapStateToProps,\n        mapDispatchToProps\n    )(Perk)\n)\n","import React, { useEffect, useState } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport * as actions from '../../store/actions'\nimport Card from 'antd/es/card'\nimport pullData from '../../utils/pullData'\nimport Post from '../../components/Post/Post'\nimport ImageCarousel from '../../components/UI/ImageCarousel/ImageCarousel'\nimport UserButton from '../../components/UserButton/UserButton'\n\nconst WishlistItem = props => {\n    const [data, setData] = useState({})\n    const { account } = props\n    useEffect(() => {\n        const pathParts = props.history.location.pathname.split('/')\n        if (pathParts.length > 3) {\n            const accountId = pathParts[2]\n            if (props.isAuthed && account._id === accountId) {\n                const wishlistItem = account.wishlist.find(\n                    item => item.itemId === pathParts[3]\n                )\n                setData({ profile: account, wishlistItem })\n            } else {\n                pullData(props, data, setData, { forceAuth: false }, data => {\n                    const friendData = {}\n                    for (let friend of data.friendData)\n                        friendData[friend._id] = friend\n\n                    props.setData({\n                        post: { [data.post._id]: data.post },\n                        friendData,\n                    })\n                })\n            }\n        }\n    }, [props.isAuthed])\n    if (!data.wishlistItem) return null\n    const { wishlistItem, profile } = data\n    props.setData({ currentPosts: wishlistItem.post })\n    if (wishlistItem) {\n        props.setPageTitle({ main: wishlistItem.name, sub: profile._id })\n    }\n    return wishlistItem ? (\n        <Card\n            title={\n                <span>\n                    <UserButton id={profile._id} /> wishlist\n                </span>\n            }\n            bordered={false}\n        >\n            <ImageCarousel images={wishlistItem.images} />\n\n            <h1>{wishlistItem.name}</h1>\n            <p style={{ whiteSpace: 'pre-wrap' }}>{wishlistItem.description}</p>\n            <Post\n                noStartMessage={true}\n                post={props.post[wishlistItem.post]}\n                account={props.account}\n                friendData={props.friendData}\n                showReplies={true}\n            />\n        </Card>\n    ) : null\n}\nconst mapStateToProps = state => {\n    return {\n        isAuthed: state.isAuthed,\n        account: state.account,\n        post: state.post,\n        friendData: state.friendData,\n    }\n}\n\nconst mapDispatchToProps = (dispatch: any) => {\n    return {\n        setData: data => {\n            dispatch(actions.setData(data))\n        },\n        setPageTitle: title => dispatch(actions.setPageTitle(title)),\n    }\n}\n\nexport default withRouter(\n    connect(\n        mapStateToProps,\n        mapDispatchToProps\n    )(WishlistItem)\n)\n","import React, { useEffect } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport * as actions from '../../store/actions'\nimport WishlistAndPerks from '../Shop/WishlistAndPerks'\n\nconst Wishlist = props => {\n    useEffect(() => {\n        props.setPageTitle({ main: 'Wishlist', sub: '' })\n    }, [])\n\n    return (\n        <>\n            {props.account._id ? (\n                <WishlistAndPerks mode=\"wishlist\" account={props.account} />\n            ) : (\n                <span />\n            )}\n        </>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        account: state.account,\n    }\n}\n\nconst mapDispatchToProps = (dispatch: any) => {\n    return {\n        setPageTitle: title => dispatch(actions.setPageTitle(title)),\n    }\n}\n\nexport default withRouter(\n    connect(\n        mapStateToProps,\n        mapDispatchToProps\n    )(Wishlist)\n)\n","import React, { useEffect, useState } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport * as actions from '../../store/actions'\n\nimport Modal from 'antd/es/modal'\nimport Button from 'antd/es/button'\nimport Card from 'antd/es/card'\nimport Post from '../../components/Post/Post'\nimport AddPost from '../../components/Post/AddPost'\nimport Tabs from 'antd/es/tabs'\nimport AddCard from '../../components/AddCard/AddCard'\nimport ProgressCard from '../Progresses/ProgressCard'\nimport AddProgress from '../Progresses/AddProgress'\n\nconst Group = props => {\n    const [state, setState] = useState({})\n    const [startProgressVisible, setStartProgressVisible] = useState(false)\n\n    const groupId = props.history.location.pathname.split('/')[2]\n    useEffect(() => {\n        props.setData({ currentGroup: groupId })\n    }, [props.isAuthed])\n\n    const { group, account, friendData, posts, progressData } = props\n\n    if (!group._id) return null\n    props.setData({ currentPosts: group.posts })\n\n    props.setPageTitle({ main: group.name, sub: group.worker })\n\n    const loadedProgresses = group.progresses\n        .filter(item => progressData[item])\n        .map(item => progressData[item])\n\n    const editGoal = (\n        <Modal\n            title=\"Add goal\"\n            visible={startProgressVisible}\n            maskClosable\n            closable\n            onCancel={() => setStartProgressVisible(false)}\n            width=\"90%\"\n            footer={\n                <Button\n                    key=\"back\"\n                    onClick={() => setStartProgressVisible(false)}\n                >\n                    Close\n                </Button>\n            }\n            destroyOnClose={true}\n        >\n            <AddProgress\n                setStartProgressVisible={setStartProgressVisible}\n                account={account}\n                friendData={props.friendData}\n                inGroup={group._id}\n            />\n        </Modal>\n    )\n    return friendData ? (\n        <>\n            <Tabs>\n                <Tabs.TabPane tab=\"Posts\" key=\"posts\">\n                    <AddPost\n                        parent={groupId}\n                        account={account}\n                        parentType=\"progress\"\n                        // onSend={() => setEditingMessage('')}\n                    />\n                    {group.posts.map(postId => {\n                        if (posts[postId]) {\n                            const post = posts[postId]\n                            return (\n                                <Card>\n                                    <Post\n                                        friendData={friendData}\n                                        account={account}\n                                        post={post}\n                                    />\n                                </Card>\n                            )\n                        } else return null\n                    })}\n                </Tabs.TabPane>\n                <Tabs.TabPane tab=\"Progresses\" key=\"progresses\">\n                    <AddCard\n                        title=\"Start a new progress\"\n                        sub=\"Rich your goals or help others!\"\n                        action={() => {\n                            setStartProgressVisible(true)\n                        }}\n                    />\n                    {loadedProgresses.map((progress, index) => (\n                        <ProgressCard key={index} progress={progress} />\n                    ))}\n                    {editGoal}\n                </Tabs.TabPane>\n            </Tabs>\n\n            <Modal\n                visible={state.previewImage}\n                footer={null}\n                onCancel={() => setState({ ...state, previewImage: '' })}\n            >\n                <img\n                    alt=\"example\"\n                    style={{ width: '100%' }}\n                    src={state.previewImage}\n                />\n            </Modal>\n        </>\n    ) : null\n}\nconst mapStateToProps = state => {\n    return {\n        isAuthed: state.isAuthed,\n        account: state.account,\n        posts: state.post,\n        group: state.group,\n        friendData: state.friendData,\n        progressData: state.progressData,\n    }\n}\n\nconst mapDispatchToProps = (dispatch: any) => {\n    return {\n        setData: data => {\n            dispatch(actions.setData(data))\n        },\n        setPageTitle: title => dispatch(actions.setPageTitle(title)),\n    }\n}\n\nexport default withRouter(\n    connect(\n        mapStateToProps,\n        mapDispatchToProps\n    )(Group)\n)\n","import React from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport * as actions from '../../store/actions'\nimport isEqual from 'lodash.isequal'\nconst NotificationsTracker = props => {\n    const { account, friendData, progressData, groupData } = props\n\n    const sortNotifiacations = (a, b) =>\n        new Date(a.date).getTime() < new Date(b.date).getTime() ? 1 : -1\n\n    if (!account._id) return null\n\n    let lastNotifications = []\n    for (let progress of account.progresses) {\n        if (progressData[progress])\n            lastNotifications = [\n                ...lastNotifications,\n                ...progressData[progress].notifications,\n            ]\n    }\n\n    for (let group of account.groups) {\n        if (groupData[group])\n            lastNotifications = [\n                ...lastNotifications,\n                ...groupData[group].notifications,\n            ]\n    }\n\n    for (let friend of account.friends) {\n        if (friendData[friend.friend] && friend.status === 'friend')\n            lastNotifications = [\n                ...lastNotifications,\n                ...friendData[friend.friend].notifications,\n            ]\n    }\n    const filterSameNot = (res, not, index, arr) => {\n        if (!res.find(item => item.notId === not.notId)) {\n            res.push(not)\n        }\n        return res\n    }\n    lastNotifications = lastNotifications.reduce(filterSameNot, [])\n\n    lastNotifications = lastNotifications.sort(sortNotifiacations).slice(0, 100)\n\n    lastNotifications = [\n        ...lastNotifications,\n        ...account.myNotifications,\n    ].filter(item => item.code !== 'add post')\n\n    lastNotifications = lastNotifications.reduce(filterSameNot, [])\n\n    if (!isEqual(lastNotifications, props.lastNotifications)) {\n        props.setData({ lastNotifications })\n    }\n\n    return <span />\n}\nconst mapStateToProps = state => {\n    return {\n        isAuthed: state.isAuthed,\n        account: state.account,\n        statePosts: state.post,\n        progress: state.progress,\n        friendData: state.friendData,\n        progressData: state.progressData,\n        groupData: state.groupData,\n        lastNotifications: state.lastNotifications,\n    }\n}\n\nconst mapDispatchToProps = (dispatch: any) => {\n    return {\n        setData: data => {\n            dispatch(actions.setData(data))\n        },\n        setPageTitle: title => dispatch(actions.setPageTitle(title)),\n    }\n}\n\nexport default withRouter(\n    connect(\n        mapStateToProps,\n        mapDispatchToProps\n    )(NotificationsTracker)\n)\n","import React, { useEffect } from 'react'\nimport { Route, Switch, withRouter, Redirect } from 'react-router-dom'\n\nimport Auth from './containers/Auth/Auth'\nimport AuthTest from './containers/Auth/AuthTest'\nimport './components/UI/loadStyles'\nimport AccountLayout from './components/Layout/Layout'\nimport Goals from './containers/Goals/Goals'\nimport Goal from './containers/Goals/Goal'\nimport Progresses from './containers/Progresses/Progresses'\nimport Progress from './containers/Progress/Progress'\nimport Shop from './containers/Shop/Shop'\nimport Dashboard from './containers/Dashboard/Dashboard'\n\nimport Friends from './containers/Friends/Friends'\nimport Account from './containers/Account/Account'\nimport Profile from './containers/Profile/Profile'\n\nimport ActivateAccount from './containers/ActivateAccount/ActivateAccount'\nimport Cookies from 'universal-cookie'\nimport Perk from './containers/Shop/Perk'\n\nimport WishlistItem from './containers/Wishlist/WishlistItem'\nimport Wishlist from './containers/Wishlist/Wishlist'\nimport { connect } from 'react-redux'\nimport * as actions from './store/actions'\nimport ConnectWebsocket from './containers/ConnectWebsocket/ConnectWebsocket'\nimport Group from './containers/Group/Group'\nimport NotificationsTracker from './containers/Dashboard/NotificationsTracker'\n\nconst cookies = new Cookies()\n\nconst App = props => {\n    const { isAuthed } = props\n    useEffect(() => {\n        props.tryAuth(props)\n    }, [])\n\n    const redirectTo = cookies.get('redirectto')\n\n    if (redirectTo) {\n        cookies.remove('redirectto', {\n            path: '/',\n        })\n    }\n\n    const Logout = () => {\n        props.logout()\n        return <Redirect to=\"/login\" />\n    }\n\n    let routes = (\n        <Switch>\n            <Route path=\"/goals\" exact component={Goals} />\n            <Route path=\"/goals\" component={Goal} />\n\n            <Route path=\"/progresses\" exact component={Progresses} />\n            <Route path=\"/progresses\" component={Progress} />\n            <Route path=\"/groups\" component={Group} />\n\n            <Route path=\"/profile\" component={Profile} />\n\n            <Route path=\"/friends\" exact component={Friends} />\n\n            <Route path=\"/account\" exact component={Account} />\n            <Route path=\"/dashboard\" exact component={Dashboard} />\n\n            <Route path=\"/shop\" exact component={Shop} />\n            <Route path=\"/shop\" component={Perk} />\n            <Route path=\"/wishlist\" exact component={Wishlist} />\n            <Route path=\"/wishlist\" component={WishlistItem} />\n            {!isAuthed && <Route path=\"/login\" exact component={Auth} />}\n            <Route path=\"/logout\" exact component={Logout} />\n\n            <Route path=\"/activate-account\" exact component={ActivateAccount} />\n\n            {process.env.NODE_ENV === 'development' && !isAuthed && (\n                <Route path=\"/logintest\" exact component={AuthTest} />\n            )}\n            {isAuthed ? <Redirect to=\"/dashboard\" /> : <Redirect to=\"/login\" />}\n        </Switch>\n    )\n\n    if (props.accountNotActive) {\n        routes = (\n            <Switch>\n                {!isAuthed && <Route path=\"/login\" exact component={Auth} />}\n                <Route path=\"/logout\" exact component={Logout} />\n\n                <Route\n                    path=\"/activate-account\"\n                    exact\n                    component={ActivateAccount}\n                />\n\n                {process.env.NODE_ENV === 'development' && !isAuthed && (\n                    <Route path=\"/logintest\" exact component={AuthTest} />\n                )}\n                {isAuthed ? (\n                    <Redirect to=\"/activate-account\" />\n                ) : (\n                    <Redirect to=\"/login\" />\n                )}\n            </Switch>\n        )\n    }\n\n    return redirectTo ? (\n        <Redirect to={redirectTo} />\n    ) : (\n        <>\n            <div style={{ height: '100%' }}>\n                <AccountLayout>{routes}</AccountLayout>\n                {isAuthed && <ConnectWebsocket />}\n                {isAuthed && <NotificationsTracker />}\n            </div>\n            {/* {this.props.loading && <Spinner cover />} */}\n        </>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        isAuthed: state.isAuthed,\n        user: state.user,\n        account: state.account,\n        accountNotActive: state.accountNotActive,\n    }\n}\n\nconst mapDispatchToProps = (dispatch: any) => {\n    return {\n        tryAuth: (props, forceAuth) =>\n            dispatch(actions.tryAuth(props, forceAuth)),\n        logout: () => dispatch(actions.logout()),\n    }\n}\n\nexport default withRouter(\n    connect(\n        mapStateToProps,\n        mapDispatchToProps\n    )(App)\n)\n","import { createReducer } from '@reduxjs/toolkit'\n\nexport const initialState = {\n    isAuthed: false,\n    user: null,\n    currentAccount: '',\n    account: {},\n    friendData: {},\n    transactionData: {},\n    progressData: {},\n    currentProfile: '',\n    profile: {},\n    currentProgress: '',\n    currentGroup: '',\n    currentPosts: [],\n    progress: {},\n    post: {},\n    postData: {},\n    group: {},\n    groupData: {},\n    pageTitle: {},\n    lastUrl: '',\n    friendSearchResult: null,\n    accountNotActive: false,\n    lastNotifications: [],\n}\n\nconst reducer = createReducer(initialState, {\n    SET_DATA: (state: Object, action: Object) => {\n        if (action.data) {\n            for (let key of [\n                'user',\n                'account',\n                'isAuthed',\n                'currentAccount',\n                'currentProfile',\n                'currentPosts',\n                'currentGroup',\n                'profile',\n                'group',\n                'currentProgress',\n                'progress',\n                'lastNotifications',\n            ]) {\n                if (typeof action.data[key] !== 'undefined') {\n                    state[key] = action.data[key]\n                }\n            }\n            for (let key of [\n                'friendData',\n                'progressData',\n                'post',\n                'postData',\n                'groupData',\n                'transactionData',\n            ]) {\n                if (typeof action.data[key] !== 'undefined') {\n                    for (let attr in action.data[key]) {\n                        if (action.data[key][attr]) {\n                            state[key][attr] = action.data[key][attr]\n                        }\n                    }\n                }\n            }\n        }\n        if (state.user) {\n            if (state.user.currentAccount) {\n                state.currentAccount = state.user.currentAccount\n                state.accountNotActive = false\n            } else if (state.user.myAccount) {\n                state.currentAccount = state.user.myAccount\n                state.accountNotActive = false\n            } else {\n                state.accountNotActive = true\n            }\n        }\n    },\n    REMOVE_DATA: (state: Object, action: Object) => {\n        if (action.data) {\n            for (let key of [\n                'user',\n                'account',\n                'profile',\n                'progress',\n                'group',\n            ]) {\n                for (let item of action.data[key]) {\n                    if (state[key]._id === item) {\n                        state[key] = {}\n                    }\n                }\n            }\n            for (let key of [\n                'post',\n                'friendData',\n                'progressData',\n                'postData',\n                'groupData',\n                'transactionData',\n            ]) {\n                for (let item of action.data[key]) {\n                    delete state[key][item]\n                }\n            }\n        }\n    },\n    SET_FRIEND_SEARCH_RESULT: (state: Object, action: Object) => {\n        state.friendSearchResult = action.data\n    },\n    SET_FRIENDS_DATA: (state: Object, action: Object) => {\n        if (action.data) {\n            state.account.friendsData = action.data\n        }\n        if (action.data.perk) state.perk = action.data.perk\n    },\n    SET_AVATAR_V: (state: Object, action: Object) => {\n        state.account.image = action.v\n    },\n    INCREASE_AVATAR_V: (state: Object) => {\n        state.account.image = state.account.image + 1\n    },\n    SET_IS_AUTHED: (state: Object, action: Object) => {\n        state.isAuthed = action.id\n    },\n    SET_PAGE_TITLE: (state: Object, action: Object) => {\n        state.pageTitle = action.title\n    },\n    SAVE_LAST_URL: (state: Object, action: Object) => {\n        if (action.url !== '/login' && action.url !== '/logout')\n            state.lastUrl = action.url\n    },\n    SET_ACCOUNT_ACTIVATED: (state: Object, action: Object) => {\n        state.accountNotActive = action.value\n    },\n})\n\nexport default reducer\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter } from 'react-router-dom'\nimport axios from 'axios'\nimport { Provider } from 'react-redux'\nimport { createStore, applyMiddleware } from 'redux'\nimport thunk from 'redux-thunk'\nimport { composeWithDevTools } from 'redux-devtools-extension/developmentOnly'\n\nimport './index.css'\nimport App from './App'\nimport reducer from './store/reducer/reducer'\n//import * as serviceWorker from './serviceWorker';\n\nif (process.env.NODE_ENV === 'development') {\n    axios.defaults.baseURL = 'http://my.websiter.test:5000'\n} else {\n    axios.defaults.baseURL = 'https://getreward.herokuapp.com'\n}\n// axios.defaults.withCredentials = true\n\nexport const store = createStore(\n    reducer,\n    composeWithDevTools(applyMiddleware(thunk))\n)\n\nconst app = (\n    <Provider store={store}>\n        <BrowserRouter>\n            <App />\n        </BrowserRouter>\n    </Provider>\n)\n\nconst root = document.getElementById('root')\n\nReactDOM.render(app, root)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\n//serviceWorker.unregister();\n"],"sourceRoot":""}