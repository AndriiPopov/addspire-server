(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{214:function(e,t,a){e.exports={Container:"Auth_Container__1KNy7",socialButtons:"Auth_socialButtons__2wwH9"}},341:function(e,t,a){e.exports={Messages:"Messages_Messages__1mGAj"}},360:function(e,t,a){e.exports={Avatar:"Account_Avatar__l4shx"}},373:function(e,t,a){e.exports=a(772)},402:function(e,t,a){},54:function(e,t,a){e.exports={Layout:"Layout_Layout__3t6t4",Header:"Layout_Header__3lh1Y",TopHeader:"Layout_TopHeader__3_LuK",BottomHeader:"Layout_BottomHeader__3DOBo",Main:"Layout_Main__3usmk",Button:"Layout_Button__1O5Hm",MenuButtonContiner:"Layout_MenuButtonContiner__PpulB",QuickButtonContiner:"Layout_QuickButtonContiner__4d4Lg"}},592:function(e,t){},594:function(e,t){},631:function(e,t){},632:function(e,t){},772:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(8),l=a.n(i),c=a(30),o=a(13),s=a.n(o),u=a(15),m=a(56),d=a(122),p=a(312),f=(a(402),a(43)),g=a(10),h=a(81),E=a(87),b=a(4),y=a(214),v=a.n(y),k=function(e){var t=null;if(e.icon){var a=function(e){for(var t=[],a=[];e.length>0;)if(0===(e=e.trim()).indexOf("</"))(e=e.substring(2)).indexOf("<")>0?(e=e.substring(e.indexOf("<")),a.pop()):e="";else{var n={type:(e=e.substring(e.indexOf("<"))).substring(1,e.indexOf(" ")),children:[]},r=(e=e.substring(e.indexOf(" "))).substring(0,e.indexOf(">")),i=r.indexOf("/>")>=0;for(e=e.substring(e.indexOf(">")+1).trim();r.length>0;){var l=r.substring(0,r.indexOf("=")).trim(),c=(r=r.substring(r.indexOf('"')+1)).substring(0,r.indexOf('"')).trim();r=r.substring(r.indexOf('"')+1).trim(),n[l]=c}0===a.length?t.push(n):a[a.length-1].children.push(n),i||a.push(n)}return t[0]}(e.icon);t=r.a.createElement("svg",{"data-testid":e.datatestid||"svg",height:a.height,width:a.width,viewBox:a.viewBox,className:e.className},a.children.map(function(e,t){return function e(t,a){switch(t.type){case"path":return r.a.createElement("path",{key:a,d:t.d,fill:t.fill},t.children.map(function(t,a){return e(t,a)}));case"g":return r.a.createElement("g",{key:a,fill:t.fill},t.children.map(function(t,a){return e(t,a)}));default:return}}(e,t)}))}return t},w=new E.a,O=Object(f.g)(Object(u.b)(function(e){return{lastUrl:e.lastUrl}})(function(e){var t=Object(n.useState)(!1),a=Object(g.a)(t,2),i=a[0],l=a[1],c=Object(n.useState)(!1),o=Object(g.a)(c,2),s=o[0],u=o[1];Object(n.useEffect)(function(){p()});var m="?rememberme=false";i&&(m="?rememberme=true");var d="&redirect=/login";e.lastUrl&&(d="&redirect="+e.lastUrl);var p=function(){w.get("cookies_consent")&&u(!0)},f="https://getreward.herokuapp.com/api/auth/";return console.log(s),r.a.createElement("div",{className:v.a.Container},s?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Continue with:"),r.a.createElement("div",{className:v.a.socialButtons},r.a.createElement("a",{href:f+"google/start".concat(m)},r.a.createElement(k,{icon:'<svg width="50" height="50" viewBox="0 0 24 24"><path fill="#4285F4" d="M12.24 10.285V14.4h6.806c-.275 1.765-2.056 5.174-6.806 5.174-4.095 0-7.439-3.389-7.439-7.574s3.345-7.574 7.439-7.574c2.33 0 3.891.989 4.785 1.849l3.254-3.138C18.189 1.186 15.479 0 12.24 0c-6.635 0-12 5.365-12 12s5.365 12 12 12c6.926 0 11.52-4.869 11.52-11.726 0-.788-.085-1.39-.189-1.989H12.24z"></path></svg>'}),r.a.createElement("div",null,"GOOGLE")),r.a.createElement("a",{href:f+"facebook/start".concat(m)},r.a.createElement(k,{icon:'<svg width="50" height="50" viewBox="0 0 24 24"><path fill="#1877F2" d="M23.9981 11.9991C23.9981 5.37216 18.626 0 11.9991 0C5.37216 0 0 5.37216 0 11.9991C0 17.9882 4.38789 22.9522 10.1242 23.8524V15.4676H7.07758V11.9991H10.1242V9.35553C10.1242 6.34826 11.9156 4.68714 14.6564 4.68714C15.9692 4.68714 17.3424 4.92149 17.3424 4.92149V7.87439H15.8294C14.3388 7.87439 13.8739 8.79933 13.8739 9.74824V11.9991H17.2018L16.6698 15.4676H13.8739V23.8524C19.6103 22.9522 23.9981 17.9882 23.9981 11.9991Z"></path></svg>'}),r.a.createElement("div",null,"FACEBOOK")),r.a.createElement("a",{href:f+"github/start".concat(m,"&").concat(d)},r.a.createElement(k,{icon:'<svg width="50" height="50" viewBox="0 0 16 16"><path fill="#333" d="M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z"></path></svg>'}),r.a.createElement("div",null,"GITHUB"))),r.a.createElement(h.a,{checked:i,onChange:function(){return l(!i)}},"Remember me")):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"We use cookies only for login purposes. In order to proceed you need to agree with the use of cookies."),r.a.createElement(b.a,{onClick:function(){w.set("cookies_consent","true",{path:"/",maxAge:3153e4}),p()}},"Agree"),r.a.createElement(b.a,{onClick:function(){window.open("https://websiter.dev","_self")}},"Return to the homepage")))})),j=a(11),x=a(40),C=(new E.a,a(114),a(89),a(196),a(502),a(249),a(250),a(507),a(251),a(510),a(252),a(253),a(197),a(515),a(517),a(519),a(773),a(523),a(525),a(527),a(254),a(145),a(255),a(775),a(774),a(535),a(537),a(539),a(541),a(543),a(546),a(548),a(776),a(138)),_=a(34),I=a(46),S=a(33),A=a(177),T=a(54),F=a(322),D=a.n(F),P=a(186),M=a.n(P),N=a(324),R=a.n(N),z=a(323),B=a.n(z),L=a(219),G=a.n(L),V=a(127),U=a.n(V),H=a(218),K=a.n(H),W=a(220),q=a.n(W),J=a(94),Y=function(e,t){return e?"https://websiter.s3.us-east-2.amazonaws.com/"+e+"/avatar?v="+(t||0):""},Q=C.a.Header,Z=C.a.Content,$=Object(f.g)(Object(u.b)(function(e){return{account:e.account,pageTitle:e.pageTitle,isAuthed:e.isAuthed}})(function(e){var t=e.account,a=Object(n.useState)(),i=Object(g.a)(a,2),l=i[0],c=i[1],o=function(){c(!l)},s=e.history.location.pathname.split("/")[1]||void 0,u={type:"link",size:"large",className:T.Button},m=function(e){return s===e?{ghost:!1,type:"primary"}:{}},d=function(t){return e.history.push("/"+t)},p="/activate-account"===e.history.location.pathname;return e.isAuthed?r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{className:T.Layout},r.a.createElement(Q,{className:T.Header},r.a.createElement("div",{className:T.TopHeader},r.a.createElement("div",{className:T.MenuButtonContiner},!p&&r.a.createElement(b.a,Object.assign({},u,{icon:r.a.createElement(K.a,null),onClick:o}))),r.a.createElement("div",{className:T.QuickButtonContiner},p?r.a.createElement(_.a,{title:"Logout",placement:"bottomRight",mouseEnterDelay:.3},r.a.createElement(b.a,Object.assign({},u,m("friends"),{icon:r.a.createElement(M.a,null),onClick:function(){return e.history.push("/logout")}}),"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{title:"Progresses",placement:"bottomRight",mouseEnterDelay:.3},r.a.createElement(b.a,Object.assign({},u,m("progresses"),{icon:r.a.createElement(G.a,null),onClick:function(){return d("progresses")}}))),r.a.createElement(_.a,{title:"Shop",placement:"bottomRight",mouseEnterDelay:.3},r.a.createElement(b.a,Object.assign({},u,m("shop"),{icon:r.a.createElement(q.a,null),onClick:function(){return d("shop")}}))),r.a.createElement(_.a,{title:"Friends",placement:"bottomRight",mouseEnterDelay:.3},r.a.createElement(b.a,Object.assign({},u,m("friends"),{icon:r.a.createElement(U.a,null),onClick:function(){return d("friends")}}))),r.a.createElement(_.a,{title:"Account",placement:"bottomRight",mouseEnterDelay:.3},r.a.createElement("span",{onClick:function(){return d("account")},style:{margin:"0px 10px",cursor:"pointer"}},r.a.createElement(S.a,{src:Y(t._id,t.image)})))))),r.a.createElement("div",{className:T.BottomHeader},r.a.createElement(J.a,{className:"site-page-header",onBack:function(){return e.history.goBack()},title:p?"Activate your account":e.pageTitle&&e.pageTitle.main,subTitle:e.pageTitle&&e.pageTitle.sub||""}))),r.a.createElement(Z,{className:T.Main},r.a.createElement("div",null,e.children)),!p&&r.a.createElement(A.a,{title:"Menu",closable:!0,onClose:o,visible:l,placement:"left"},r.a.createElement(I.a,{theme:"light",mode:"vertical",selectedKeys:[s],onClick:function(t){var a=t.key;e.history.push("/"+a),o()},overflowedIndicator:r.a.createElement(K.a,null)},r.a.createElement(I.a.Item,{key:"progresses",icon:r.a.createElement(G.a,null)},"Progresses"),r.a.createElement(I.a.Item,{key:"goals",icon:r.a.createElement(D.a,null)},"Goals"),r.a.createElement(I.a.Item,{key:"shop",icon:r.a.createElement(q.a,null)},"Shop"),r.a.createElement(I.a.Item,{key:"friends",icon:r.a.createElement(U.a,null)},"Friends"),r.a.createElement(I.a.Item,{key:"wishlist",icon:r.a.createElement(B.a,null)},"Wishlist"),r.a.createElement(I.a.Item,{key:"account",icon:r.a.createElement(R.a,null)},"Account"),r.a.createElement(I.a.Item,{key:"logout",icon:r.a.createElement(M.a,null)},"Logout"))))):["/login","logout"].includes(e.history.location.pathname)?e.children:r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{className:T.Layout},r.a.createElement(Q,{className:T.Header},r.a.createElement("div",{className:T.TopHeader},r.a.createElement("div",{className:T.MenuButtonContiner}),r.a.createElement("div",{className:T.QuickButtonContiner},r.a.createElement(_.a,{title:"Sign in or Sign up",placement:"bottomRight",mouseEnterDelay:.3},r.a.createElement(b.a,Object.assign({},u,m("friends"),{icon:r.a.createElement(M.a,null),onClick:function(){return e.history.push("/login")}}),"Sign in or Sign up")))),r.a.createElement("div",{className:T.BottomHeader},r.a.createElement(J.a,{className:"site-page-header",onBack:function(){return e.history.goBack()},title:e.pageTitle&&e.pageTitle.main,subTitle:e.pageTitle&&e.pageTitle.sub||""}))),r.a.createElement(Z,{className:T.Main},r.a.createElement("div",null,e.children))))})),X=a(32),ee=a(325),te=a.n(ee),ae=a(38),ne=function(e,t){if(e.data.logout&&t.history.push("/logout"),!1===e.data.success)if(e.data.errorCode)switch(e.data.errorCode){case"no account":ae.a.warning("Account is not found. Please login.");break;case"bad data":ae.a.error("Error. Please try one more time with correct data.");break;case"progress exist":ae.a.warning("This progress already exists.");break;default:ae.a.warning("Something wrong has happened... Try again!")}else ae.a.error("Something failed");else if(e.data.successCode)switch(e.data.successCode){case"avatar saved":ae.a.success("The avatar image has been updated.");break;case"success":ae.a.success("Success!");break;case"item saved":ae.a.success("Item is saved");break;case"prgress created":ae.a.success("Progress has started!");break;default:ae.a.success("Success!")}e.data.status&&"no account"===e.data.status&&t.history.push("/activate-account")},re=new E.a,ie=function(e,t){return function(a){sessionStorage.setItem("systemRefresh","0");var n=re.get("auth_token"),r=re.get("rememberme");r&&(re.remove("rememberme",{path:"/"}),"false"===r&&re.remove("auth_token",{path:"/"}));var i=te.a.decode(n);s.a.defaults.headers.post["Content-Type"]="application/json",s.a.defaults.headers.put["Content-Type"]="application/json",s.a.defaults.headers.delete["Content-Type"]="application/json",s.a.defaults.headers.common.Accept="application/json",n&&i?(s.a.defaults.headers.common["x-auth-token"]=n,s.a.defaults.headers.post["x-auth-token"]=n,s.a.defaults.headers.get["x-auth-token"]=n,s.a.defaults.headers.delete["x-auth-token"]=n,s.a.defaults.headers.put["x-auth-token"]=n,a(ce(i._id))):(a(ce(!1)),a(le(e.history.location.pathname)),t&&e.history.push("/logout"))}},le=function(e){return{type:"SAVE_LAST_URL",url:e}},ce=function(e){return{type:"SET_IS_AUTHED",id:e}},oe=function(e,t){return{type:"SET_DATA",data:e,pulledFrom:t}},se=function(e){return{type:"SET_PAGE_TITLE",title:e}},ue=a(37),me=a(7),de=function(e,t,a){"undefined"!==typeof e.isAuthed&&(t=Object(me.a)({forceAuth:!0,forceActivate:!0,pullData:!0},t||{}),e.isAuthed||e.tryAuth(e,t.forceAuth),t.pullData&&s.a.get("/api"+e.history.location.pathname).then(function(a){ne(a,e),t.forceActivate&&e.isAuthed&&"no account"===a.data.status&&e.history.push("/activate-account"),e.setData(a.data,e.history.location.pathname)}).catch(function(e){}))},pe=a(31),fe=a(52),ge=a(363),he=a(74),Ee=a(76),be=a(80),ye=a.n(be),ve=a(222),ke=a.n(ve),we=a(327),Oe=function(e,t,a,n){if(null==e)return alert("No file selected.");var r=new FileReader;r.onload=function(){var r=Object(we.a)(ke.a.mark(function r(i){return ke.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:xe(e,{width:t,height:t},function(e){je(e,"/120").then(function(e){_e(e,a,n)})});case 1:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}(),r.readAsArrayBuffer(e)},je=function(e,t,a){return a=a||(e.match(/^data:([^;]+);/)||"")[1],fetch(e).then(function(e){return e.arrayBuffer()}).then(function(e){return new File([e],t,{type:a})})},xe=function(e,t,a){if(e){var n=new FileReader;n.onload=function(e){Ce(e.target.result,t,a)},n.readAsDataURL(e)}},Ce=function(e,t,a){var n,r=new Image;r.onload=function(){var e=r.width/t.width,i=r.height/t.height,l=document.createElement("canvas"),c=l.getContext("2d");l.width=r.width,l.height=r.height,c.drawImage(r,0,0),(e>1||i>1)&&(r.width>r.height?(l.height=r.height/r.width*t.width,l.width=t.width):(l.width=r.width/r.height*t.width,l.height=t.width)),c.drawImage(l,0,0,l.width,l.height),c.drawImage(r,0,0,l.width,l.height),n=l.toDataURL(),a(n)},r.src=e},_e=function(e,t,a){return s.a.post("/api/sign-s3",{fileName:t}).then(function(t){Ie(e,t.data,a)}).catch(function(e){})},Ie=function(e,t,a){return s.a.put(t.signedRequest,e,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){a(t.url),ae.a.success("The image has been saved.")}).catch(function(e){console.log(e)})},Se=a(181),Ae=a(129),Te=a.n(Ae),Fe=a(328),De=a.n(Fe),Pe=200,Me=1e4,Ne=1e4,Re=[{required:!0,message:"Nickname is too short. Minimal length is 2.",whitespace:!0,min:2},{message:"Nickname is too long. Miximum length is ".concat(Pe,"."),whitespace:!0,max:Pe},{pattern:/^[a-zA-Z0-9_-]*$/,message:"Nickname should contain only letters, numbers, '-' and '_'."}],ze=[{required:!0,min:1,whitespace:!0,message:"Name is too short. Minimal length is 1."},{max:Pe,message:"Name is too long. Miximum length is ".concat(Pe,".")}],Be=[{required:!0,min:2,whitespace:!0,message:"Name is too short. Minimal length is 2."},{max:Pe,message:"Name is too long. Miximum length is ".concat(Pe,".")}],Le=[{max:Me,message:"Description is too long. Miximum length is ".concat(Me,".")}],Ge=[{min:1,whitespace:!0,message:"Message is too short. Minimal length is 1."},{max:Ne,message:"Message is too long. Miximum length is ".concat(Ne,".")}],Ve=[{required:!0,message:"Please input the item price."}],Ue=function(e){var t=Object(n.useState)(""),a=Object(g.a)(t,2),i=a[0],l=a[1],c=Object(n.useState)(),o=Object(g.a)(c,2),s=o[0],u=o[1],m=Object(n.useState)(),d=Object(g.a)(m,2),p=d[0],f=d[1],h=e.rewards.findIndex(function(t){return t.key===e.rewardKey});return-1===h&&e.setRewards([].concat(Object(X.a)(e.rewards),[{key:e.rewardKey,rewards:[]}])),h>=0?r.a.createElement("div",null,r.a.createElement(j.a.Item,{label:e.label,key:e.rewardKey},r.a.createElement("ol",null,e.rewards[h].rewards.map(function(t,a){return r.a.createElement("li",null,"simple"===t.mode?t.simple:"money"===t.mode?t.money+" (money)":"item"===t.mode?t.itemName:"",r.a.createElement(b.a,{type:"link",onClick:function(){f(a),u(t)}},r.a.createElement(De.a,null)),r.a.createElement(b.a,{type:"link",onClick:function(){var t=Object(X.a)(e.rewards);t[h]=Object(me.a)({},t[h],{rewards:t[h].rewards.filter(function(e,t){return t!==a})}),e.setRewards(t)},danger:!0},r.a.createElement(Te.a,null)))})),r.a.createElement(b.a,{type:"link",onClick:function(){f("new"),u({mode:"simple"})}},r.a.createElement(ye.a,null),"Add rewards")),r.a.createElement(pe.a,{visible:s,title:"new"===s?"Add new reward":"Edit reward",closable:!0,onCancel:function(){return u()},onOk:function(){var t=Object(X.a)(e.rewards),a={};"money"===s.mode?(a.money=s.money,a.mode=s.mode):a=Object(me.a)({},s,{money:void 0}),t[h]="new"===p?Object(me.a)({},t[h],{rewards:[].concat(Object(X.a)(t[h].rewards),[a])}):Object(me.a)({},t[h],{rewards:t[h].rewards.map(function(e,t){return t===p?a:e})}),e.setRewards(t),u(),f()},destroyOnClose:!0,okText:"Save"},s&&r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a.Item,{label:"Reward type"},r.a.createElement(fe.a,{placeholder:"Type",value:s.mode,onSelect:function(e){u(Object(me.a)({},s,{mode:e}))},style:{width:"100%"}},r.a.createElement(fe.a.Option,{key:"simple",value:"simple"},"Simple reward"),r.a.createElement(fe.a.Option,{key:"item",value:"item"},"Item reward"),r.a.createElement(fe.a.Option,{key:"money",value:"money"},"Money reward"))),r.a.createElement(he.a,{type:"horizontal"}),"simple"===s.mode?r.a.createElement(j.a.Item,{label:"Description",rules:[].concat(Object(X.a)(Le),[{required:!0,min:1,whitespace:!0,message:"Desription is too short. Minimal length is 1."}])},r.a.createElement(x.a.TextArea,{value:s.simple,onChange:function(e){var t=e.target.value;return u(Object(me.a)({},s,{simple:t}))},placeholder:"Explain how you will reward"})):"money"===s.mode?r.a.createElement(j.a.Item,{label:"Amount",rules:Ve},r.a.createElement(Se.a,{value:s.money,onChange:function(e){u(Object(me.a)({},s,{money:e}))}})):r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a.Item,{label:"Images"},r.a.createElement(Ee.a,{listType:"picture-card",fileList:(s.itemImages||[]).map(function(e,t){return{url:e,uid:t}}),onPreview:function(e){l(e.url)},onChange:function(e){var t=e.fileList;console.log(t),u(Object(me.a)({},s,{itemImages:t.map(function(e){return e.url})}))},customRequest:function(e){var t=e.file;Oe(t,800,void 0,function(e){u(Object(me.a)({},s,{itemImages:[].concat(Object(X.a)(s.itemImages||[]),[e])}))})}},(s.itemImages||[]).length>=8?null:r.a.createElement("div",null,r.a.createElement(ye.a,null),r.a.createElement("div",{className:"ant-upload-text"},"Upload"))),r.a.createElement(pe.a,{visible:i,footer:null,onCancel:function(){return l("")}},r.a.createElement("img",{alt:"example",style:{width:"100%"},src:i}))),r.a.createElement(j.a.Item,{label:"Name",rules:ze},r.a.createElement(x.a,{value:s.itemName,onChange:function(e){var t=e.target.value;return u(Object(me.a)({},s,{itemName:t}))}})),r.a.createElement(j.a.Item,{label:"Description",rules:Le},r.a.createElement(x.a.TextArea,{value:s.itemDescription,onChange:function(e){var t=e.target.value;return u(Object(me.a)({},s,{itemDescription:t}))}})))))):null},He=a(130),Ke=a(131),We=a(136),qe=a(132),Je=a(137),Ye=a(224),Qe=a(779),Ze=a(362),$e=function(e){function t(){return Object(He.a)(this,t),Object(We.a)(this,Object(qe.a)(t).apply(this,arguments))}return Object(Je.a)(t,e),Object(Ke.a)(t,[{key:"render",value:function(){var e=this.props;return(0,e.connectDragSource)((0,e.connectDropTarget)(e.children))}}]),t}(r.a.Component),Xe=Object(Ye.DropTarget)("DND_NODE",{drop:function(e,t){var a=t.getItem().index,n=e.index;a!==n&&(e.moveTabNode(a,n),t.getItem().index=n)}},function(e){return{connectDropTarget:e.dropTarget()}})(Object(Ye.DragSource)("DND_NODE",{beginDrag:function(e){return{id:e.id,index:e.index}}},function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})($e)),et=function(e){function t(){var e,a;Object(He.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(We.a)(this,(e=Object(qe.a)(t)).call.apply(e,[this].concat(i)))).state={order:[]},a.moveTabNode=function(e,t){var n=a.state.order.slice(),i=a.props.children;r.a.Children.forEach(i,function(e){-1===n.indexOf(e.key)&&n.push(e.key)});var l=n.indexOf(e),c=n.indexOf(t);n.splice(l,1),n.splice(c,0,e),a.setState({order:n})},a.renderTabBar=function(e,t){return r.a.createElement(t,e,function(e){return r.a.createElement(Xe,{key:e.key,index:e.key,moveTabNode:a.moveTabNode},e)})},a}return Object(Je.a)(t,e),Object(Ke.a)(t,[{key:"render",value:function(){var e=this.state.order,t=this.props.children,a=[];r.a.Children.forEach(t,function(e){a.push(e)});var n=a.slice().sort(function(t,n){var r=e.indexOf(t.key),i=e.indexOf(n.key);return-1!==r&&-1!==i?r-i:-1!==r?-1:-1!==i?1:a.indexOf(t)-a.indexOf(n)});return r.a.createElement(Qe.a,{backend:Ze.a},r.a.createElement(ue.a,Object.assign({renderTabBar:this.renderTabBar},this.props),n))}}]),t}(r.a.Component),tt=a(182),at=function(e){var t=e.goal,a=e.deleteGoal,i=Object(n.useState)(t&&t.milestones||[{name:"Milestone 1",key:"mile1"}]),l=Object(g.a)(i,2),c=l[0],o=l[1],s=Object(n.useState)("mile1"),u=Object(g.a)(s,2),m=u[0],d=u[1],p=Object(n.useState)(t&&t.images.map(function(e,t){return{url:e,uid:t}})||[]),f=Object(g.a)(p,2),h=f[0],E=f[1],y=Object(n.useState)(t&&t.withMilestones),v=Object(g.a)(y,2),k=v[0],w=v[1],O=Object(n.useState)(""),C=Object(g.a)(O,2),_=C[0],I=C[1],A=Object(n.useState)(t&&t.newTabIndex||2),T=Object(g.a)(A,2),F=T[0],D=T[1],P=e.goalId||"",M=Object(n.useState)(t&&t.rewardsGroups||[]),N=Object(g.a)(M,2),R=N[0],z=N[1],B=function(){var e=Object(X.a)(c),t="mile".concat(F);e.push({key:t,name:"New milestone"}),o(e),d(t),D(F+1)},L=function(e){var t,a=m;c.forEach(function(a,n){a.key===e&&(t=n-1)});var n=c.filter(function(t){return t.key!==e});n.length&&a===e&&(a=t>=0?n[t].key:n[0].key),o(n),d(a)},G=e.account.friendsData,V=r.a.createElement(fe.a,{mode:"multiple",style:{width:"100%"},placeholder:"Please select"},G.map(function(e){return r.a.createElement(fe.a.Option,{key:e._id},r.a.createElement(S.a,{src:"https://websiter.s3.us-east-2.amazonaws.com/"+e._id+"/avatar",size:20,style:{marginRight:"10px"}}),e.name," - (",e._id,")")})),U=j.a.useForm(),H=Object(g.a)(U,1)[0];return!e.goalId||t?r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,Object.assign({form:H,name:"dynamic_form_nest_item",onFinish:function(t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=c[Symbol.iterator]();!(n=(l=o.next()).done);n=!0){var s=l.value;a.push(Object(me.a)({},t[s.key],{key:s.key,name:s.name}))}}catch(u){r=!0,i=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}e.onFinish(Object(me.a)({},t,{images:h.map(function(e){return e.url}),milestones:c,milestonesValues:a,newTabIndex:F,rewardsGroups:R}))},autoComplete:"off",initialValues:t||{name:"New goal",mile1:{name:"Milestone 1",key:"mile1"}}},{labelCol:{span:8},wrapperCol:{span:16}},{onValuesChange:function(e){var t=function(t){var a=c.findIndex(function(e){return e.key===t});if(a>-1&&e[t].name){var n=Object(X.a)(c);n[a]=Object(me.a)({},n[a],{name:e[t].name}),o(n)}"withMilestones"===t&&w(e[t])};for(var a in e)t(a)}}),r.a.createElement(j.a.Item,{name:"images",label:"Images",valuePropName:"images",getValueFromEvent:function(e){return Array.isArray(e)?e:e&&e.fileList.map(function(e){return e.url})}},r.a.createElement(Ee.a,{listType:"picture-card",fileList:h.map(function(e,t){return Object(me.a)({},e,{uid:t})}),onPreview:function(e){I(e.url)},onChange:function(e){var t=e.fileList;return E(t)},customRequest:function(e){var t=e.file;Oe(t,800,void 0,function(e){E([].concat(Object(X.a)(h),[{url:e}]).map(function(e,t){return Object(me.a)({},e,{uid:t})}))})}},h.length>=8?null:r.a.createElement("div",null,r.a.createElement(ye.a,null),r.a.createElement("div",{className:"ant-upload-text"},"Upload")))),r.a.createElement(j.a.Item,{label:"Name",name:"name",rules:ze},r.a.createElement(x.a,null)),r.a.createElement(j.a.Item,{label:"Description",name:"description",rules:Le},r.a.createElement(x.a.TextArea,{autoSize:{minRows:4,maxRows:20},placeholder:"Write a few words about why this goal is important and how to achieve it."})),e.isGoal&&r.a.createElement(j.a.Item,{label:"Available for",name:"users"},V),r.a.createElement(j.a.Item,{label:"Experts",name:"experts"},V),r.a.createElement(j.a.Item,{label:"Supporters",name:"supporters"},V),r.a.createElement(Ue,{rewardKey:"start",label:"Start rewards",rewards:R,setRewards:z}),r.a.createElement(Ue,{rewardKey:"finish",label:"Finish rewards",rewards:R,setRewards:z}),r.a.createElement(j.a.Item,{label:"Milestones",name:"withMilestones",valuePropName:"checked"},r.a.createElement(ge.a,null)),k&&r.a.createElement(r.a.Fragment,null,r.a.createElement(he.a,null,"Milestones"),r.a.createElement(et,{tabPosition:"left",type:"editable-card",onChange:function(e){d(e)},activeKey:m||"mile1",onEdit:function(e,t){"add"===t?B(e):L(e)}},c.map(function(e){return r.a.createElement(ue.a.TabPane,{tab:e.name,key:e.key},r.a.createElement(j.a.Item,{label:"Name",name:[e.key,"name"],rules:ze},r.a.createElement(x.a,null)),r.a.createElement(j.a.Item,{label:"Description",name:[e.key,"description"],rules:Le},r.a.createElement(x.a.TextArea,{placeholder:"Write a few words about why this milestone is important and how to achieve it."})),r.a.createElement(Ue,{rewardKey:e.key,label:"Rewards",rewards:R,setRewards:z}))}))),r.a.createElement(j.a.Item,{wrapperCol:{offset:8,span:16}},r.a.createElement(b.a,{type:"primary",htmlType:"submit",size:"large"},"Save"),P&&e.isGoal&&r.a.createElement(tt.a,{title:"Are you sure you want to delete this item?",onConfirm:a,onCancel:function(){},okText:"Confirm",cancelText:"Cancel"},r.a.createElement(b.a,{type:"link",danger:!0,size:"large"},"Delete")))),r.a.createElement(pe.a,{visible:_,footer:null,onCancel:function(){return I("")}},r.a.createElement("img",{alt:"example",style:{width:"100%"},src:_}))):null},nt=Object(f.g)(Object(u.b)(function(e){return{account:e.account,isAuthed:e.isAuthed}},function(e){return{setData:function(t,a){return e(oe(t,a))},setPageTitle:function(t){return e(se(t))},tryAuth:function(t,a){return e(ie(t,a))}}})(function(e){var t=Object(n.useState)(),a=Object(g.a)(t,2),i=a[0],l=a[1],c=e.goalId,o=e.account;if(!o._id)return null;Object(n.useEffect)(function(){c&&s.a.get("/api/goals/".concat(o._id,"/").concat(c)).then(function(t){if(ne(t,e),t.data.success){var a={},n=!0,r=!1,i=void 0;try{for(var c,o=t.data.goal.milestonesValues[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var s=c.value;a[s.key]=s}}catch(m){r=!0,i=m}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}var u=Object(me.a)({},t.data.goal,a);l(u)}}).catch(function(e){})},[]);return!e.goalId||i?r.a.createElement(at,{goal:i,onFinish:function(t){s.a.post("/api/goals/add",{value:t,id:c}).then(function(t){ne(t,e),e.setData(t.data,e.history.location.pathname)}).catch(function(e){}),e.setEditGoalOpen(!1)},deleteGoal:function(){c&&s.a.post("/api/goals/delete/"+c).then(function(t){ne(t,e),e.setData(t.data,e.history.location.pathname),e.setEditGoalOpen(!1)}).catch(function(e){}),e.setEditGoalOpen(!1)},account:o,isGoal:!0,goalId:c}):null})),rt=a(14),it=a(170),lt=a.n(it),ct=a(340),ot=a.n(ct),st=Object(f.g)(function(e){var t=e.goal,a=e.owner,n=e.available,i=e.account,l=e.setEditedGoal,c=e.setEditGoalOpen,o=e.setInviteGoal;return r.a.createElement(rt.a,{type:"inner",style:{width:200,display:"inline-block",margin:"4px 8px"},cover:r.a.createElement("div",{onClick:function(){return e.history.push("/goals/"+a._id+"/"+t.goalId)},style:{backgroundImage:"url("+(t.images.length>0&&t.images[0])+")",height:200,width:200,backgroundSize:"cover",cursor:"pointer"}}),actions:[a._id===i._id&&l&&r.a.createElement(_.a,{title:"Edit"},r.a.createElement("span",{key:"1",onClick:function(){l(t.goalId),c(!0)}},r.a.createElement(lt.a,{style:{fontSize:"18px"}}))),(n||a._id===i._id)&&r.a.createElement(_.a,{title:"Start progress"},r.a.createElement("span",{key:"2",onClick:function(){return n=t.goalId,r=a._id,l=i._id,void s.a.post("/api/progresses/add",{goalId:n,ownerId:r,userId:l}).then(function(t){ne(t),e.history.push("/progresses")}).catch(function(e){});var n,r,l}},r.a.createElement(ot.a,{style:{fontSize:"18px"}}))),a._id===i._id&&o&&r.a.createElement(_.a,{title:"Invite friends"},r.a.createElement("span",{type:"link",key:"3",onClick:function(){o(t)}},r.a.createElement(U.a,{style:{fontSize:"18px"}})))]},r.a.createElement(rt.a.Meta,{title:r.a.createElement("span",{onClick:function(){return e.history.push("/goals/"+a._id+"/"+t.goalId)},style:{cursor:"pointer"}},t.name)}))}),ut=Object(f.g)(st),mt=a(134),dt=a.n(mt),pt=a(169),ft=function(e){return r.a.createElement("span",{onClick:e.action},r.a.createElement(rt.a,{type:"inner",style:{width:200,display:"inline-block",margin:"4px 8px"},hoverable:!0,cover:r.a.createElement("div",{style:{height:200,width:200,backgroundSize:"cover",display:"flex",alignItems:"center",justifyContent:"center"},onClick:e.action},r.a.createElement(dt.a,{style:{fontSize:"60px"}})),actions:[r.a.createElement(_.a,{title:"Add item"},r.a.createElement("span",{key:"3",onClick:e.action},r.a.createElement(dt.a,{style:{fontSize:"18px"}})))]},r.a.createElement(pt.a,{title:r.a.createElement("span",{onClick:e.action,style:{cursor:"pointer"}},e.title),description:"undefined"!==typeof e.sub&&e.sub})))},gt=ue.a.TabPane,ht=Object(f.g)(Object(u.b)(function(e){return{account:e.account,isAuthed:e.isAuthed,pulledFrom:e.pulledFrom}},function(e){return{setData:function(t,a){return e(oe(t,a))},setPageTitle:function(t){return e(se(t))},tryAuth:function(t,a){return e(ie(t,a))}}})(function(e){var t=Object(n.useState)(""),a=Object(g.a)(t,2),i=a[0],l=a[1],c=Object(n.useState)(!1),o=Object(g.a)(c,2),s=o[0],u=o[1],m=Object(n.useState)(!1),d=Object(g.a)(m,2),p=d[0],f=d[1];if(Object(n.useEffect)(function(){de(e,{}),e.setPageTitle({main:"Goals",sub:""})},[]),"goals"!==e.pulledFrom)return null;var h=e.account;if(!h._id)return null;var E=r.a.createElement(pe.a,{title:"Add goal",visible:s,maskClosable:!0,closable:!0,onCancel:function(){return u(!1)},width:"90%",footer:r.a.createElement(b.a,{key:"back",onClick:function(){return u(!1)}},"Close"),destroyOnClose:!0},r.a.createElement(nt,{setEditGoalOpen:u,goalId:i})),y=h&&r.a.createElement(pe.a,{title:"Invite friends to work on your goal",visible:p,maskClosable:!0,closable:!0,onCancel:function(){return f(!1)},footer:r.a.createElement(b.a,{key:"back",onClick:function(){return f(!1)}},"Close"),destroyOnClose:!0},h.friendsData&&h.friendsData.filter(function(e){return!(p.progresses&&p.progresses.find(function(t){return t.user===e._id}))}).map(function(t,a){return r.a.createElement("div",{key:a},r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return e.history.push("/profile/"+t._id)}},r.a.createElement(S.a,{src:"https://websiter.s3.us-east-2.amazonaws.com/"+t._id+"/avatar",size:20}),t.name," - (",t._id,")"),r.a.createElement(b.a,{onClick:function(){return startProgress(p.goalId,h._id,t._id)}},"Invite"))}));return h&&h.friendsData?r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{style:{background:"transparent",boxShadow:"none",margin:"0",marginTop:"-15px"}},r.a.createElement(gt,{tab:"My goals",key:"1"},r.a.createElement(ft,{action:function(){l(""),u(!0)},title:"Add goal"}),h.goals&&h.goals.map(function(e,t){return r.a.createElement(ut,{key:t,goal:e,owner:h,account:h,setEditedGoal:l,setEditGoalOpen:u,setInviteGoal:f})})),r.a.createElement(gt,{tab:"Available goals",key:"2"},h.friendsData&&[h].concat(Object(X.a)(h.friendsData)).map(function(e,t){return e.goals.map(function(a,n){return a.users.includes(h._id)||e._id===h._id?r.a.createElement(ut,{key:t+"_"+n,goal:a,owner:e,available:a.users.includes(h._id),account:h,setEditedGoal:l,setEditGoalOpen:u,setInviteGoal:f}):null})})),r.a.createElement(gt,{tab:"My friends' goals",key:"3"},h.friendsData&&h.friendsData.map(function(e,t){return e.goals.map(function(a,n){return r.a.createElement(ut,{key:t+"_"+n,goal:a,owner:e,available:a.users.includes(h._id),account:h,setEditedGoal:l,setEditGoalOpen:u,setInviteGoal:f})})}))),E,y):null})),Et=a(53),bt=Et.a.Item,yt=Object(f.g)(function(e){var t=Object(n.useState)(""),a=Object(g.a)(t,2),i=a[0],l=a[1],c=Object(n.useState)(),o=Object(g.a)(c,2),s=o[0],u=o[1],m=e.goal.rewardsGroups.find(function(t){return t.key===e.groupKey});return m?r.a.createElement(r.a.Fragment,null,r.a.createElement("ol",{style:{padding:0}},m.rewards.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(b.a,{type:"link",onClick:function(){return u(e)}},"simple"===e.mode?e.simple:"money"===e.mode?e.money:"item"===e.mode?e.itemName:""))})),r.a.createElement(pe.a,{visible:s,footer:null,onCancel:function(){return u()},title:"Reward details"},s?r.a.createElement(r.a.Fragment,null,s.itemImages&&s.itemImages.map(function(e,t){return r.a.createElement("span",{key:t,onClick:function(){return l(e)}},r.a.createElement(rt.a,{type:"inner",style:{width:200,display:"inline-block"},hoverable:!0,cover:r.a.createElement("div",{style:{backgroundImage:"url("+e+")",height:200,width:200,backgroundSize:"cover"}})}))}),r.a.createElement(Et.a,{title:"Reward description",bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},"item"===s.mode&&r.a.createElement(bt,{label:"Name"},s.itemName),"item"===s.mode&&r.a.createElement(bt,{label:"Description"},s.itemDescription),"simple"===s.mode&&r.a.createElement(bt,{label:"Description"},s.simple),"money"===s.mode&&r.a.createElement(bt,{label:"Money"},s.money))):null),r.a.createElement(pe.a,{visible:i,footer:null,onCancel:function(){return l("")}},r.a.createElement("img",{alt:"example",style:{width:"100%"},src:i}))):null}),vt=Et.a.Item,kt=Object(f.g)(Object(u.b)(function(e){return{isAuthed:e.isAuthed,goal:e.goal,profile:e.profile,pulledFrom:e.pulledFrom}},function(e){return{setData:function(t,a){return e(oe(t,a))},setPageTitle:function(t){return e(se(t))},tryAuth:function(t,a){return e(ie(t,a))}}})(function(e){var t=Object(n.useState)(""),a=Object(g.a)(t,2),i=a[0],l=a[1];if(Object(n.useEffect)(function(){de(e,{forceAuth:!1})},[]),"goals"!==e.pulledFrom)return null;var c=e.goal,o=e.profile;console.log(c),c&&e.setPageTitle({main:c.name,sub:o._id});var s;return c&&e.setTitle&&e.setTitle({main:c.name,sub:c.owner}),c?r.a.createElement(rt.a,null,c.images.map(function(e,t){return r.a.createElement("span",{key:t,onClick:function(){return l(e)}},r.a.createElement(rt.a,{type:"inner",style:{width:200,display:"inline-block"},hoverable:!0,cover:r.a.createElement("div",{style:{backgroundImage:"url("+e+")",height:200,width:200,backgroundSize:"cover"}})}))}),r.a.createElement("h1",null,c.name),r.a.createElement("p",null,c.description),r.a.createElement(Et.a,{title:"Goal details",bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},r.a.createElement(vt,{label:"Users"},(s=c.users,o&&o.friendsData?s.map(function(t,a){var n=o.friendsData.find(function(e){return e._id===t});return n?r.a.createElement("span",{key:a,style:{cursor:"pointer"},onClick:function(){return e.history.push("/profile/"+t)}},r.a.createElement(S.a,{src:"https://websiter.s3.us-east-2.amazonaws.com/"+t+"/avatar",size:20,style:{marginRight:"10px"}}),n.name," - (",t,")"):t}):s)),r.a.createElement(vt,{label:"Supporters"},c.supporters),r.a.createElement(vt,{label:"Experts"},c.experts),r.a.createElement(vt,{label:"Start reward"},r.a.createElement(yt,{groupKey:"start",goal:c})),r.a.createElement(vt,{label:"Finish reward"},r.a.createElement(yt,{groupKey:"finish",goal:c})),r.a.createElement(vt,{label:"Total price"},c.totalPrice),r.a.createElement(vt,{label:"With milestones"},c.withMilestones?"Yes":"No")),c.withMilestones&&r.a.createElement(r.a.Fragment,null,r.a.createElement(he.a,null,"Milestones"),r.a.createElement(ue.a,{tabPosition:"left"},c.milestones.map(function(e){return r.a.createElement(ue.a.TabPane,{tab:e.name,key:e.key},r.a.createElement("h2",null,e.name),r.a.createElement("p",null,e.description),r.a.createElement(Et.a,{title:"Milestone description",bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},r.a.createElement(vt,{label:"Rewards"},r.a.createElement(yt,{groupKey:e.key,goal:c}))))}))),r.a.createElement(pe.a,{visible:i,footer:null,onCancel:function(){return l("")}},r.a.createElement("img",{alt:"example",style:{width:"100%"},src:i}))):null})),wt=a(66),Ot=rt.a.Meta,jt=Object(f.g)(function(e){var t=e.progress,a=t.goal;return r.a.createElement("div",{style:{display:"inline-block",margin:"4px 8px"},onClick:function(){return e.history.push("/progresses/"+t._id)}},r.a.createElement(rt.a,{type:"inner",style:{width:200},hoverable:!0,cover:r.a.createElement("div",{onClick:function(){return e.history.push("/progresses/"+t._id)},style:{backgroundImage:a&&"url("+(a.images.length>0&&a.images[0])+")",height:200,width:200,backgroundSize:"cover"}})},a&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ot,{title:a.name}),r.a.createElement(Ot,{title:"Made by "+t.worker,description:"In goal by "+t.owner}))))}),xt=ue.a.TabPane,Ct=Object(f.g)(Object(u.b)(function(e){return{account:e.account,isAuthed:e.isAuthed,pulledFrom:e.pulledFrom}},function(e){return{setData:function(t,a){return e(oe(t,a))},setPageTitle:function(t){return e(se(t))},tryAuth:function(t,a){return e(ie(t,a))}}})(function(e){if(Object(n.useEffect)(function(){e.noPullData||(de(e,{}),e.setPageTitle({main:"Progresses",sub:""}))},[]),!e.noPullData&&"progresses"!==e.pulledFrom)return null;var t=e.noPullData?e.pulledProfile:e.account,a=t.progressesData;return t&&t.progresses&&t.progresses.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{style:{background:"transparent",boxShadow:"none",margin:"0",marginTop:"-15px"}},r.a.createElement(xt,{tab:"All roles",key:"1"},a&&a.map(function(e,t){return r.a.createElement(jt,{key:t,progress:e})})),r.a.createElement(xt,{tab:"Achiever",key:"2"},a&&a.filter(function(e){return e.worker===t._id}).map(function(e,t){return r.a.createElement(jt,{key:t,progress:e})})),r.a.createElement(xt,{tab:"Motivator",key:"3"},a&&a.filter(function(e){return e.owner===t._id}).map(function(e,t){return r.a.createElement(jt,{key:t,progress:e})})),r.a.createElement(xt,{tab:"Expert",key:"4"},a&&a.filter(function(e){return e.goal&&(e.goal.experts.includes(t._id)||e.goal.milestonesValues.find(function(e){return e.experts.includes(t._id)}))}).map(function(e,t){return r.a.createElement(jt,{key:t,progress:e})})),r.a.createElement(xt,{tab:"Supporter",key:"5"},a&&a.filter(function(e){return e.goal&&(e.goal.supporters.includes(t._id)||e.goal.milestonesValues.find(function(e){return e.supporters.includes(t._id)}))}).map(function(e,t){return r.a.createElement(jt,{key:t,progress:e})})))):"progresses"===e.pulledFrom?r.a.createElement(wt.a,{imageStyle:{height:160},description:r.a.createElement("span",null,"Here you will find your progresses.",r.a.createElement("br",null)," First create an important goal and start a progress.")},r.a.createElement(b.a,{type:"primary",onClick:function(){return e.history.push("/goals")}},"Create my first goal")):r.a.createElement(wt.a,{imageStyle:{height:160},description:r.a.createElement("span",null,"This user has no progresses. You can create a goal and invite this user.")})})),_t=a(171),It=a(348),St=a.n(It),At=a(172),Tt=a.n(At),Ft=a(347),Dt=a.n(Ft),Pt=a(341),Mt=a(342),Nt=a.n(Mt),Rt=a(730).create({propertyFilter:function(e,t){return"patch"!==e}}),zt=!1,Bt=function(e){function t(){var e,a;Object(He.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(We.a)(this,(e=Object(qe.a)(t)).call.apply(e,[this].concat(r)))).start=function(){var e;zt=new WebSocket("wss://getreward.herokuapp.com");var t=function(){clearTimeout(e),e=setTimeout(function(){zt.close()},31e3),zt.send(JSON.stringify({messageCode:"heartbeat"}))};zt.onopen=function(e){zt.send(JSON.stringify({messageCode:"auth",user:s.a.defaults.headers.common["x-auth-token"],progressId:a.props.progress._id})),t()},zt.onmessage=function(e){var n=JSON.parse(e.data);switch(n.messageCode){case"heartbeat":t();break;case"logout":a.props.logout();break;case"messageSaved":a.props.setState(Object(me.a)({},a.props.state,{messageValue:""}));break;case"successMessage":ae.a.success(n.messageText);break;case"errorMessage":ae.a.error(n.messageText);break;case"friendsData":a.props.setFriendsData(n.friendsData);break;case"redirectToProgresses":a.props.history.push("/progresses");break;case"update":var r,i=Nt()(a.props.progress);i.__v===n.progress.__v-1&&((r=Rt.patch(i,n.progress.patch)).__v=n.progress.__v,a.props.setData({progress:r},a.props.history.location.pathname)),Vt(r||a.props.progress,a.props.account.friends);break;case"error":ae.a.error(n.text)}},zt.onclose=function(t){clearTimeout(e)}},a.checkInterval=null,a.check=function(){zt&&3!==zt.readyState||a.start()},a}return Object(Je.a)(t,e),Object(Ke.a)(t,[{key:"componentWillMount",value:function(){this.checkInterval=setInterval(this.check,5e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.checkInterval),zt&&zt.close()}},{key:"render",value:function(){return r.a.createElement("span",null)}}]),t}(n.Component),Lt=Object(f.g)(Object(u.b)(function(e){return{account:e.account,isAuthed:e.isAuthed,progress:e.progress}},function(e){return{setData:function(t,a){return e(oe(t,a))},setFriendsData:function(t){return e(function(e){return{type:"SET_FRIENDS_DATA",data:e}}(t))},tryAuth:function(t,a){return e(ie(t,a))}}})(Bt)),Gt=function(e,t,a){zt&&3!==zt.readyState&&zt.send(JSON.stringify({messageCode:"sendMessage",messageValue:e.messageValue,editedMessage:e.editedMessage,replyToMessage:e.replyToMessage,imageUrl:a,progressId:t.progress._id,accountId:t.account._id}))},Vt=function(e,t){if(zt&&3!==zt.readyState&&e){var a=[e.owner,e.worker].concat(Object(X.a)(e.goal.supporters),Object(X.a)(e.goal.experts),Object(X.a)(t));a=Object(X.a)(new Set(a)),zt.send(JSON.stringify({messageCode:"getFriendsData",accountIds:a}))}},Ut=a(180),Ht=a(343),Kt=a.n(Ht),Wt=a(344),qt=a.n(Wt),Jt=a(345),Yt=a.n(Jt),Qt=a(346),Zt=a.n(Qt),$t=Object(f.g)(function(e){var t=e.account,a=e.state,n=e.setState,i=e.message,l=function(t,a){!function(e,t,a){zt&&3!==zt.readyState&&zt.send(JSON.stringify({messageCode:t,messageId:a,progressId:e.progress._id,accountId:e.account._id}))}(e,t,a)};return t&&t.friendsData?r.a.createElement(rt.a,null,r.a.createElement(_t.a,{actions:[r.a.createElement("span",{key:"comment-basic-like"},r.a.createElement(_.a,{title:"Like"},i.likes.includes(t._id)?r.a.createElement(Kt.a,{onClick:function(){return l("removeLikeMessage",i.messageId)}}):r.a.createElement(qt.a,{onClick:function(){return l("likeMessage",i.messageId)}})),r.a.createElement("span",{style:{paddingLeft:"8px"}},i.likes.length)),r.a.createElement("span",{key:"comment-basic-dislike"},r.a.createElement(_.a,{title:"Dislike"},i.dislikes.includes(t._id)?r.a.createElement(Yt.a,{onClick:function(){return l("removeDislikeMessage",i.messageId)}}):r.a.createElement(Zt.a,{onClick:function(){return l("dislikeMessage",i.messageId)}})),r.a.createElement("span",{style:{paddingLeft:"8px"}},i.dislikes.length)),r.a.createElement("span",{key:"comment-basic-reply-to",onClick:function(){n(Object(me.a)({},a,{replyToMessage:i.messageId,editedMessage:""}))}},"Reply to"),r.a.createElement("span",{key:"comment-basic-reply-to",onClick:function(){n(Object(me.a)({},a,{messageValue:i.text,editedMessage:i.messageId,replyToMessage:""}))}},"Edit")],author:r.a.createElement("a",null,t.friendsData.find(function(e){return e._id===i.author}).name+" ("+i.author+")"),avatar:r.a.createElement(S.a,{src:"https://websiter.s3.us-east-2.amazonaws.com/"+i.author+"/avatar"}),content:"message"===i.action?r.a.createElement("p",null,i.text):"image"===i.action?r.a.createElement("div",{style:{backgroundImage:"url("+i.text+")",width:"200px",height:"200px",backgroundSize:"cover",cursor:"pointer"},onClick:function(){return n(Object(me.a)({},a,{previewImage:i.text}))}}):null,datetime:r.a.createElement("span",null,r.a.createElement(Ut.a,{datetime:i.date,live:!0}))},e.children)):null}),Xt=Object(f.g)(function(e){var t=Object(n.useState)(!1),a=Object(g.a)(t,2),i=a[0],l=a[1],c=e.state,o=e.setState,s=e.progress,u=e.account,m=s.goal,d=Object(n.useRef)(null);Object(n.useEffect)(function(){d&&d.current&&d.current.scrollIntoView({behavior:"smooth"})},[s.messages.length]);return m?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{textAlign:"left",marginBottom:"200px"},className:Pt.Messages},function e(t){return t&&t.length?[].concat(Object(X.a)(t.map(function(t,a){return r.a.createElement($t,{key:a,message:t,progress:s,account:u,state:c,setState:o},e(t.replies))})),[r.a.createElement("div",{key:"-1",ref:d})]):null}(s.messages),r.a.createElement("div",{style:{position:"fixed",bottom:"0px",width:"100%",background:"#fff",left:"0px",padding:"0px 10px",boxShadow:"0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 -1px 10px 0 rgba(0, 0, 0, 0.12), 0 2px 4px -1px rgba(0, 0, 0, 0.2)"}},u._id?r.a.createElement(_t.a,{avatar:r.a.createElement(S.a,{src:Y(u._id,u.image)}),content:r.a.createElement(r.a.Fragment,null,c.editedMessage&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Editing message"),r.a.createElement(b.a,{type:"link",onClick:function(){o(Object(me.a)({},c,{replyToMessage:"",editedMessage:"",messageValue:""}))}},"Cancel editing")),c.replyToMessage&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Commenting message"),r.a.createElement(b.a,{type:"link",onClick:function(){o(Object(me.a)({},c,{replyToMessage:"",editedMessage:""}))}},"Cancel commenting")),r.a.createElement(j.a.Item,{rules:Ge},r.a.createElement(x.a.TextArea,{autoSize:{minRows:1,maxRows:3},rows:1,onChange:function(e){return o(Object(me.a)({},c,{messageValue:e.target.value}))},value:c.messageValue})),r.a.createElement(j.a.Item,null,r.a.createElement(b.a,{htmlType:"submit",onClick:function(){return Gt(c,e)},icon:r.a.createElement(Dt.a,null),size:"large",type:"link"}),r.a.createElement(Ee.a,{showUploadList:!1,customRequest:function(t){var a=t.file;l(!0),Oe(a,800,void 0,function(t){l(!1),Gt(c,e,t)})}},r.a.createElement(b.a,{size:"large",type:"link",icon:i?r.a.createElement(Tt.a,null):r.a.createElement(St.a,null)})),r.a.createElement(b.a,{type:"primary",onClick:function(){return o(Object(me.a)({},c,{activityOpen:!0}))}},"Activity and settings")))}):r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{style:{textAlign:"center",marginTop:"30px"}},"You must be a mamber of this progress to be able to send messages.",r.a.createElement("br",null),"Ask"," ",r.a.createElement(b.a,{type:"link",style:{fontSize:"21px",padding:"5px"}},s.owner)," ","the owner of this progress to add you."),r.a.createElement(b.a,{type:"primary",onClick:function(){return o(Object(me.a)({},c,{activityOpen:!0}))},style:{margin:"20px auto",display:"block"}},"Activity and settings"))))):null}),ea=a(176),ta=Et.a.Item,aa=function(e){var t=e.progress,a=e.account,n=e.state,i=e.setState,l=t.goal,c=function(t){var a=t.checked,n=t.milestoneId,i=t.disabled;return r.a.createElement(h.a,{checked:a,onChange:function(t){return function(e,t,a){zt&&3!==zt.readyState&&zt.send(JSON.stringify({messageCode:"changeStage",milestoneId:a,value:t,progressId:e.progress._id,accountId:e.account._id}))}(e,t.target.checked,n)},disabled:i})},o=[{title:"Milestone",dataIndex:"name",key:"name",render:function(e){return r.a.createElement(b.a,{type:"link",onClick:function(){return i(Object(me.a)({},n,{previewMilestone:e}))}},e.name)}},{title:"Price",dataIndex:"price",key:"price"},{title:"Status",dataIndex:"status",key:"status",render:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,e?"Paid:":"Not finished"),e&&r.a.createElement(yt,{goal:{rewardsGroups:[{rewards:e,key:1}]},groupKey:1}))}},{title:"Worker",dataIndex:"worker",key:"worker",render:c},{title:"Owner",dataIndex:"owner",key:"owner",render:c}].concat(Object(X.a)(l.experts.map(function(e){return{title:e,dataIndex:e,key:e,render:c}}))),s=function(e,t,n){return{checked:t.approvedBy.find(function(t){return t.accountId===e}),milestoneId:n.key,disabled:e!==a._id}},u=t.stages.find(function(e){return"start"===e.milestoneId})||{approvedBy:[]},m={},d=!0,p=!1,f=void 0;try{for(var g,E=l.experts[Symbol.iterator]();!(d=(g=E.next()).done);d=!0){var y=g.value;m[y]=s(y,u,{key:"start"})}}catch(T){p=!0,f=T}finally{try{d||null==E.return||E.return()}finally{if(p)throw f}}var v=Object(me.a)({key:"start",name:{name:"Start",description:"At this stage owner and user should agree to start this progress.",key:"start"},price:t.startPrice,status:u.paid,worker:s(t.worker,u,{key:"start"}),owner:s(t.owner,u,{key:"start"})},m),k=t.stages.find(function(e){return"finish"===e.milestoneId})||{approvedBy:[]},w={},O=!0,j=!1,x=void 0;try{for(var C,_=l.experts[Symbol.iterator]();!(O=(C=_.next()).done);O=!0){var I=C.value;w[I]=s(I,k,{key:"finish"})}}catch(T){j=!0,x=T}finally{try{O||null==_.return||_.return()}finally{if(j)throw x}}var S=Object(me.a)({key:"finish",name:{name:"Finish",description:"At this stage owner and user should agree to finish this progress.",key:"finish"},price:t.price,status:k.paid,worker:s(t.worker,k,{key:"finish"}),owner:s(t.owner,k,{key:"finish"})},w),A=[v].concat(Object(X.a)(l.milestonesValues.map(function(e,a){var n=t.stages.find(function(t){return t.milestoneId===e.key})||{approvedBy:[]},r={},i=!0,c=!1,o=void 0;try{for(var u,m=l.experts[Symbol.iterator]();!(i=(u=m.next()).done);i=!0){var d=u.value;r[d]=s(d,n,e)}}catch(T){c=!0,o=T}finally{try{i||null==m.return||m.return()}finally{if(c)throw o}}return Object(me.a)({key:a,name:e,price:e.price,status:n.paid,worker:s(t.worker,n,e),owner:s(t.owner,n,e)},r)})),[S]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ea.a,{columns:o,dataSource:A}),r.a.createElement(pe.a,{visible:n.previewMilestone,footer:null,onCancel:function(){return i(Object(me.a)({},n,{previewMilestone:""}))},closable:!0},n.previewMilestone?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,n.previewMilestone.name),r.a.createElement("p",null,n.previewMilestone.description),r.a.createElement(Et.a,{title:"Milestone description",bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},r.a.createElement(ta,{label:"Rewards"},r.a.createElement(yt,{groupKey:n.previewMilestone.key,goal:l})))):null))},na=function(e){var t=e.progress,a=e.account,n=e.state,i=e.setState,l={},c=!0,o=!1,s=void 0;try{for(var u,m=t.goal.milestonesValues[Symbol.iterator]();!(c=(u=m.next()).done);c=!0){var d=u.value;l[d.key]=d}}catch(f){o=!0,s=f}finally{try{c||null==m.return||m.return()}finally{if(o)throw s}}var p=Object(me.a)({},t.goal,l);return p?r.a.createElement(at,{goal:p,onFinish:function(t){!function(e,t){zt&&3!==zt.readyState&&zt.send(JSON.stringify({messageCode:"editGoalInProgress",progressId:e.progress._id,accountId:e.account._id,value:t}))}(e,t),i(Object(me.a)({},n,{editProgressOpen:!1}))},account:a}):null},ra=Et.a.Item,ia=Object(f.g)(function(e){var t=e.account,a=e.progress,n=e.state,i=e.setState,l=a.goal;return l?r.a.createElement(r.a.Fragment,null,l.images.map(function(e,t){return r.a.createElement("span",{key:t,onClick:function(){return i(Object(me.a)({},n,{previewImage:e}))}},r.a.createElement(rt.a,{type:"inner",style:{width:200,display:"inline-block"},hoverable:!0,cover:r.a.createElement("div",{style:{backgroundImage:"url("+e+")",height:200,width:200,backgroundSize:"cover"}})}))}),r.a.createElement("h1",null,l.name),r.a.createElement("p",null,l.description),r.a.createElement(Et.a,{title:"Goal description",bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},r.a.createElement(ra,{label:"Status"},a.status),r.a.createElement(ra,{label:"Worker"},a.worker),r.a.createElement(ra,{label:"Owner"},a.owner),r.a.createElement(ra,{label:"Supporters"},l.supporters),r.a.createElement(ra,{label:"Experts"},l.experts),r.a.createElement(ra,{label:"Start reward"},r.a.createElement(yt,{groupKey:"start",goal:l})),r.a.createElement(ra,{label:"Finish reward"},r.a.createElement(yt,{groupKey:"finish",goal:l})),r.a.createElement(ra,{label:"With milestones"},l.withMilestones?"Yes":"No")),r.a.createElement(he.a,{orientation:"center",type:"horizontal"},"Milestones"),r.a.createElement(aa,{progress:a,account:t,state:n,setState:i}),t._id===a.owner&&r.a.createElement(b.a,{style:{margin:"0px 20px 50px 0px"},type:"primary",onClick:function(){i(Object(me.a)({},n,{editProgressOpen:!0}))}},"Edit progress"),t.progresses&&t.progresses.includes(a._id.toString())&&r.a.createElement(b.a,{danger:!0,onClick:function(){var t;t=e,zt&&3!==zt.readyState&&zt.send(JSON.stringify({messageCode:"leaveProgress",progressId:t.progress._id,accountId:t.account._id}))}},"Leave the progress"),r.a.createElement(pe.a,{visible:n.editProgressOpen,footer:null,onCancel:function(){return i(Object(me.a)({},n,{editProgressOpen:!1}))},closable:!0,destroyOnClose:!0,width:"80%"},r.a.createElement(na,{progress:a,account:t,state:n,setState:i}))):null}),la=a(780),ca=Object(f.g)(Object(u.b)(function(e){return{account:e.account,isAuthed:e.isAuthed,progress:e.progress,pulledFrom:e.pulledFrom}},function(e){return{setData:function(t,a){return e(oe(t,a))},setPageTitle:function(t){return e(se(t))},tryAuth:function(t,a){return e(ie(t,a))}}})(function(e){var t=Object(n.useState)({}),a=Object(g.a)(t,2),i=a[0],l=a[1];if(Object(n.useEffect)(function(){de(e,{forceAuth:!1})},[]),"progresses"!==e.pulledFrom)return null;var c=e.progress,o=e.account;e.profile;if(!c)return null;var s=c.goal;return s&&e.setPageTitle({main:s.name,sub:c.worker}),s&&o.friendsData?r.a.createElement(r.a.Fragment,null,o._id&&r.a.createElement(Lt,{state:i,setState:l}),r.a.createElement(Xt,{state:i,setState:l,progress:c,account:o}),r.a.createElement(A.a,{title:"Progress activity and settings",placement:"right",closable:!0,closeIcon:r.a.createElement(b.a,{type:"primary",icon:r.a.createElement(la.a,null)},"Go back"),onClose:function(){return l(Object(me.a)({},i,{activityOpen:!1}))},visible:i.activityOpen,width:"100%"},r.a.createElement(ia,{state:i,setState:l,progress:c,account:o})),r.a.createElement(pe.a,{visible:i.previewImage,footer:null,onCancel:function(){return l(Object(me.a)({},i,{previewImage:""}))}},r.a.createElement("img",{alt:"example",style:{width:"100%"},src:i.previewImage}))):null})),oa=rt.a.Meta,sa=Object(f.g)(Object(u.b)(function(e){return{account:e.account,isAuthed:e.isAuthed}},function(e){return{setPageTitle:function(t){return e(se(t))}}})(function(e){e.keepPageTitle||e.setPageTitle({main:"Shop",sub:"Wallet"});var t=e.pulledProfile||e.account;return t.wallet?t.wallet.map(function(t,a){return r.a.createElement("div",{onClick:function(){return e.history.push("/profile/"+t.user)},style:{display:"inline-block",margin:"4px 8px"}},r.a.createElement(rt.a,{key:a,type:"inner",style:{width:200},cover:r.a.createElement("span",{style:{padding:"25px"}},r.a.createElement(S.a,{src:Y(t.user),size:150})),hoverable:!0,actions:[r.a.createElement(b.a,{key:"1",icon:r.a.createElement(dt.a,null)},"Go to the shop")]},r.a.createElement(oa,{title:t.user,description:t.amount})))}):null})),ua=a(365),ma=Object(f.g)(Object(u.b)(function(e){return{account:e.account,isAuthed:e.isAuthed}},function(e){return{setPageTitle:function(t){return e(se(t))},cancelTransaction:function(t,a){return e(function(e,t){return function(a){s.a.post("/api/shop/cancel",{transactionId:e}).then(function(e){ne(e),e.data.success&&a(oe(e.data,t.history.location.pathname))}).catch(function(e){})}}(t,a))},confirmTransaction:function(t,a){return e(function(e,t){return function(a){s.a.post("/api/shop/confirm",{transactionId:e}).then(function(e){ne(e),e.data.success&&a(oe(e.data,t.history.location.pathname))}).catch(function(e){})}}(t,a))}}})(function(e){e.setPageTitle({main:"Shop",sub:"Transactions"});var t=e.account;if(!t)return null;var a=t.transactionsData,n=t.friendsData,i=[{title:"Type",dataIndex:"types",key:"types",render:function(e){return r.a.createElement(r.a.Fragment,null,e.map(function(e){var t=e.length>5?"geekblue":"green";return"loser"===e&&(t="volcano"),r.a.createElement(ua.a,{color:t,key:e},e.toUpperCase())}))}},{title:"With",dataIndex:"user",key:"user",render:function(t){var a=n.find(function(e){return e._id===t});return a?r.a.createElement(b.a,{type:"link",style:{padding:0},onClick:function(){return e.history.push("/profile/"+t)}},r.a.createElement(S.a,{src:Y(t,a.image),style:{marginRight:"5px"}}),a.name+" ("+a._id+")"):t}},{title:"Item",dataIndex:"perk",key:"perk",render:function(e){return e.simple||r.a.createElement(yt,{goal:{rewardsGroups:[{rewards:[e],key:1}]},groupKey:1})}},{title:"Amount",dataIndex:"amount",key:"amount",render:function(e){return e>0?e:""}},{title:"Date",dataIndex:"date",key:"date",render:function(e){return r.a.createElement(Ut.a,{datetime:e,live:!0})}},{title:"Progress",dataIndex:"progress",key:"progress",render:function(t){return r.a.createElement(b.a,{type:"link",onClick:function(){return e.history.push("/progresses/"+t)}},t)}},{title:"Status",key:"status",dataIndex:"status",render:function(a,n){return"Not confirmed"===a?r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{danger:!0,type:"link",onClick:function(){return e.cancelTransaction(n.transaction._id,e)}},"Cancel"),n.transaction.from===t._id&&r.a.createElement(b.a,{type:"link",onClick:function(){return e.confirmTransaction(n.transaction._id,e)}},"Confirm")):a}}],l=[],c=Object(X.a)(a);c=c.sort(function(e,t){return new Date(e.date).getTime()<new Date(t.date).getTime()?1:-1});var o=!0,s=!1,u=void 0;try{for(var m,d=c[Symbol.iterator]();!(o=(m=d.next()).done);o=!0){var p=m.value,f=[];p.from===t._id&&p.to===t.id&&f.push("internal"),p.to===t._id?p.progress?(f.push("earn"),p.amount?f.push("money"):f.push("item")):p.item&&p.amount?(f.push("buy"),f.push("item")):(f.push("recieve gift"),p.amount?f.push("money"):f.push("item")):p.from===t._id&&(p.progress?(f.push("pay"),p.amount?f.push("money"):f.push("item")):p.item&&p.amount?(f.push("sell"),f.push("item")):(f.push("send gift"),p.amount?f.push("money"):f.push("item")));var g=p.to!==t._id?p.to:p.from;l.push({key:l.length,types:f,user:g,perk:p.item,amount:p.amount,date:p.date,progress:p.progress,status:p.status,transaction:p})}}catch(h){s=!0,u=h}finally{try{o||null==d.return||d.return()}finally{if(s)throw u}}return r.a.createElement(rt.a,null,r.a.createElement(ea.a,{columns:i,dataSource:l}))})),da=function(e){var t=Object(n.useState)(""),a=Object(g.a)(t,2),i=a[0],l=a[1],c=e.connections,o=e.perkId,s=e.perk,u=e.deletePerk,m=e.onFinish,d=e.images,p=e.setImages,f=e.uploadImage,h=r.a.createElement(fe.a,{mode:"multiple",style:{width:"100%"},placeholder:"Please select"},c.map(function(e){return r.a.createElement(fe.a.Option,{key:e._id},r.a.createElement(S.a,{src:"https://websiter.s3.us-east-2.amazonaws.com/"+e._id+"/avatar",size:20,style:{marginRight:"10px"}}),e.name," - (",e._id,")")})),E=j.a.useForm(),y=Object(g.a)(E,1)[0];return!e.perkId||s?r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,Object.assign({form:y,name:"dynamic_form_nest_item",onFinish:m,autoComplete:"off",initialValues:s||{}},{labelCol:{span:8},wrapperCol:{span:16}}),r.a.createElement(j.a.Item,{name:"images",label:"Images",valuePropName:"images",getValueFromEvent:function(e){return Array.isArray(e)?e:e&&e.fileList.map(function(e){return e.url})}},r.a.createElement(Ee.a,{listType:"picture-card",fileList:d.map(function(e,t){return Object(me.a)({},e,{uid:t})}),onPreview:function(e){l(e.url)},onChange:function(e){var t=e.fileList;return p(t)},customRequest:function(e){var t=e.file;f(t)}},d.length>=8?null:r.a.createElement("div",null,r.a.createElement(ye.a,null),r.a.createElement("div",{className:"ant-upload-text"},"Upload")))),r.a.createElement(j.a.Item,{label:"Name",name:"name",rules:ze},r.a.createElement(x.a,{placeholder:"New item"})),r.a.createElement(j.a.Item,{label:"Description",name:"description",rules:Le},r.a.createElement(x.a.TextArea,{placeholder:"Write a few words about this item."})),"shop"===e.mode&&r.a.createElement(j.a.Item,{label:"Available for",name:"users"},h),"shop"===e.mode&&r.a.createElement(j.a.Item,{label:"Price",name:"price",rules:Ve},r.a.createElement(Se.a,null)),r.a.createElement(j.a.Item,{wrapperCol:{offset:8,span:16}},r.a.createElement(b.a,{type:"primary",htmlType:"submit",size:"large"},"Save"),o&&r.a.createElement(tt.a,{title:"Are you sure you want to delete this item?",onConfirm:u,onCancel:function(){},okText:"Confirm",cancelText:"Cancel"},r.a.createElement(b.a,{type:"link",danger:!0,size:"large"},"Delete")))),r.a.createElement(pe.a,{visible:i,footer:null,onCancel:function(){return l("")}},r.a.createElement("img",{alt:"example",style:{width:"100%"},src:i}))):null},pa=Object(f.g)(Object(u.b)(function(e){return{account:e.account}},function(e){return{setData:function(t,a){return e(oe(t,a))}}})(function(e){var t=Object(n.useState)(),a=Object(g.a)(t,2),i=a[0],l=a[1],c=Object(n.useState)([]),o=Object(g.a)(c,2),u=o[0],m=o[1],d=e.account,p=e.mode,f=e.perkId||"";Object(n.useEffect)(function(){f&&s.a.get("/api/".concat(p||"shop","/").concat(d._id,"/").concat(f)).then(function(e){if(e.data.success){console.log(e.data);var t="wishlist"===p?e.data.wishlistItem:e.data.perk;l(t),m(t.images.map(function(e,t){return{url:e,uid:t}}))}}).catch(function(e){})},[]);var h=d.friendsData||[];return!e.perkId||i?r.a.createElement(da,{connections:h,perkId:f,perk:i,deletePerk:function(){f&&s.a.post("/api/".concat(p||"shop","/delete/").concat(f)).then(function(t){ne(t,e),e.setData(t.data,e.history.location.pathname)}).catch(function(e){}),e.setEditPerkOpen(!1)},onFinish:function(t){s.a.post("/api/".concat(p||"shop","/add"),{value:Object(me.a)({},t,{images:u.map(function(e){return e.url})}),id:f}).then(function(t){ne(t,e),e.setEditPerkOpen(!1),e.setData(t.data,e.history.location.pathname)}).catch(function(e){})},images:u,setImages:m,uploadImage:function(e){Oe(e,800,void 0,function(e){m([].concat(Object(X.a)(u),[{url:e}]).map(function(e,t){return Object(me.a)({},e,{uid:t})}))})},mode:e.mode}):null})),fa=a(357),ga=a.n(fa),ha=rt.a.Meta,Ea=Object(f.g)(Object(u.b)(null,function(e){return{buyPerk:function(t,a,n,r){return e(function(e,t,a,n){return function(r){var i=e.wallet.find(function(e){return e.user===a._id});i&&i.amount>=t.price?s.a.post("/api/shop/buy",{perkId:t.perkId,ownerId:a._id}).then(function(e){ne(e),e.data.success&&(console.log(e.data),console.log(n.history.location.pathname),r(oe(e.data,n.history.location.pathname)))}).catch(function(e){}):alert("You cannot buy this item as you do not have enough money from this user.")}}(t,a,n,r))}}})(function(e){var t=e.perk,a=e.perkId,n=e.owner,i=e.account,l=e.setEditedPerk,c=e.setEditPerkOpen,o=e.mode;return r.a.createElement(rt.a,{type:"inner",style:{width:200,display:"inline-block",margin:"4px 8px"},hoverable:!0,cover:r.a.createElement("div",{onClick:function(){return e.history.push("/".concat(o||"shop","/").concat(n._id,"/").concat(a))},style:{backgroundImage:"url("+(t.images.length>0&&t.images[0])+")",height:200,width:200,backgroundSize:"cover"}}),actions:[].concat(Object(X.a)(n._id!==i._id||e.onlyBuy?[]:[r.a.createElement(_.a,{title:"Edit"},r.a.createElement("span",{key:"1",onClick:function(){l(a),c(!0)}},r.a.createElement(lt.a,{style:{fontSize:"18px"}})))]),Object(X.a)("shop"===e.mode?[r.a.createElement(_.a,{title:"Buy"},r.a.createElement("span",{key:"1",onClick:function(){return e.buyPerk(i,t,n,e)}},r.a.createElement(ga.a,{style:{fontSize:"18px"}})))]:[]))},r.a.createElement(ha,{title:t.name,description:t.price}))})),ba=Object(f.g)(Object(u.b)(function(e){return{account:e.account}})(function(e){var t=Object(n.useState)(""),a=Object(g.a)(t,2),i=a[0],l=a[1],c=Object(n.useState)(),o=Object(g.a)(c,2),s=o[0],u=o[1],m=e.account,d=r.a.createElement(pe.a,{title:"Add item",visible:s,maskClosable:!0,closable:!0,onCancel:function(){return u(!1)},width:"90%",footer:r.a.createElement(b.a,{key:"back",onClick:function(){return u(!1)}},"Close"),destroyOnClose:!0},r.a.createElement(pa,{setEditPerkOpen:u,perkId:i,mode:e.mode}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(ft,{action:function(){l(""),u(!0)},title:"Add item",sub:"shop"===e.mode&&"Set price"}),m[e.listKey||e.mode]&&m[e.listKey||e.mode].map(function(t,a){return r.a.createElement(Ea,{key:a,perk:t,perkId:"wishlist"===e.mode?t.itemId:t.perkId,owner:m,account:m,setEditedPerk:l,setEditPerkOpen:u,mode:e.mode})}),d)})),ya=Object(f.g)(Object(u.b)(function(e){return{account:e.account,isAuthed:e.isAuthed,pulledFrom:e.pulledFrom}},function(e){return{setData:function(t,a){return e(oe(t,a))},setPageTitle:function(t){return e(se(t))},tryAuth:function(t,a){return e(ie(t,a))}}})(function(e){return Object(n.useEffect)(function(){de(e,{}),e.setPageTitle({main:"Shop",sub:"My items"})},[]),"shop"!==e.pulledFrom?null:e.account?r.a.createElement(ue.a,{style:{background:"transparent",boxShadow:"none",margin:"0",marginTop:"-15px"}},r.a.createElement(ue.a.TabPane,{tab:"My shop",key:1},r.a.createElement(ba,{mode:"shop",listKey:"perks"})),r.a.createElement(ue.a.TabPane,{tab:"Wallet",key:3},r.a.createElement(sa,null)),r.a.createElement(ue.a.TabPane,{tab:"Transactions",key:4},r.a.createElement(ma,null))):r.a.createElement("span",null)})),va=a(359),ka=a.n(va),wa=a(358),Oa=a.n(wa),ja=a(226),xa=a.n(ja),Ca=function(e){var t=e.invitingFriends,a=e.invitedFriends,n=e.realFriends,i=e._id,l=e.accountId,c=e.acceptFriend,o=e.addFriend,s=e.unfriend;if(!l)return[];if(l===i)return[e.additionalButton];var u=e.asIcons,m=function(e){return u?r.a.createElement(_.a,{title:e.text},r.a.createElement("span",{type:"link",key:e.key,onClick:e.onClick,style:{fontSize:"18px"}},e.icon)):r.a.createElement(b.a,e,e.text)};return[e.additionalButton].concat(Object(X.a)(t.find(function(e){return e.friend===i})?[r.a.createElement(m,{text:"Accept",key:"0",onClick:function(){return c(i)},icon:r.a.createElement(xa.a,null),type:"primary"}),r.a.createElement(m,{text:"Decline",key:"1",onClick:function(){return s(i)},icon:r.a.createElement(Te.a,null),danger:!0})]:a.find(function(e){return e.friend===i})?[r.a.createElement(m,{text:"Cancel invitation",key:"2",onClick:function(){return s(i)},icon:r.a.createElement(Te.a,null),danger:!0})]:n.find(function(e){return e.friend===i})?[r.a.createElement(m,{key:"3",onClick:function(){return s(i)},icon:r.a.createElement(Oa.a,null),text:"Unfriend",danger:!0})]:[r.a.createElement(m,{text:"Become friends",key:"4",onClick:function(){return o(i)},icon:r.a.createElement(xa.a,null),type:"primary"})]))},_a=function(e,t){s.a.post("/api/friends/accept",{id:e}).then(function(e){ne(e,t),e.data.success&&de(t,{})}).catch(function(e){})},Ia=function(e,t){s.a.post("/api/friends/add",{id:e}).then(function(e){ne(e,t),e.data.success&&de(t,{})}).catch(function(e){})},Sa=function(e,t){s.a.post("/api/friends/unfriend",{id:e}).then(function(e){ne(e,t),e.data.success&&de(t,{})}).catch(function(e){})},Aa=rt.a.Meta,Ta=Object(f.g)(Object(u.b)(function(e){return{account:e.account,isAuthed:e.isAuthed}},function(e){return{setData:function(t,a){return e(oe(t,a))},tryAuth:function(t,a){return e(ie(t,a))}}})(function(e){var t=Ca({accountId:e.account?e.account._id:"",realFriends:e.realFriends,invitedFriends:e.invitedFriends,invitingFriends:e.invitingFriends,_id:e.friend._id,asIcons:!0,acceptFriend:function(t){return _a(t,e)},unfriend:function(t){return Sa(t,e)},addFriend:function(t){return Ia(t,e)},additionalButton:r.a.createElement(_.a,{title:"See profile"},r.a.createElement("span",{type:"link",key:"100",onClick:function(){return e.history.push("/profile/"+e.friend._id)},style:{fontSize:"18px"}},r.a.createElement(ka.a,null)))});return r.a.createElement(rt.a,{type:"inner",style:{width:200,display:"inline-block",margin:"4px 8px"},cover:r.a.createElement("span",{style:{padding:"25px",cursor:"pointer"},onClick:function(){return e.history.push("/profile/"+e.friend._id)}},r.a.createElement(S.a,{src:Y(e.friend._id,e.friend.image),size:150})),actions:t},r.a.createElement(Aa,{title:r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return e.history.push("/profile/"+e.friend._id)}},e.friend.name),description:r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return e.history.push("/profile/"+e.friend._id)}},e.friend._id)}))})),Fa=Object(f.g)(function(e){var t=e.addFriendOpen,a=e.setAddFriendOpen,n=e.onFinish,i=e.searchResult,l=e.realFriends,c=e.invitedFriends,o=e.invitingFriends;return r.a.createElement(pe.a,{title:"Add friend",visible:t,maskClosable:!0,closable:!0,onCancel:function(){return a(!1)},footer:r.a.createElement(b.a,{key:"back",onClick:function(){return a(!1)}},"Return")},r.a.createElement("p",null,"To find a friend you need to enter your friend's nickname."),r.a.createElement(j.a,Object.assign({name:"dynamic_form_nest_item",onFinish:n,autoComplete:"off"},{labelCol:{span:8},wrapperCol:{span:16}}),r.a.createElement(j.a.Item,{label:"Search",name:"search",rules:Re},r.a.createElement(x.a,{placeholder:"Must be more than 2 characters long"})),r.a.createElement(j.a.Item,{wrapperCol:{offset:8,span:16}},r.a.createElement(b.a,{type:"primary",htmlType:"submit",size:"large"},"Search"))),i&&r.a.createElement(rt.a,{title:"Search result"},r.a.createElement(Ta,Object.assign({},e,{friend:i,realFriends:l,invitingFriends:o,invitedFriends:c}))))}),Da=Object(f.g)(function(e){var t=e.pendingFriendsOpen,a=e.setPendingFriendsOpen,n=e.realFriends,i=e.invitedFriends,l=e.invitingFriends;return r.a.createElement(pe.a,{title:"Pending friends",visible:t,maskClosable:!0,closable:!0,width:"90%",onCancel:function(){return a(!1)},footer:r.a.createElement(b.a,{key:"back",onClick:function(){return a(!1)}},"Return")},l.length>0&&r.a.createElement(rt.a,{title:"People invited me to be friends"},l.map(function(t){return r.a.createElement(Ta,Object.assign({key:t._id},e,{friend:t,realFriends:n,invitingFriends:l,invitedFriends:i}))})),i.length>0&&r.a.createElement(rt.a,{title:"I invited these people"},i.map(function(t){return r.a.createElement(Ta,Object.assign({key:t._id},e,{friend:t,realFriends:n,invitingFriends:l,invitedFriends:i}))})))}),Pa=Object(f.g)(Object(u.b)(function(e){return{account:e.account,isAuthed:e.isAuthed,pulledFrom:e.pulledFrom}},function(e){return{setData:function(t,a){return e(oe(t,a))},setPageTitle:function(t){return e(se(t))},tryAuth:function(t,a){return e(ie(t,a))}}})(function(e){var t=Object(n.useState)(),a=Object(g.a)(t,2),i=a[0],l=a[1],c=Object(n.useState)(),o=Object(g.a)(c,2),u=o[0],m=o[1],d=Object(n.useState)(null),p=Object(g.a)(d,2),f=p[0],h=p[1];if(Object(n.useEffect)(function(){de(e,{}),e.setPageTitle({main:"Friends",sub:""})},[]),"friends"!==e.pulledFrom)return null;var E=e.account;if(!E)return null;var y=[],v=[],k=[];if(E.friendsData&&E.friends){var w=!0,O=!1,j=void 0;try{for(var x,C=function(){var e=x.value,t=E.friends.find(function(t){return t.friend.toString()===e._id.toString()}),a=Object(me.a)({},t,e);t&&("friend"===t.status?y.push(a):"invited"===t.status?v.push(a):"inviting"===t.status&&k.push(a))},_=E.friendsData[Symbol.iterator]();!(w=(x=_.next()).done);w=!0)C()}catch(I){O=!0,j=I}finally{try{w||null==_.return||_.return()}finally{if(O)throw j}}}return r.a.createElement(r.a.Fragment,null,(v.length>0||k.length>0)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{style:{margin:"30px 0px "},type:"primary",onClick:function(){return m(!0)}},"Show pending friends"),r.a.createElement(he.a,{type:"horizontal"})),r.a.createElement(ft,{title:"Add friend",sub:"Find by nickname",action:function(){return l(!0)}}),y.map(function(t){return r.a.createElement(Ta,Object.assign({key:t._id},e,{friend:t,realFriends:y,invitingFriends:k,invitedFriends:v}))}),r.a.createElement(Fa,{addFriendOpen:i,setAddFriendOpen:l,onFinish:function(e){s.a.post("/api/friends/find",Object(me.a)({},e)).then(function(t){t.data.success?h(t.data.friend):(ae.a.warning("Accounts with nickname "+e.search+" do not exist."),h(null))}).catch(function(e){})},searchResult:f,realFriends:y,invitedFriends:v,invitingFriends:k,account:E}),r.a.createElement(Da,{pendingFriendsOpen:u,setPendingFriendsOpen:m,realFriends:y,invitedFriends:v,invitingFriends:k}))})),Ma=a(360),Na=function(e){ae.a.error("Something failed. Try again.")},Ra=Object(f.g)(Object(u.b)(function(e){return{account:e.account,isAuthed:e.isAuthed,pulledFrom:e.pulledFrom}},function(e){return{setData:function(t,a){return e(oe(t,a))},setPageTitle:function(t){return e(se(t))},setAvatarV:function(t){return e(function(e){return{type:"SET_AVATAR_V",v:e}}(t))},increaseAvatarV:function(){return e({type:"INCREASE_AVATAR_V"})},tryAuth:function(t,a){return e(ie(t,a))}}})(function(e){var t=Object(n.useState)(),a=Object(g.a)(t,2),i=a[0],l=a[1],c=Object(n.useState)(""),o=Object(g.a)(c,2),u=o[0],m=o[1],d=e.account;if(Object(n.useEffect)(function(){de(e,{}),e.setPageTitle({main:"Account",sub:""})},[]),"account"!==e.pulledFrom)return null;var p={wrapperCol:{offset:8,span:0}};return d&&d.name?r.a.createElement(rt.a,null,r.a.createElement(J.a,{className:"site-page-header",title:"My account",backIcon:!1}),r.a.createElement(Ee.a,{name:"avatar",listType:"picture-card",className:Ma.Avatar,showUploadList:!1,customRequest:function(t){var a=t.file;Oe(a,800,"avatar",function(){e.increaseAvatarV()})}},d.image?r.a.createElement(S.a,{src:Y(d._id,d.image),size:150,style:{margin:"25px"}}):r.a.createElement("div",null,r.a.createElement(ye.a,null),r.a.createElement("div",{className:"ant-upload-text"},"Upload"))),r.a.createElement(j.a,Object.assign({name:"dynamic_form_nest_item",onFinish:function(t){s.a.post("/api/account",{name:t.name}).then(function(t){ne(t,e)}).catch(function(e){Na()})},autoComplete:"off"},{labelCol:{span:8},wrapperCol:{span:16}},{initialValues:{name:d.name,nickname:d._id}}),r.a.createElement(j.a.Item,{label:"Name",name:"name",rules:Be},r.a.createElement(x.a,{placeholder:"Must be more than 1 character long"})),r.a.createElement(j.a.Item,{label:"Nickname",name:"nickname"},r.a.createElement(x.a,{disabled:!0})),r.a.createElement(j.a.Item,Object.assign({},p,{style:{flex:"none",maxWidth:" 100%",overflow:"hidden"}}),r.a.createElement(b.a,{type:"primary",htmlType:"submit",size:"large"},"Save")),r.a.createElement(j.a.Item,Object.assign({},p,{style:{flex:"none",maxWidth:" 100%",overflow:"hidden"}}),r.a.createElement(b.a,{type:"dashed",onClick:function(){return l(!0)},danger:!0,size:"large"},"Delete account"))),r.a.createElement(pe.a,{title:"Delete account",visible:i,onOk:function(){u!==d._id?ae.a.warning("The nickmanme is not correct."):s.a.post("/api/account/delete",{accountId:d._id}).then(function(t){e.history.push("/logout")}).catch(function(e){Na()})},onCancel:function(){l(!1),m("")}},r.a.createElement("p",null,"Please enter your nickname and press Ok to delete your account."),r.a.createElement(x.a,{onChange:function(e){return m(e.target.value)}}))):null})),za=Object(f.g)(Object(u.b)(function(e){return{account:e.account,profile:e.profile,isAuthed:e.isAuthed,pulledFrom:e.pulledFrom}},function(e){return{setData:function(t,a){return e(oe(t,a))},setPageTitle:function(t){return e(se(t))},tryAuth:function(t,a){return e(ie(t,a))}}})(function(e){if(Object(n.useEffect)(function(){de(e,{forceAuth:!1,forceActivate:!1})},[e.history.location.pathname]),"profile"!==e.pulledFrom)return null;var t=e.profile,a=e.account;if(!t._id||!t.goals)return null;e.setPageTitle({main:t.name,sub:t._id});var i=[],l=[],c=[];if(a&&a.friends){var o=!0,s=!1,u=void 0;try{for(var m,d=a.friends[Symbol.iterator]();!(o=(m=d.next()).done);o=!0){var p=m.value;"friend"===p.status?i.push(p):"invited"===p.status?l.push(p):"inviting"===p.status&&c.push(p)}}catch(g){s=!0,u=g}finally{try{o||null==d.return||d.return()}finally{if(s)throw u}}}var f=Ca({accountId:a?a._id:"",realFriends:i,invitedFriends:l,invitingFriends:c,_id:t._id,acceptFriend:function(t){return _a(t,e)},unfriend:function(t){return Sa(t,e)},addFriend:function(t){return Ia(t,e)},additionalButton:null});return r.a.createElement(rt.a,null,r.a.createElement("div",{style:{textAlign:"center",marginBottom:"50px"}},r.a.createElement(S.a,{src:Y(t._is,t.image),size:200}),r.a.createElement("h1",null,t.name),r.a.createElement("h3",null,"(",t._id,")"),f),r.a.createElement(ue.a,null,r.a.createElement(ue.a.TabPane,{tab:"Friends",key:1},r.a.createElement(rt.a,{title:"Friends"},t.friends.filter(function(e){return"friend"===e.status}).map(function(n){var o=Object(me.a)({},t.friendsData.find(function(e){return e._id.toString()===n.friend.toString()}),n.friend);return r.a.createElement(Ta,Object.assign({key:o._id},e,{account:a,friend:o,realFriends:i,invitingFriends:c,invitedFriends:l}))}))),r.a.createElement(ue.a.TabPane,{tab:"Progresses",key:2},r.a.createElement(rt.a,{title:"Progresses"},r.a.createElement(Ct,{pulledProfile:t,progressesData:t.progressesData,keepPageTitle:!0,noPullData:!0}))),r.a.createElement(ue.a.TabPane,{tab:"Goals",key:3},r.a.createElement(rt.a,{title:"Goals"},t.goals.map(function(e,n){return r.a.createElement(ut,{key:n,goal:e,owner:t,available:e.users.includes(a._id),account:a})}))),r.a.createElement(ue.a.TabPane,{tab:"Shop",key:4},r.a.createElement(rt.a,{title:"Shop"},t.perks&&t.perks.map(function(e,n){return r.a.createElement(Ea,{key:n,perk:e,perkId:e.perkId,owner:t,account:a,onlyBuy:!0,mode:"shop"})}))),r.a.createElement(ue.a.TabPane,{tab:"Wallet",key:5},r.a.createElement(rt.a,{title:"Wallet"},r.a.createElement(sa,{keepPageTitle:!0,pulledProfile:t,account:t}))),r.a.createElement(ue.a.TabPane,{tab:"Wishlist",key:6},r.a.createElement(rt.a,{title:"Wishlist"},t.wishlist.map(function(e,n){return r.a.createElement(Ea,{key:n,perk:e,perkId:e.itemId,owner:t,account:a,setEditedPerk:function(){},setEditPerkOpen:function(){},mode:"wishlist"})})))))})),Ba=Object(f.g)(Object(u.b)(function(e){return{isAuthed:e.isAuthed}})(function(e){e.isAuthed||e.history.push("/logout");return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{className:"site-page-header",title:"Activate your account",backIcon:!1}),r.a.createElement(j.a,Object.assign({name:"dynamic_form_nest_item",onFinish:function(t){s.a.post("/api/activate-account",Object(me.a)({},t)).then(function(t){t.data.success?(ae.a.success("Your account has been activated!"),e.history.push("/account")):(t.data.nicknameNotUnique&&ae.a.warning("The nickname is taken. Choose another nickname please."),t.data.errorCode&&ae.a.error("Something is wrong with the data. Please try one more time with new data."))}).catch(function(e){})},autoComplete:"off"},{labelCol:{span:8},wrapperCol:{span:16}}),r.a.createElement(j.a.Item,{label:"Name",name:"name",rules:Be},r.a.createElement(x.a,{placeholder:"Must be more than 1 character long"})),r.a.createElement(j.a.Item,{label:"Nickname",name:"nickname",rules:Re},r.a.createElement(x.a,{placeholder:"Must be more than 1 character long"})),r.a.createElement(j.a.Item,{wrapperCol:{offset:8,span:16}},r.a.createElement(b.a,{type:"primary",htmlType:"submit",size:"large"},"Save"))))})),La=Et.a.Item,Ga=Object(f.g)(Object(u.b)(function(e){return{isAuthed:e.isAuthed,perk:e.perk,profile:e.profile,pulledFrom:e.pulledFrom}},function(e){return{setData:function(t,a){return e(oe(t,a))},setPageTitle:function(t){return e(se(t))},tryAuth:function(t,a){return e(ie(t,a))}}})(function(e){var t=Object(n.useState)(""),a=Object(g.a)(t,2),i=a[0],l=a[1];if(Object(n.useEffect)(function(){de(e,{forceAuth:!1})},[]),"shop"!==e.pulledFrom)return null;var c=e.perk,o=e.profile;c&&e.setPageTitle({main:c.name,sub:o._id});var s;return c?r.a.createElement(rt.a,{title:r.a.createElement("span",null,"Item from"," ",r.a.createElement(b.a,{type:"link",style:{padding:0},onClick:function(){return e.history.push("/profile/"+o._id)}},r.a.createElement(S.a,{src:Y(o._id,o.image),style:{marginRight:"5px"}}),o.name+" ("+o._id+")")," ","shop")},c.images.map(function(e){return r.a.createElement("span",{onClick:function(){return l(e)}},r.a.createElement(rt.a,{type:"inner",style:{width:200,display:"inline-block"},hoverable:!0,cover:r.a.createElement("div",{style:{backgroundImage:"url("+e+")",height:200,width:200,backgroundSize:"cover"}})}))}),r.a.createElement("p",null,c.description),r.a.createElement(Et.a,{title:"Goal description",bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},r.a.createElement(La,{label:"Available for"},(s=c.users,o&&o.friendsData?s.map(function(t){var a=o.friendsData.find(function(e){return e._id===t});return a?r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return e.history.push("/profile/"+t)}},r.a.createElement(S.a,{src:Y(t,a.image),size:20,style:{marginRight:"10px"}}),a.name," - (",t,")"):t}):s)),r.a.createElement(La,{label:"Price"},c.price)),r.a.createElement(pe.a,{visible:i,footer:null,onCancel:function(){return l("")}},r.a.createElement("img",{alt:"example",style:{width:"100%"},src:i}))):null})),Va=Object(f.g)(Object(u.b)(function(e){return{isAuthed:e.isAuthed,wishlistItem:e.wishlistItem,profile:e.profile,pulledFrom:e.pulledFrom}},function(e){return{setData:function(t,a){return e(oe(t,a))},setPageTitle:function(t){return e(se(t))},tryAuth:function(t,a){return e(ie(t,a))}}})(function(e){var t=Object(n.useState)(""),a=Object(g.a)(t,2),i=a[0],l=a[1];if(Object(n.useEffect)(function(){de(e,{forceAuth:!1})},[]),"wishlist"!==e.pulledFrom)return null;var c=e.wishlistItem,o=e.profile;return c&&e.setPageTitle({main:c.name,sub:o._id}),c?r.a.createElement(rt.a,{title:r.a.createElement("span",null,"Item from"," ",r.a.createElement(b.a,{type:"link",style:{padding:0},onClick:function(){return e.history.push("/profile/"+o._id)}},r.a.createElement(S.a,{src:Y(o._id,o.image),style:{marginRight:"5px"}}),o.name+" ("+o._id+")")," ","wishlist")},c.images.map(function(e){return r.a.createElement("span",{onClick:function(){return l(e)}},r.a.createElement(rt.a,{type:"inner",style:{width:200,display:"inline-block"},hoverable:!0,cover:r.a.createElement("div",{style:{backgroundImage:"url("+e+")",height:200,width:200,backgroundSize:"cover"}})}))}),r.a.createElement("h1",null,c.name),r.a.createElement("p",null,c.description),r.a.createElement(pe.a,{visible:i,footer:null,onCancel:function(){return l("")}},r.a.createElement("img",{alt:"example",style:{width:"100%"},src:i}))):null})),Ua=Object(f.g)(Object(u.b)(function(e){return{account:e.account,isAuthed:e.isAuthed,pulledFrom:e.pulledFrom}},function(e){return{setData:function(t,a){return e(oe(t,a))},setPageTitle:function(t){return e(se(t))},tryAuth:function(t,a){return e(ie(t,a))}}})(function(e){return Object(n.useEffect)(function(){de(e,{}),e.setPageTitle({main:"Wishlist",sub:""})},[]),"wishlist"!==e.pulledFrom?null:e.account?r.a.createElement(ba,{mode:"wishlist"}):r.a.createElement("span",null)})),Ha=new E.a,Ka=Object(f.g)(Object(u.b)(function(e){return{isAuthed:e.isAuthed}},function(e){return{tryAuth:function(t,a){return e(ie(t,a))},logout:function(){return e(function(e){re.remove("rememberme",{path:"/"}),re.remove("auth_token",{path:"/"}),delete s.a.defaults.headers.common["x-auth-token"],delete s.a.defaults.headers.post["x-auth-token"],delete s.a.defaults.headers.get["x-auth-token"],delete s.a.defaults.headers.delete["x-auth-token"],delete s.a.defaults.headers.put["x-auth-token"],e(ce(!1))})}}})(function(e){var t=e.isAuthed;Object(n.useEffect)(function(){e.tryAuth(e)});var a=Ha.get("redirectto");a&&Ha.remove("redirectto",{path:"/"});var i=r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/goals",exact:!0,component:ht}),r.a.createElement(f.b,{path:"/goals",component:kt}),r.a.createElement(f.b,{path:"/progresses",exact:!0,component:Ct}),r.a.createElement(f.b,{path:"/progresses",component:ca}),r.a.createElement(f.b,{path:"/profile",component:za}),r.a.createElement(f.b,{path:"/friends",exact:!0,component:Pa}),r.a.createElement(f.b,{path:"/account",exact:!0,component:Ra}),r.a.createElement(f.b,{path:"/shop",exact:!0,component:ya}),r.a.createElement(f.b,{path:"/shop",component:Ga}),r.a.createElement(f.b,{path:"/wishlist",exact:!0,component:Ua}),r.a.createElement(f.b,{path:"/wishlist",component:Va}),!t&&r.a.createElement(f.b,{path:"/login",exact:!0,component:O}),r.a.createElement(f.b,{path:"/logout",exact:!0,component:function(){return e.logout(),r.a.createElement(f.a,{to:"/login"})}}),r.a.createElement(f.b,{path:"/activate-account",exact:!0,component:Ba}),!1,t?r.a.createElement(f.a,{to:"/progresses"}):r.a.createElement(f.a,{to:"/login"}));return a?r.a.createElement(f.a,{to:a}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{height:"100%"}},r.a.createElement($,null,i)))})),Wa=a(364),qa=Object(Wa.a)({account:{},profile:{},pageTitle:{},isAuthed:!1,wishlistItem:null,goal:null,progress:null,lastUrl:"",pulledFrom:""},{SET_DATA:function(e,t){if(t.data&&(t.data.account&&(e.account=t.data.account),t.data.profile&&(e.profile=t.data.profile),t.data.wishlistItem&&(e.wishlistItem=t.data.wishlistItem),t.data.goal&&(e.goal=t.data.goal),t.data.progress&&(e.progress=t.data.progress),t.data.perk&&(e.perk=t.data.perk)),t.pulledFrom){var a=t.pulledFrom.split("/")[1]||void 0;e.pulledFrom=a}},SET_FRIENDS_DATA:function(e,t){t.data&&(e.account.friendsData=t.data),t.data.perk&&(e.perk=t.data.perk)},SET_AVATAR_V:function(e,t){e.account.image=t.v},INCREASE_AVATAR_V:function(e){e.account.image=e.account.image+1},SET_IS_AUTHED:function(e,t){e.isAuthed=t.id},SET_PAGE_TITLE:function(e,t){e.pageTitle=t.title},SAVE_LAST_URL:function(e,t){"/login"!==t.url&&"/logout"!==t.url&&(e.lastUrl=t.url)}});a.d(t,"store",function(){return Ja}),s.a.defaults.baseURL="https://getreward.herokuapp.com";var Ja=Object(m.createStore)(qa,Object(p.composeWithDevTools)(Object(m.applyMiddleware)(d.a))),Ya=r.a.createElement(u.a,{store:Ja},r.a.createElement(c.a,null,r.a.createElement(Ka,null))),Qa=document.getElementById("root");l.a.render(Ya,Qa)}},[[373,1,2]]]);
//# sourceMappingURL=main.0ed4cc57.chunk.js.map